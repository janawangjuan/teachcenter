webpackJsonp([6],{"3l0B":function(e,t){},Wzz0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("4YfN"),o=a.n(n),l=a("gJ4k"),i=a("PLaU"),s=a("OOvn"),r=a("48sp"),c={name:"index",components:{systemBreadcrumb:l.a,unfoldCollapse:i.a},computed:{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}},mounted:function(){this.getList(),this.updateShowUserBack(!1)},data:function(){return{pageSize:20,totalCount:0,pageNo:1,loading:!1,tableData:[],formInline:{name:"",state:""}}},methods:o()({},Object(r.c)("systemManage",["updateAddRoleType","updateSelectRole","updateShowUserBack"]),{getList:function(){var e=this;s.a.ajax("getRoleList",{token:this.techLoginInfo.token,name:this.formInline.name,state:this.formInline.state,pageIndex:this.pageNo,pageSize:this.pageSize}).then(function(t){e.tableData=t.data.result,e.totalCount=t.data.total})},addRole:function(){this.updateAddRoleType("create"),this.$router.push("addRole")},edit:function(e){1!=e.isSystem?(this.updateAddRoleType("edit"),this.updateSelectRole(e),this.$router.push("addRole")):this.$message("该角色不可编辑~")},delete1:function(e){var t=this;e.hasMember>0?this.$message("该角色不可删除~"):this.$confirm("确定要删除该角色吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",showClose:!1,type:"warning"}).then(function(){s.a.ajax("deleteRole",{token:t.techLoginInfo.token,roleId:e.id}).then(function(e){e.state&&"success"==e.state?(t.webApi.alert("删除成功！"),t.getList()):t.webApi.alert("删除失败！")})}).catch(function(){})},checkForm:function(){this.pageNo=1,this.getList()},handleCurrentChange:function(e){this.pageNo=e,this.getList()},handleSizeChange:function(e){this.pageSize=e,this.pageNo=1,this.getList()}})},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"roleManage-wrap"},[a("div",{staticClass:"roleManage-content"},[a("div",[a("unfoldCollapse",{on:{checkForm:e.checkForm}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,size:"mini",model:e.formInline}},[a("el-form-item",{attrs:{label:"角色名称"}},[a("el-input",{attrs:{placeholder:"角色名称"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"状态"},model:{value:e.formInline.state,callback:function(t){e.$set(e.formInline,"state",t)},expression:"formInline.state"}},[a("el-option",{attrs:{label:"启用",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"停用",value:"0"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"add-button-wrap"},[a("el-button",{attrs:{size:"mini"},on:{click:e.addRole}},[e._v("添加角色")])],1),e._v(" "),a("div",{staticClass:"table-wrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",stripe:!0,size:"mini",height:"100%"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"角色名称"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.webApi.formatDate(t.row.createDate,"ALL")))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1==t.row.state?"启用":"停用"))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{class:["color-a","mr20",1==t.row.isSystem?"disable-a":""],attrs:{href:"javascript:;"},on:{click:function(a){return e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("a",{class:["color-a",t.row.hasMember>0||1==t.row.isSystem?"disable-a":""],attrs:{href:"javascript:;"},on:{click:function(a){return e.delete1(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination-wrap"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, sizes, total",pageSize:e.pageSize,total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])},staticRenderFns:[]};var d=a("C7Lr")(c,u,!1,function(e){a("3l0B")},null,null);t.default=d.exports}});
//# sourceMappingURL=6.0c1911f13f09c0799e42.js.map
