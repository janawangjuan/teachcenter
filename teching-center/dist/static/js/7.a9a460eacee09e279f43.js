webpackJsonp([7],{RlZ5:function(e,t){},ufos:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("4YfN"),o=n.n(a),l=n("gJ4k"),i=n("PLaU"),s=n("OOvn"),r=n("48sp"),c={name:"index",computed:{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}},components:{systemBreadcrumb:l.a,unfoldCollapse:i.a},data:function(){return{pageSize:20,totalCount:0,pageNo:1,loading:!1,tableData:[],roleList:[],envType:parseInt(this.cookie.get("envType")),formInline:{nickname:"",name:"",roleId:"",mobile:"",isAccountEnabled:""}}},mounted:function(){this.getList(),this.getRoleList(),this.updateShowUserBack(!1)},methods:o()({},Object(r.c)("systemManage",["updateAddUserType","updateSelectUser","updateShowUserBack"]),{addUser:function(){this.updateAddUserType("create"),this.$router.push("addUser")},getLoginToken:function(e){var t=this,n=this.$loading({lock:!0,text:"正在获取链接，请稍后~",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.7)"});s.a.ajax("getLoginToken",{data:this.webApi.base64encode(e.memberId+"#"+(new Date).getTime())}).then(function(e){if(e&&"success"==e.state){n.close(),console.log(t.envType);var a=("1"==t.envType?"https://techingdemo.zbgedu.com?token=":"https://teching.zbgedu.com?token=")+e.data.token;t.$copyText(a).then(function(){t.$message({message:"链接地址已经复制成功，请打开另一个浏览器，粘贴进入~",type:"success"})},function(e){t.$message.error("复制失败")})}else n.close(),t.webApi.alert(e.msg||"服务器异常，请重试~")})},deleteThis:function(e){var t=this;1!=e.isSystem?this.$confirm("确定要删除该用户吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",showClose:!1,type:"warning"}).then(function(){s.a.ajax("deleteUser",{token:t.techLoginInfo.token,memberId:e.memberId}).then(function(e){e.state&&"success"==e.state?(t.webApi.alert("删除成功！"),t.getList()):t.webApi.alert("删除失败！")})}).catch(function(){}):this.$message("该用户不可删除~")},edit:function(e){1!=e.isSystem?(this.updateAddUserType("edit"),this.updateSelectUser(e),this.$router.push("addUser")):this.$message("该用户不可编辑~")},toDetail:function(e){this.updateSelectUser(e),this.$router.push("detail")},getList:function(){var e=this;s.a.ajax("getUserList",{token:this.techLoginInfo.token,nickname:this.formInline.nickname,name:this.formInline.name,mobile:this.formInline.mobile,isAccountEnabled:this.formInline.isAccountEnabled,roleId:this.formInline.roleId,pageIndex:this.pageNo,pageSize:this.pageSize}).then(function(t){e.tableData=t.data.result,e.totalCount=t.data.total})},getRoleList:function(){var e=this;s.a.ajax("getSelectList",{token:this.techLoginInfo.token,state:""}).then(function(t){e.roleList=t.data})},checkForm:function(){this.pageNo=1,this.getList(),console.log("查询")},handleCurrentChange:function(e){this.pageNo=e,this.getList()},handleSizeChange:function(e){this.pageSize=e,this.pageNo=1,this.getList()}})},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"userManage-wrap"},[n("div",{staticClass:"userManage-content"},[n("div",[n("unfoldCollapse",{on:{checkForm:e.checkForm}},[n("el-form",{staticClass:"demo-form-inline",attrs:{size:"mini",inline:!0,model:e.formInline}},[n("el-form-item",{attrs:{label:"工号"}},[n("el-input",{attrs:{placeholder:"工号"},model:{value:e.formInline.nickname,callback:function(t){e.$set(e.formInline,"nickname",t)},expression:"formInline.nickname"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{attrs:{placeholder:"姓名"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"手机号"}},[n("el-input",{attrs:{placeholder:"手机号"},model:{value:e.formInline.mobile,callback:function(t){e.$set(e.formInline,"mobile",t)},expression:"formInline.mobile"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"角色"}},[n("el-select",{attrs:{placeholder:"角色"},model:{value:e.formInline.roleId,callback:function(t){e.$set(e.formInline,"roleId",t)},expression:"formInline.roleId"}},e._l(e.roleList,function(e,t){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"状态"}},[n("el-select",{attrs:{placeholder:"状态"},model:{value:e.formInline.isAccountEnabled,callback:function(t){e.$set(e.formInline,"isAccountEnabled",t)},expression:"formInline.isAccountEnabled"}},[n("el-option",{attrs:{label:"启用",value:"1"}}),e._v(" "),n("el-option",{attrs:{label:"停用",value:"0"}})],1)],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"add-button-wrap"},[n("el-button",{attrs:{size:"mini"},on:{click:e.addUser}},[e._v("添加用户")])],1),e._v(" "),n("div",{staticClass:"table-wrap"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",stripe:!0,size:"mini",height:"100%"}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),n("el-table-column",{attrs:{prop:"nickname",label:"工号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"mobile",label:"手机号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"roleName",label:"角色"}}),e._v(" "),n("el-table-column",{attrs:{prop:"createDate",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.webApi.formatDate(t.row.createDate,"ALL")))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"isAllScope",label:"是否查看全部数据范围"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1==t.row.isAllScope?"是":"否"))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"isAccountEnabled",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1==t.row.isAccountEnabled?"启用":"停用"))]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"220",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("a",{class:["color-a","mr10",1==t.row.isSystem?"disable-a":""],attrs:{href:"javascript:;"},on:{click:function(n){return e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),n("a",{class:["color-a","mr10"],attrs:{href:"javascript:;"},on:{click:function(n){return e.toDetail(t.row)}}},[e._v("查看详情")]),e._v(" "),n("a",{class:["color-a","mr10",1==t.row.isSystem?"disable-a":""],attrs:{href:"javascript:;"},on:{click:function(n){return e.deleteThis(t.row)}}},[e._v("删除")]),e._v(" "),n("a",{class:["color-a"],attrs:{href:"javascript:;"},on:{click:function(n){return e.getLoginToken(t.row)}}},[e._v("模拟登录")])]}}])})],1)],1),e._v(" "),n("div",{staticClass:"pagination-wrap"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next, sizes, total",pageSize:e.pageSize,total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])},staticRenderFns:[]};var d=n("C7Lr")(c,u,!1,function(e){n("RlZ5")},null,null);t.default=d.exports}});
//# sourceMappingURL=7.a9a460eacee09e279f43.js.map
