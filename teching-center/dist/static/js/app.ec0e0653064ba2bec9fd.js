webpackJsonp([14],{"/Imm":function(t,e){},"/pdO":function(t,e){},0:function(t,e){},1:function(t,e){},"10cD":function(t,e){},2:function(t,e){},"2AI7":function(t,e){},"2fcg":function(t,e){},3:function(t,e){},"4er+":function(t,e,a){"use strict";var s=a("4YfN"),i=a.n(s),n=a("48sp"),o={name:"iNav",data:function(){return{isCollapse:!1,showChildNav:!1,jiantouWrapTop:"10px",routerFLag:!0,childNavList:[{title:"网课统计",showLi:!0,children:[{title:"优播课学习行为",url:"/tmIndex/dataStatistics/youboStudyAction"}]},{title:"答疑辅导统计",showLi:!0,children:[{title:"教师答疑统计",url:"/tmIndex/dataStatistics/teacherAQStatistics"}]}]}},computed:i()({},Object(n.d)({userMenu:function(t){return t.global.userMenu}})),methods:{handleOpen:function(t,e){},changeCollapse:function(){this.isCollapse=!this.isCollapse},handleClose:function(t,e){},changeChildNav:function(t,e){this.jiantouWrapTop=e.currentTarget.getBoundingClientRect().top-43+"px"},selectMenu:function(t,e,a){null==e?(this.routerFLag=!1,"/tmIndex/dataStatistics"==this.getRouter()?this.showChildNav=!this.showChildNav:(this.$router.push({path:"/tmIndex/dataStatistics/youboStudyAction"}),this.showChildNav=!0)):this.showChildNav=!1},getRouter:function(t){var e,a=t;return a="/"+(e=a.split("/"))[1]+(e[2]?"/"+e[2]:"")+(e[3]?"/"+e[3]:"")},changeRoute:function(t){this.$router.push({path:t})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-wrap-big"},[a("div",{staticClass:"nav-wrap"},[a("div",{staticClass:"change-collapse-wrap"},[a("button",{staticClass:"change-collapse",class:[t.isCollapse?"":"expansion"],on:{click:t.changeCollapse}})]),t._v(" "),a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.getRouter(t.$route.path),"default-openeds":["0","1","2","3"],router:!1,collapse:t.isCollapse},on:{open:t.handleOpen,close:t.handleClose}},t._l(t.userMenu,function(e,s){return a("el-submenu",{key:e.id,attrs:{index:s+""}},[a("template",{slot:"title"},[a("i",{class:[e.icon,"icon-i"]}),t._v(" "),a("span",{staticClass:"text-span"},[t._v(t._s(e.name))])]),t._v(" "),t._l(e.childList,function(e){return a("el-menu-item",{key:e.id,attrs:{index:t.getRouter(e.url)},on:{click:function(a){return t.changeRoute(e.url)}}},[t._v(t._s(e.name)+" "),a("span",{staticClass:"xiaokuai"})])})],2)}),1)],1),t._v(" "),t.showChildNav?a("div",{staticClass:"child-nav"},[a("ul",{staticClass:"yiji-ul"},t._l(t.childNavList,function(e,s){return a("li",{staticClass:"yiji-li"},[a("div",{staticClass:"yiji-title",on:{click:function(t){e.showLi=!e.showLi}}},[a("i",{class:[e.showLi?"el-icon-caret-bottom":"el-icon-caret-right"]}),t._v(t._s(e.title))]),t._v(" "),e.showLi?a("ul",{staticClass:"erji-ul"},t._l(e.children,function(e,s){return a("li",{staticClass:"erji-li",class:[e.url==t.$router.currentRoute.fullPath?"active":""],on:{click:function(a){return t.changeRoute(e.url)}}},[a("div",{staticClass:"erji-title"},[t._v(t._s(e.title))])])}),0):t._e()])}),0),t._v(" "),a("div",{ref:"jiantouLeft",staticClass:"jiantou-wrap",style:{top:t.jiantouWrapTop}},[a("div",{staticClass:"triangle-left"})])]):t._e()])},staticRenderFns:[]};var l=a("C7Lr")(o,r,!1,function(t){a("K/nj")},null,null).exports,c=a("iDk4"),u=a("84iU"),p=a.n(u),d={name:"layout",mounted:function(){console.log(this.userMenu),this.$router.replace(this.userMenu[0].url?this.userMenu[0].url:this.userMenu[0].childList[0].url)},data:function(){return{fileList:[]}},methods:{selectImg:function(t){console.log(this.$refs.imgInput),t.preventDefault();var e=t.target.files;console.log(e);var a=e[0];console.log(a);var s=new FormData;s.append("file",a),s.append("token",this.techLoginInfo.token),p.a.post("http://apidemo.zbgedu.com/api/base/file/upload",s,{method:"post",headers:{"Content-Type":"multipart/form-data"}}).then(function(t){console.log(t.data)}).catch(function(t){console.log(t)})},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)},handleExceed:function(t,e){this.$message.warning("当前限制选择 3 个文件，本次选择了 "+t.length+" 个文件，共选择了 "+(t.length+e.length)+" 个文件")},beforeRemove:function(t,e){return this.$confirm("确定移除 "+t.name+"？")}},computed:i()({},Object(n.d)({isEnv:function(t){return t.global.isEnv},userMenu:function(t){return t.global.userMenu}}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}}),components:{iNav:l,iHeader:c.a}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app",attrs:{id:"app"}},[e("el-container",{staticClass:"layout-el-container"},[e("el-header",{staticClass:"layout-el-header"},[e("iHeader")],1),this._v(" "),e("el-container",{staticClass:"layout-el-container"},[e("el-aside",{staticClass:"tmIndex-el-aside",attrs:{width:"auto"}},[e("iNav")],1),this._v(" "),e("el-main",{staticClass:"layout-el-main"},[e("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var m=a("C7Lr")(d,h,!1,function(t){a("oSZX")},null,null);e.a=m.exports},"6YHl":function(t,e){},"7QC7":function(t,e){},"7Wtw":function(t,e){},"9Y2X":function(t,e){},BqyZ:function(t,e){},"E/Qh":function(t,e,a){var s,i;
/*! PhotoSwipe - v4.1.2 - 2017-04-05
* http://photoswipe.com
* Copyright (c) 2017 Dmitry Semenov; */void 0===(i="function"==typeof(s=function(){"use strict";return function(t,e,a,s){var i={features:null,bind:function(t,e,a,s){var i=(s?"remove":"add")+"EventListener";e=e.split(" ");for(var n=0;n<e.length;n++)e[n]&&t[i](e[n],a,!1)},isArray:function(t){return t instanceof Array},createEl:function(t,e){var a=document.createElement(e||"div");return t&&(a.className=t),a},getScrollY:function(){var t=window.pageYOffset;return void 0!==t?t:document.documentElement.scrollTop},unbind:function(t,e,a){i.bind(t,e,a,!0)},removeClass:function(t,e){var a=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(a," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(t,e){i.hasClass(t,e)||(t.className+=(t.className?" ":"")+e)},hasClass:function(t,e){return t.className&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},getChildByClass:function(t,e){for(var a=t.firstChild;a;){if(i.hasClass(a,e))return a;a=a.nextSibling}},arraySearch:function(t,e,a){for(var s=t.length;s--;)if(t[s][a]===e)return s;return-1},extend:function(t,e,a){for(var s in e)if(e.hasOwnProperty(s)){if(a&&t.hasOwnProperty(s))continue;t[s]=e[s]}},easing:{sine:{out:function(t){return Math.sin(t*(Math.PI/2))},inOut:function(t){return-(Math.cos(Math.PI*t)-1)/2}},cubic:{out:function(t){return--t*t*t+1}}},detectFeatures:function(){if(i.features)return i.features;var t=i.createEl().style,e="",a={};if(a.oldIE=document.all&&!document.addEventListener,a.touch="ontouchstart"in window,window.requestAnimationFrame&&(a.raf=window.requestAnimationFrame,a.caf=window.cancelAnimationFrame),a.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!a.pointerEvent){var s=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var n=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);n&&n.length>0&&(n=parseInt(n[1],10))>=1&&n<8&&(a.isOldIOSPhone=!0)}var o=s.match(/Android\s([0-9\.]*)/),r=o?o[1]:0;(r=parseFloat(r))>=1&&(r<4.4&&(a.isOldAndroid=!0),a.androidVersion=r),a.isMobileOpera=/opera mini|opera mobi/i.test(s)}for(var l,c,u=["transform","perspective","animationName"],p=["","webkit","Moz","ms","O"],d=0;d<4;d++){e=p[d];for(var h=0;h<3;h++)l=u[h],c=e+(e?l.charAt(0).toUpperCase()+l.slice(1):l),!a[l]&&c in t&&(a[l]=c);e&&!a.raf&&(e=e.toLowerCase(),a.raf=window[e+"RequestAnimationFrame"],a.raf&&(a.caf=window[e+"CancelAnimationFrame"]||window[e+"CancelRequestAnimationFrame"]))}if(!a.raf){var m=0;a.raf=function(t){var e=(new Date).getTime(),a=Math.max(0,16-(e-m)),s=window.setTimeout(function(){t(e+a)},a);return m=e+a,s},a.caf=function(t){clearTimeout(t)}}return a.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,i.features=a,a}};i.detectFeatures(),i.features.oldIE&&(i.bind=function(t,e,a,s){e=e.split(" ");for(var i,n=(s?"detach":"attach")+"Event",o=function(){a.handleEvent.call(a)},r=0;r<e.length;r++)if(i=e[r])if("object"==typeof a&&a.handleEvent){if(s){if(!a["oldIE"+i])return!1}else a["oldIE"+i]=o;t[n]("on"+i,a["oldIE"+i])}else t[n]("on"+i,a)});var n=this,o={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(t){return"A"===t.tagName},getDoubleTapZoom:function(t,e){return t?1:e.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};i.extend(o,s);var r,l,c,u,p,d,h,m,f,v,g,C,b,_,x,y,w,k,I,S,T,D,P,E,A,L,N,R,z,O,j,F,M,$,q,B,U,W,V,G,H,Z,Q,Y,K,J,X,tt,et,at,st,it,nt,ot,rt,lt,ct={x:0,y:0},ut={x:0,y:0},pt={x:0,y:0},dt={},ht=0,mt={},ft={x:0,y:0},vt=0,gt=!0,Ct=[],bt={},_t=!1,xt=function(t,e){i.extend(n,e.publicMethods),Ct.push(t)},yt=function(t){var e=qe();return t>e-1?t-e:t<0?e+t:t},wt={},kt=function(t,e){return wt[t]||(wt[t]=[]),wt[t].push(e)},It=function(t){var e=wt[t];if(e){var a=Array.prototype.slice.call(arguments);a.shift();for(var s=0;s<e.length;s++)e[s].apply(n,a)}},St=function(){return(new Date).getTime()},Tt=function(t){ot=t,n.bg.style.opacity=t*o.bgOpacity},Dt=function(t,e,a,s,i){(!_t||i&&i!==n.currItem)&&(s/=i?i.fitRatio:n.currItem.fitRatio),t[D]=C+e+"px, "+a+"px"+b+" scale("+s+")"},Pt=function(t){et&&(t&&(v>n.currItem.fitRatio?_t||(Ye(n.currItem,!1,!0),_t=!0):_t&&(Ye(n.currItem),_t=!1)),Dt(et,pt.x,pt.y,v))},Et=function(t){t.container&&Dt(t.container.style,t.initialPosition.x,t.initialPosition.y,t.initialZoomLevel,t)},At=function(t,e){e[D]=C+t+"px, 0px"+b},Lt=function(t,e){if(!o.loop&&e){var a=u+(ft.x*ht-t)/ft.x,s=Math.round(t-ue.x);(a<0&&s>0||a>=qe()-1&&s<0)&&(t=ue.x+s*o.mainScrollEndFriction)}ue.x=t,At(t,p)},Nt=function(t,e){var a=pe[t]-mt[t];return ut[t]+ct[t]+a-a*(e/g)},Rt=function(t,e){t.x=e.x,t.y=e.y,e.id&&(t.id=e.id)},zt=function(t){t.x=Math.round(t.x),t.y=Math.round(t.y)},Ot=null,jt=function(){Ot&&(i.unbind(document,"mousemove",jt),i.addClass(t,"pswp--has_mouse"),o.mouseUsed=!0,It("mouseUsed")),Ot=setTimeout(function(){Ot=null},100)},Ft=function(t,e){var a=Ge(n.currItem,dt,t);return e&&(tt=a),a},Mt=function(t){return t||(t=n.currItem),t.initialZoomLevel},$t=function(t){return t||(t=n.currItem),t.w>0?o.maxSpreadZoom:1},qt=function(t,e,a,s){return s===n.currItem.initialZoomLevel?(a[t]=n.currItem.initialPosition[t],!0):(a[t]=Nt(t,s),a[t]>e.min[t]?(a[t]=e.min[t],!0):a[t]<e.max[t]&&(a[t]=e.max[t],!0))},Bt=function(t){var e="";o.escKey&&27===t.keyCode?e="close":o.arrowKeys&&(37===t.keyCode?e="prev":39===t.keyCode&&(e="next")),e&&(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey||(t.preventDefault?t.preventDefault():t.returnValue=!1,n[e]()))},Ut=function(t){t&&(Z||H||at||U)&&(t.preventDefault(),t.stopPropagation())},Wt=function(){n.setScrollOffset(0,i.getScrollY())},Vt={},Gt=0,Ht=function(t){Vt[t]&&(Vt[t].raf&&L(Vt[t].raf),Gt--,delete Vt[t])},Zt=function(t){Vt[t]&&Ht(t),Vt[t]||(Gt++,Vt[t]={})},Qt=function(){for(var t in Vt)Vt.hasOwnProperty(t)&&Ht(t)},Yt=function(t,e,a,s,i,n,o){var r,l=St();Zt(t);var c=function(){if(Vt[t]){if((r=St()-l)>=s)return Ht(t),n(a),void(o&&o());n((a-e)*i(r/s)+e),Vt[t].raf=A(c)}};c()},Kt={shout:It,listen:kt,viewportSize:dt,options:o,isMainScrollAnimating:function(){return at},getZoomLevel:function(){return v},getCurrentIndex:function(){return u},isDragging:function(){return V},isZooming:function(){return J},setScrollOffset:function(t,e){mt.x=t,O=mt.y=e,It("updateScrollOffset",mt)},applyZoomPan:function(t,e,a,s){pt.x=e,pt.y=a,v=t,Pt(s)},init:function(){if(!r&&!l){var a;n.framework=i,n.template=t,n.bg=i.getChildByClass(t,"pswp__bg"),N=t.className,r=!0,j=i.detectFeatures(),A=j.raf,L=j.caf,D=j.transform,z=j.oldIE,n.scrollWrap=i.getChildByClass(t,"pswp__scroll-wrap"),n.container=i.getChildByClass(n.scrollWrap,"pswp__container"),p=n.container.style,n.itemHolders=y=[{el:n.container.children[0],wrap:0,index:-1},{el:n.container.children[1],wrap:0,index:-1},{el:n.container.children[2],wrap:0,index:-1}],y[0].el.style.display=y[2].el.style.display="none",function(){if(D){var e=j.perspective&&!E;return C="translate"+(e?"3d(":"("),void(b=j.perspective?", 0px)":")")}D="left",i.addClass(t,"pswp--ie"),At=function(t,e){e.left=t+"px"},Et=function(t){var e=t.fitRatio>1?1:t.fitRatio,a=t.container.style,s=e*t.w,i=e*t.h;a.width=s+"px",a.height=i+"px",a.left=t.initialPosition.x+"px",a.top=t.initialPosition.y+"px"},Pt=function(){if(et){var t=et,e=n.currItem,a=e.fitRatio>1?1:e.fitRatio,s=a*e.w,i=a*e.h;t.width=s+"px",t.height=i+"px",t.left=pt.x+"px",t.top=pt.y+"px"}}}(),f={resize:n.updateSize,orientationchange:function(){clearTimeout(F),F=setTimeout(function(){dt.x!==n.scrollWrap.clientWidth&&n.updateSize()},500)},scroll:Wt,keydown:Bt,click:Ut};var s=j.isOldIOSPhone||j.isOldAndroid||j.isMobileOpera;for(j.animationName&&j.transform&&!s||(o.showAnimationDuration=o.hideAnimationDuration=0),a=0;a<Ct.length;a++)n["init"+Ct[a]]();e&&(n.ui=new e(n,i)).init(),It("firstUpdate"),u=u||o.index||0,(isNaN(u)||u<0||u>=qe())&&(u=0),n.currItem=$e(u),(j.isOldIOSPhone||j.isOldAndroid)&&(gt=!1),t.setAttribute("aria-hidden","false"),o.modal&&(gt?t.style.position="fixed":(t.style.position="absolute",t.style.top=i.getScrollY()+"px")),void 0===O&&(It("initialLayout"),O=R=i.getScrollY());var c="pswp--open ";for(o.mainClass&&(c+=o.mainClass+" "),o.showHideOpacity&&(c+="pswp--animate_opacity "),c+=E?"pswp--touch":"pswp--notouch",c+=j.animationName?" pswp--css_animation":"",c+=j.svg?" pswp--svg":"",i.addClass(t,c),n.updateSize(),d=-1,vt=null,a=0;a<3;a++)At((a+d)*ft.x,y[a].el.style);z||i.bind(n.scrollWrap,m,n),kt("initialZoomInEnd",function(){n.setContent(y[0],u-1),n.setContent(y[2],u+1),y[0].el.style.display=y[2].el.style.display="block",o.focus&&t.focus(),i.bind(document,"keydown",n),j.transform&&i.bind(n.scrollWrap,"click",n),o.mouseUsed||i.bind(document,"mousemove",jt),i.bind(window,"resize scroll orientationchange",n),It("bindEvents")}),n.setContent(y[1],u),n.updateCurrItem(),It("afterInit"),gt||(_=setInterval(function(){Gt||V||J||v!==n.currItem.initialZoomLevel||n.updateSize()},1e3)),i.addClass(t,"pswp--visible")}},close:function(){r&&(r=!1,l=!0,It("close"),i.unbind(window,"resize scroll orientationchange",n),i.unbind(window,"scroll",f.scroll),i.unbind(document,"keydown",n),i.unbind(document,"mousemove",jt),j.transform&&i.unbind(n.scrollWrap,"click",n),V&&i.unbind(window,h,n),clearTimeout(F),It("unbindEvents"),Be(n.currItem,null,!0,n.destroy))},destroy:function(){It("destroy"),Oe&&clearTimeout(Oe),t.setAttribute("aria-hidden","true"),t.className=N,_&&clearInterval(_),i.unbind(n.scrollWrap,m,n),i.unbind(window,"scroll",n),me(),Qt(),wt=null},panTo:function(t,e,a){a||(t>tt.min.x?t=tt.min.x:t<tt.max.x&&(t=tt.max.x),e>tt.min.y?e=tt.min.y:e<tt.max.y&&(e=tt.max.y)),pt.x=t,pt.y=e,Pt()},handleEvent:function(t){t=t||window.event,f[t.type]&&f[t.type](t)},goTo:function(t){var e=(t=yt(t))-u;vt=e,u=t,n.currItem=$e(u),ht-=e,Lt(ft.x*ht),Qt(),at=!1,n.updateCurrItem()},next:function(){n.goTo(u+1)},prev:function(){n.goTo(u-1)},updateCurrZoomItem:function(t){if(t&&It("beforeChange",0),y[1].el.children.length){var e=y[1].el.children[0];et=i.hasClass(e,"pswp__zoom-wrap")?e.style:null}else et=null;tt=n.currItem.bounds,g=v=n.currItem.initialZoomLevel,pt.x=tt.center.x,pt.y=tt.center.y,t&&It("afterChange")},invalidateCurrItems:function(){x=!0;for(var t=0;t<3;t++)y[t].item&&(y[t].item.needsUpdate=!0)},updateCurrItem:function(t){if(0!==vt){var e,a=Math.abs(vt);if(!(t&&a<2)){n.currItem=$e(u),_t=!1,It("beforeChange",vt),a>=3&&(d+=vt+(vt>0?-3:3),a=3);for(var s=0;s<a;s++)vt>0?(e=y.shift(),y[2]=e,At((++d+2)*ft.x,e.el.style),n.setContent(e,u-a+s+1+1)):(e=y.pop(),y.unshift(e),At(--d*ft.x,e.el.style),n.setContent(e,u+a-s-1-1));if(et&&1===Math.abs(vt)){var i=$e(w);i.initialZoomLevel!==v&&(Ge(i,dt),Ye(i),Et(i))}vt=0,n.updateCurrZoomItem(),w=u,It("afterChange")}}},updateSize:function(e){if(!gt&&o.modal){var a=i.getScrollY();if(O!==a&&(t.style.top=a+"px",O=a),!e&&bt.x===window.innerWidth&&bt.y===window.innerHeight)return;bt.x=window.innerWidth,bt.y=window.innerHeight,t.style.height=bt.y+"px"}if(dt.x=n.scrollWrap.clientWidth,dt.y=n.scrollWrap.clientHeight,Wt(),ft.x=dt.x+Math.round(dt.x*o.spacing),ft.y=dt.y,Lt(ft.x*ht),It("beforeResize"),void 0!==d){for(var s,r,l,c=0;c<3;c++)s=y[c],At((c+d)*ft.x,s.el.style),l=u+c-1,o.loop&&qe()>2&&(l=yt(l)),(r=$e(l))&&(x||r.needsUpdate||!r.bounds)?(n.cleanSlide(r),n.setContent(s,l),1===c&&(n.currItem=r,n.updateCurrZoomItem(!0)),r.needsUpdate=!1):-1===s.index&&l>=0&&n.setContent(s,l),r&&r.container&&(Ge(r,dt),Ye(r),Et(r));x=!1}g=v=n.currItem.initialZoomLevel,(tt=n.currItem.bounds)&&(pt.x=tt.center.x,pt.y=tt.center.y,Pt(!0)),It("resize")},zoomTo:function(t,e,a,s,n){e&&(g=v,pe.x=Math.abs(e.x)-pt.x,pe.y=Math.abs(e.y)-pt.y,Rt(ut,pt));var o=Ft(t,!1),r={};qt("x",o,r,t),qt("y",o,r,t);var l=v,c=pt.x,u=pt.y;zt(r);var p=function(e){1===e?(v=t,pt.x=r.x,pt.y=r.y):(v=(t-l)*e+l,pt.x=(r.x-c)*e+c,pt.y=(r.y-u)*e+u),n&&n(e),Pt(1===e)};a?Yt("customZoomTo",0,1,a,s||i.easing.sine.inOut,p):p(1)}},Jt={},Xt={},te={},ee={},ae={},se=[],ie={},ne=[],oe={},re=0,le={x:0,y:0},ce=0,ue={x:0,y:0},pe={x:0,y:0},de={x:0,y:0},he=function(t,e){return oe.x=Math.abs(t.x-e.x),oe.y=Math.abs(t.y-e.y),Math.sqrt(oe.x*oe.x+oe.y*oe.y)},me=function(){Q&&(L(Q),Q=null)},fe=function(){V&&(Q=A(fe),Pe())},ve=function(t,e){return!(!t||t===document)&&!(t.getAttribute("class")&&t.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(e(t)?t:ve(t.parentNode,e))},ge={},Ce=function(t,e){return ge.prevent=!ve(t.target,o.isClickableElement),It("preventDragEvent",t,e,ge),ge.prevent},be=function(t,e){return e.x=t.pageX,e.y=t.pageY,e.id=t.identifier,e},_e=function(t,e,a){a.x=.5*(t.x+e.x),a.y=.5*(t.y+e.y)},xe=function(){var t=pt.y-n.currItem.initialPosition.y;return 1-Math.abs(t/(dt.y/2))},ye={},we={},ke=[],Ie=function(t){for(;ke.length>0;)ke.pop();return P?(lt=0,se.forEach(function(t){0===lt?ke[0]=t:1===lt&&(ke[1]=t),lt++})):t.type.indexOf("touch")>-1?t.touches&&t.touches.length>0&&(ke[0]=be(t.touches[0],ye),t.touches.length>1&&(ke[1]=be(t.touches[1],we))):(ye.x=t.pageX,ye.y=t.pageY,ye.id="",ke[0]=ye),ke},Se=function(t,e){var a,s,i,r,l=pt[t]+e[t],c=e[t]>0,u=ue.x+e.x,p=ue.x-ie.x;if(a=l>tt.min[t]||l<tt.max[t]?o.panEndFriction:1,l=pt[t]+e[t]*a,(o.allowPanToNext||v===n.currItem.initialZoomLevel)&&(et?"h"!==st||"x"!==t||H||(c?(l>tt.min[t]&&(a=o.panEndFriction,tt.min[t],s=tt.min[t]-ut[t]),(s<=0||p<0)&&qe()>1?(r=u,p<0&&u>ie.x&&(r=ie.x)):tt.min.x!==tt.max.x&&(i=l)):(l<tt.max[t]&&(a=o.panEndFriction,tt.max[t],s=ut[t]-tt.max[t]),(s<=0||p>0)&&qe()>1?(r=u,p>0&&u<ie.x&&(r=ie.x)):tt.min.x!==tt.max.x&&(i=l))):r=u,"x"===t))return void 0!==r&&(Lt(r,!0),Y=r!==ie.x),tt.min.x!==tt.max.x&&(void 0!==i?pt.x=i:Y||(pt.x+=e.x*a)),void 0!==r;at||Y||v>n.currItem.fitRatio&&(pt[t]+=e[t]*a)},Te=function(t){if(!("mousedown"===t.type&&t.button>0))if(Me)t.preventDefault();else if(!W||"mousedown"!==t.type){if(Ce(t,!0)&&t.preventDefault(),It("pointerDown"),P){var e=i.arraySearch(se,t.pointerId,"id");e<0&&(e=se.length),se[e]={x:t.pageX,y:t.pageY,id:t.pointerId}}var a=Ie(t),s=a.length;K=null,Qt(),V&&1!==s||(V=it=!0,i.bind(window,h,n),B=rt=nt=U=Y=Z=G=H=!1,st=null,It("firstTouchStart",a),Rt(ut,pt),ct.x=ct.y=0,Rt(ee,a[0]),Rt(ae,ee),ie.x=ft.x*ht,ne=[{x:ee.x,y:ee.y}],$=M=St(),Ft(v,!0),me(),fe()),!J&&s>1&&!at&&!Y&&(g=v,H=!1,J=G=!0,ct.y=ct.x=0,Rt(ut,pt),Rt(Jt,a[0]),Rt(Xt,a[1]),_e(Jt,Xt,de),pe.x=Math.abs(de.x)-pt.x,pe.y=Math.abs(de.y)-pt.y,X=he(Jt,Xt))}},De=function(t){if(t.preventDefault(),P){var e=i.arraySearch(se,t.pointerId,"id");if(e>-1){var a=se[e];a.x=t.pageX,a.y=t.pageY}}if(V){var s=Ie(t);if(st||Z||J)K=s;else if(ue.x!==ft.x*ht)st="h";else{var n=Math.abs(s[0].x-ee.x)-Math.abs(s[0].y-ee.y);Math.abs(n)>=10&&(st=n>0?"h":"v",K=s)}}},Pe=function(){if(K){var t=K.length;if(0!==t)if(Rt(Jt,K[0]),te.x=Jt.x-ee.x,te.y=Jt.y-ee.y,J&&t>1){if(ee.x=Jt.x,ee.y=Jt.y,!te.x&&!te.y&&function(t,e){return t.x===e.x&&t.y===e.y}(K[1],Xt))return;Rt(Xt,K[1]),H||(H=!0,It("zoomGestureStarted"));var e=he(Jt,Xt),a=Re(e);a>n.currItem.initialZoomLevel+n.currItem.initialZoomLevel/15&&(rt=!0);var s=1,i=Mt(),r=$t();if(a<i)if(o.pinchToClose&&!rt&&g<=n.currItem.initialZoomLevel){var l=1-(i-a)/(i/1.2);Tt(l),It("onPinchClose",l),nt=!0}else(s=(i-a)/i)>1&&(s=1),a=i-s*(i/3);else a>r&&((s=(a-r)/(6*i))>1&&(s=1),a=r+s*i);s<0&&(s=0),_e(Jt,Xt,le),ct.x+=le.x-de.x,ct.y+=le.y-de.y,Rt(de,le),pt.x=Nt("x",a),pt.y=Nt("y",a),B=a>v,v=a,Pt()}else{if(!st)return;if(it&&(it=!1,Math.abs(te.x)>=10&&(te.x-=K[0].x-ae.x),Math.abs(te.y)>=10&&(te.y-=K[0].y-ae.y)),ee.x=Jt.x,ee.y=Jt.y,0===te.x&&0===te.y)return;if("v"===st&&o.closeOnVerticalDrag&&"fit"===o.scaleMode&&v===n.currItem.initialZoomLevel){ct.y+=te.y,pt.y+=te.y;var c=xe();return U=!0,It("onVerticalDrag",c),Tt(c),void Pt()}!function(t,e,a){if(t-$>50){var s=ne.length>2?ne.shift():{};s.x=e,s.y=a,ne.push(s),$=t}}(St(),Jt.x,Jt.y),Z=!0,tt=n.currItem.bounds,Se("x",te)||(Se("y",te),zt(pt),Pt())}}},Ee=function(t){if(j.isOldAndroid){if(W&&"mouseup"===t.type)return;t.type.indexOf("touch")>-1&&(clearTimeout(W),W=setTimeout(function(){W=0},600))}var e;if(It("pointerUp"),Ce(t,!1)&&t.preventDefault(),P){var a=i.arraySearch(se,t.pointerId,"id");a>-1&&(e=se.splice(a,1)[0],navigator.pointerEnabled?e.type=t.pointerType||"mouse":(e.type={4:"mouse",2:"touch",3:"pen"}[t.pointerType],e.type||(e.type=t.pointerType||"mouse")))}var s,r=Ie(t),l=r.length;if("mouseup"===t.type&&(l=0),2===l)return K=null,!0;1===l&&Rt(ae,r[0]),0!==l||st||at||(e||("mouseup"===t.type?e={x:t.pageX,y:t.pageY,type:"mouse"}:t.changedTouches&&t.changedTouches[0]&&(e={x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY,type:"touch"})),It("touchRelease",t,e));var c=-1;if(0===l&&(V=!1,i.unbind(window,h,n),me(),J?c=0:-1!==ce&&(c=St()-ce)),ce=1===l?St():-1,s=-1!==c&&c<150?"zoom":"swipe",J&&l<2&&(J=!1,1===l&&(s="zoomPointerUp"),It("zoomGestureEnded")),K=null,Z||H||at||U)if(Qt(),q||(q=Ae()),q.calculateSwipeSpeed("x"),U)if(xe()<o.verticalDragRange)n.close();else{var u=pt.y,p=ot;Yt("verticalDrag",0,1,300,i.easing.cubic.out,function(t){pt.y=(n.currItem.initialPosition.y-u)*t+u,Tt((1-p)*t+p),Pt()}),It("onVerticalDrag",1)}else{if((Y||at)&&0===l){if(Ne(s,q))return;s="zoomPointerUp"}at||("swipe"===s?!Y&&v>n.currItem.fitRatio&&Le(q):ze())}},Ae=function(){var t,e,a={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(s){ne.length>1?(t=St()-$+50,e=ne[ne.length-2][s]):(t=St()-M,e=ae[s]),a.lastFlickOffset[s]=ee[s]-e,a.lastFlickDist[s]=Math.abs(a.lastFlickOffset[s]),a.lastFlickDist[s]>20?a.lastFlickSpeed[s]=a.lastFlickOffset[s]/t:a.lastFlickSpeed[s]=0,Math.abs(a.lastFlickSpeed[s])<.1&&(a.lastFlickSpeed[s]=0),a.slowDownRatio[s]=.95,a.slowDownRatioReverse[s]=1-a.slowDownRatio[s],a.speedDecelerationRatio[s]=1},calculateOverBoundsAnimOffset:function(t,e){a.backAnimStarted[t]||(pt[t]>tt.min[t]?a.backAnimDestination[t]=tt.min[t]:pt[t]<tt.max[t]&&(a.backAnimDestination[t]=tt.max[t]),void 0!==a.backAnimDestination[t]&&(a.slowDownRatio[t]=.7,a.slowDownRatioReverse[t]=1-a.slowDownRatio[t],a.speedDecelerationRatioAbs[t]<.05&&(a.lastFlickSpeed[t]=0,a.backAnimStarted[t]=!0,Yt("bounceZoomPan"+t,pt[t],a.backAnimDestination[t],e||300,i.easing.sine.out,function(e){pt[t]=e,Pt()}))))},calculateAnimOffset:function(t){a.backAnimStarted[t]||(a.speedDecelerationRatio[t]=a.speedDecelerationRatio[t]*(a.slowDownRatio[t]+a.slowDownRatioReverse[t]-a.slowDownRatioReverse[t]*a.timeDiff/10),a.speedDecelerationRatioAbs[t]=Math.abs(a.lastFlickSpeed[t]*a.speedDecelerationRatio[t]),a.distanceOffset[t]=a.lastFlickSpeed[t]*a.speedDecelerationRatio[t]*a.timeDiff,pt[t]+=a.distanceOffset[t])},panAnimLoop:function(){if(Vt.zoomPan&&(Vt.zoomPan.raf=A(a.panAnimLoop),a.now=St(),a.timeDiff=a.now-a.lastNow,a.lastNow=a.now,a.calculateAnimOffset("x"),a.calculateAnimOffset("y"),Pt(),a.calculateOverBoundsAnimOffset("x"),a.calculateOverBoundsAnimOffset("y"),a.speedDecelerationRatioAbs.x<.05&&a.speedDecelerationRatioAbs.y<.05))return pt.x=Math.round(pt.x),pt.y=Math.round(pt.y),Pt(),void Ht("zoomPan")}};return a},Le=function(t){if(t.calculateSwipeSpeed("y"),tt=n.currItem.bounds,t.backAnimDestination={},t.backAnimStarted={},Math.abs(t.lastFlickSpeed.x)<=.05&&Math.abs(t.lastFlickSpeed.y)<=.05)return t.speedDecelerationRatioAbs.x=t.speedDecelerationRatioAbs.y=0,t.calculateOverBoundsAnimOffset("x"),t.calculateOverBoundsAnimOffset("y"),!0;Zt("zoomPan"),t.lastNow=St(),t.panAnimLoop()},Ne=function(t,e){var a,s,r;if(at||(re=u),"swipe"===t){var l=ee.x-ae.x,c=e.lastFlickDist.x<10;l>30&&(c||e.lastFlickOffset.x>20)?s=-1:l<-30&&(c||e.lastFlickOffset.x<-20)&&(s=1)}s&&((u+=s)<0?(u=o.loop?qe()-1:0,r=!0):u>=qe()&&(u=o.loop?0:qe()-1,r=!0),r&&!o.loop||(vt+=s,ht-=s,a=!0));var p,d=ft.x*ht,h=Math.abs(d-ue.x);return a||d>ue.x==e.lastFlickSpeed.x>0?(p=Math.abs(e.lastFlickSpeed.x)>0?h/Math.abs(e.lastFlickSpeed.x):333,p=Math.min(p,400),p=Math.max(p,250)):p=333,re===u&&(a=!1),at=!0,It("mainScrollAnimStart"),Yt("mainScroll",ue.x,d,p,i.easing.cubic.out,Lt,function(){Qt(),at=!1,re=-1,(a||re!==u)&&n.updateCurrItem(),It("mainScrollAnimComplete")}),a&&n.updateCurrItem(!0),a},Re=function(t){return 1/X*t*g},ze=function(){var t=v,e=Mt(),a=$t();v<e?t=e:v>a&&(t=a);var s,o=ot;return nt&&!B&&!rt&&v<e?(n.close(),!0):(nt&&(s=function(t){Tt((1-o)*t+o)}),n.zoomTo(t,0,200,i.easing.cubic.out,s),!0)};xt("Gestures",{publicMethods:{initGestures:function(){var t=function(t,e,a,s,i){k=t+e,I=t+a,S=t+s,T=i?t+i:""};(P=j.pointerEvent)&&j.touch&&(j.touch=!1),P?navigator.pointerEnabled?t("pointer","down","move","up","cancel"):t("MSPointer","Down","Move","Up","Cancel"):j.touch?(t("touch","start","move","end","cancel"),E=!0):t("mouse","down","move","up"),h=I+" "+S+" "+T,m=k,P&&!E&&(E=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),n.likelyTouchDevice=E,f[k]=Te,f[I]=De,f[S]=Ee,T&&(f[T]=f[S]),j.touch&&(m+=" mousedown",h+=" mousemove mouseup",f.mousedown=f[k],f.mousemove=f[I],f.mouseup=f[S]),E||(o.allowPanToNext=!1)}}});var Oe,je,Fe,Me,$e,qe,Be=function(e,a,s,r){var l;Oe&&clearTimeout(Oe),Me=!0,Fe=!0,e.initialLayout?(l=e.initialLayout,e.initialLayout=null):l=o.getThumbBoundsFn&&o.getThumbBoundsFn(u);var p,d,h=s?o.hideAnimationDuration:o.showAnimationDuration,m=function(){Ht("initialZoom"),s?(n.template.removeAttribute("style"),n.bg.removeAttribute("style")):(Tt(1),a&&(a.style.display="block"),i.addClass(t,"pswp--animated-in"),It("initialZoom"+(s?"OutEnd":"InEnd"))),r&&r(),Me=!1};if(!h||!l||void 0===l.x)return It("initialZoom"+(s?"Out":"In")),v=e.initialZoomLevel,Rt(pt,e.initialPosition),Pt(),t.style.opacity=s?0:1,Tt(1),void(h?setTimeout(function(){m()},h):m());p=c,d=!n.currItem.src||n.currItem.loadError||o.showHideOpacity,e.miniImg&&(e.miniImg.style.webkitBackfaceVisibility="hidden"),s||(v=l.w/e.w,pt.x=l.x,pt.y=l.y-R,n[d?"template":"bg"].style.opacity=.001,Pt()),Zt("initialZoom"),s&&!p&&i.removeClass(t,"pswp--animated-in"),d&&(s?i[(p?"remove":"add")+"Class"](t,"pswp--animate_opacity"):setTimeout(function(){i.addClass(t,"pswp--animate_opacity")},30)),Oe=setTimeout(function(){if(It("initialZoom"+(s?"Out":"In")),s){var a=l.w/e.w,n={x:pt.x,y:pt.y},o=v,r=ot,c=function(e){1===e?(v=a,pt.x=l.x,pt.y=l.y-O):(v=(a-o)*e+o,pt.x=(l.x-n.x)*e+n.x,pt.y=(l.y-O-n.y)*e+n.y),Pt(),d?t.style.opacity=1-e:Tt(r-e*r)};p?Yt("initialZoom",0,1,h,i.easing.cubic.out,c,m):(c(1),Oe=setTimeout(m,h+20))}else v=e.initialZoomLevel,Rt(pt,e.initialPosition),Pt(),Tt(1),d?t.style.opacity=1:Tt(1),Oe=setTimeout(m,h+20)},s?25:90)},Ue={},We=[],Ve={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return je.length}},Ge=function(t,e,a){if(t.src&&!t.loadError){var s=!a;if(s&&(t.vGap||(t.vGap={top:0,bottom:0}),It("parseVerticalMargin",t)),Ue.x=e.x,Ue.y=e.y-t.vGap.top-t.vGap.bottom,s){var i=Ue.x/t.w,n=Ue.y/t.h;t.fitRatio=i<n?i:n;var r=o.scaleMode;"orig"===r?a=1:"fit"===r&&(a=t.fitRatio),a>1&&(a=1),t.initialZoomLevel=a,t.bounds||(t.bounds={center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}})}if(!a)return;return function(t,e,a){var s=t.bounds;s.center.x=Math.round((Ue.x-e)/2),s.center.y=Math.round((Ue.y-a)/2)+t.vGap.top,s.max.x=e>Ue.x?Math.round(Ue.x-e):s.center.x,s.max.y=a>Ue.y?Math.round(Ue.y-a)+t.vGap.top:s.center.y,s.min.x=e>Ue.x?0:s.center.x,s.min.y=a>Ue.y?t.vGap.top:s.center.y}(t,t.w*a,t.h*a),s&&a===t.initialZoomLevel&&(t.initialPosition=t.bounds.center),t.bounds}return t.w=t.h=0,t.initialZoomLevel=t.fitRatio=1,t.bounds={center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}},t.initialPosition=t.bounds.center,t.bounds},He=function(t,e,a,s,i,o){e.loadError||s&&(e.imageAppended=!0,Ye(e,s,e===n.currItem&&_t),a.appendChild(s),o&&setTimeout(function(){e&&e.loaded&&e.placeholder&&(e.placeholder.style.display="none",e.placeholder=null)},500))},Ze=function(t){t.loading=!0,t.loaded=!1;var e=t.img=i.createEl("pswp__img","img"),a=function(){t.loading=!1,t.loaded=!0,t.loadComplete?t.loadComplete(t):t.img=null,e.onload=e.onerror=null,e=null};return e.onload=a,e.onerror=function(){t.loadError=!0,a()},e.src=t.src,e},Qe=function(t,e){if(t.src&&t.loadError&&t.container)return e&&(t.container.innerHTML=""),t.container.innerHTML=o.errorMsg.replace("%url%",t.src),!0},Ye=function(t,e,a){if(t.src){e||(e=t.container.lastChild);var s=a?t.w:Math.round(t.w*t.fitRatio),i=a?t.h:Math.round(t.h*t.fitRatio);t.placeholder&&!t.loaded&&(t.placeholder.style.width=s+"px",t.placeholder.style.height=i+"px"),e.style.width=s+"px",e.style.height=i+"px"}},Ke=function(){if(We.length){for(var t,e=0;e<We.length;e++)(t=We[e]).holder.index===t.index&&He(t.index,t.item,t.baseDiv,t.img,0,t.clearPlaceholder);We=[]}};xt("Controller",{publicMethods:{lazyLoadItem:function(t){t=yt(t);var e=$e(t);e&&(!e.loaded&&!e.loading||x)&&(It("gettingData",t,e),e.src&&Ze(e))},initController:function(){i.extend(o,Ve,!0),n.items=je=a,$e=n.getItemAt,qe=o.getNumItemsFn,o.loop,qe()<3&&(o.loop=!1),kt("beforeChange",function(t){var e,a=o.preload,s=null===t||t>=0,i=Math.min(a[0],qe()),r=Math.min(a[1],qe());for(e=1;e<=(s?r:i);e++)n.lazyLoadItem(u+e);for(e=1;e<=(s?i:r);e++)n.lazyLoadItem(u-e)}),kt("initialLayout",function(){n.currItem.initialLayout=o.getThumbBoundsFn&&o.getThumbBoundsFn(u)}),kt("mainScrollAnimComplete",Ke),kt("initialZoomInEnd",Ke),kt("destroy",function(){for(var t,e=0;e<je.length;e++)(t=je[e]).container&&(t.container=null),t.placeholder&&(t.placeholder=null),t.img&&(t.img=null),t.preloader&&(t.preloader=null),t.loadError&&(t.loaded=t.loadError=!1);We=null})},getItemAt:function(t){return t>=0&&void 0!==je[t]&&je[t]},allowProgressiveImg:function(){return o.forceProgressiveLoading||!E||o.mouseUsed||screen.width>1200},setContent:function(t,e){o.loop&&(e=yt(e));var a=n.getItemAt(t.index);a&&(a.container=null);var s,l=n.getItemAt(e);if(l){It("gettingData",e,l),t.index=e,t.item=l;var c=l.container=i.createEl("pswp__zoom-wrap");if(!l.src&&l.html&&(l.html.tagName?c.appendChild(l.html):c.innerHTML=l.html),Qe(l),Ge(l,dt),!l.src||l.loadError||l.loaded)l.src&&!l.loadError&&((s=i.createEl("pswp__img","img")).style.opacity=1,s.src=l.src,Ye(l,s),He(0,l,c,s));else{if(l.loadComplete=function(a){if(r){if(t&&t.index===e){if(Qe(a,!0))return a.loadComplete=a.img=null,Ge(a,dt),Et(a),void(t.index===u&&n.updateCurrZoomItem());a.imageAppended?!Me&&a.placeholder&&(a.placeholder.style.display="none",a.placeholder=null):j.transform&&(at||Me)?We.push({item:a,baseDiv:c,img:a.img,index:e,holder:t,clearPlaceholder:!0}):He(0,a,c,a.img,0,!0)}a.loadComplete=null,a.img=null,It("imageLoadComplete",e,a)}},i.features.transform){var p="pswp__img pswp__img--placeholder";p+=l.msrc?"":" pswp__img--placeholder--blank";var d=i.createEl(p,l.msrc?"img":"");l.msrc&&(d.src=l.msrc),Ye(l,d),c.appendChild(d),l.placeholder=d}l.loading||Ze(l),n.allowProgressiveImg()&&(!Fe&&j.transform?We.push({item:l,baseDiv:c,img:l.img,index:e,holder:t}):He(0,l,c,l.img,0,!0))}Fe||e!==u?Et(l):(et=c.style,Be(l,s||l.img)),t.el.innerHTML="",t.el.appendChild(c)}else t.el.innerHTML=""},cleanSlide:function(t){t.img&&(t.img.onload=t.img.onerror=null),t.loaded=t.loading=t.img=t.imageAppended=!1}}});var Je,Xe,ta={},ea=function(t,e,a){var s=document.createEvent("CustomEvent"),i={origEvent:t,target:t.target,releasePoint:e,pointerType:a||"touch"};s.initCustomEvent("pswpTap",!0,!0,i),t.target.dispatchEvent(s)};xt("Tap",{publicMethods:{initTap:function(){kt("firstTouchStart",n.onTapStart),kt("touchRelease",n.onTapRelease),kt("destroy",function(){ta={},Je=null})},onTapStart:function(t){t.length>1&&(clearTimeout(Je),Je=null)},onTapRelease:function(t,e){var a,s;if(e&&!Z&&!G&&!Gt){var n=e;if(Je&&(clearTimeout(Je),Je=null,a=n,s=ta,Math.abs(a.x-s.x)<25&&Math.abs(a.y-s.y)<25))return void It("doubleTap",n);if("mouse"===e.type)return void ea(t,e,"mouse");if("BUTTON"===t.target.tagName.toUpperCase()||i.hasClass(t.target,"pswp__single-tap"))return void ea(t,e);Rt(ta,n),Je=setTimeout(function(){ea(t,e),Je=null},300)}}}}),xt("DesktopZoom",{publicMethods:{initDesktopZoom:function(){z||(E?kt("mouseUsed",function(){n.setupDesktopZoom()}):n.setupDesktopZoom(!0))},setupDesktopZoom:function(e){Xe={};var a="wheel mousewheel DOMMouseScroll";kt("bindEvents",function(){i.bind(t,a,n.handleMouseWheel)}),kt("unbindEvents",function(){Xe&&i.unbind(t,a,n.handleMouseWheel)}),n.mouseZoomedIn=!1;var s,o=function(){n.mouseZoomedIn&&(i.removeClass(t,"pswp--zoomed-in"),n.mouseZoomedIn=!1),v<1?i.addClass(t,"pswp--zoom-allowed"):i.removeClass(t,"pswp--zoom-allowed"),r()},r=function(){s&&(i.removeClass(t,"pswp--dragging"),s=!1)};kt("resize",o),kt("afterChange",o),kt("pointerDown",function(){n.mouseZoomedIn&&(s=!0,i.addClass(t,"pswp--dragging"))}),kt("pointerUp",r),e||o()},handleMouseWheel:function(t){if(v<=n.currItem.fitRatio)return o.modal&&(!o.closeOnScroll||Gt||V?t.preventDefault():D&&Math.abs(t.deltaY)>2&&(c=!0,n.close())),!0;if(t.stopPropagation(),Xe.x=0,"deltaX"in t)1===t.deltaMode?(Xe.x=18*t.deltaX,Xe.y=18*t.deltaY):(Xe.x=t.deltaX,Xe.y=t.deltaY);else if("wheelDelta"in t)t.wheelDeltaX&&(Xe.x=-.16*t.wheelDeltaX),t.wheelDeltaY?Xe.y=-.16*t.wheelDeltaY:Xe.y=-.16*t.wheelDelta;else{if(!("detail"in t))return;Xe.y=t.detail}Ft(v,!0);var e=pt.x-Xe.x,a=pt.y-Xe.y;(o.modal||e<=tt.min.x&&e>=tt.max.x&&a<=tt.min.y&&a>=tt.max.y)&&t.preventDefault(),n.panTo(e,a)},toggleDesktopZoom:function(e){e=e||{x:dt.x/2+mt.x,y:dt.y/2+mt.y};var a=o.getDoubleTapZoom(!0,n.currItem),s=v===a;n.mouseZoomedIn=!s,n.zoomTo(s?n.currItem.initialZoomLevel:a,e,333),i[(s?"remove":"add")+"Class"](t,"pswp--zoomed-in")}}});var aa,sa,ia,na,oa,ra,la,ca,ua,pa,da,ha,ma={history:!0,galleryUID:1},fa=function(){return da.hash.substring(1)},va=function(){aa&&clearTimeout(aa),ia&&clearTimeout(ia)},ga=function(){var t=fa(),e={};if(t.length<5)return e;var a,s=t.split("&");for(a=0;a<s.length;a++)if(s[a]){var i=s[a].split("=");i.length<2||(e[i[0]]=i[1])}if(o.galleryPIDs){var n=e.pid;for(e.pid=0,a=0;a<je.length;a++)if(je[a].pid===n){e.pid=a;break}}else e.pid=parseInt(e.pid,10)-1;return e.pid<0&&(e.pid=0),e},Ca=function(){if(ia&&clearTimeout(ia),Gt||V)ia=setTimeout(Ca,500);else{na?clearTimeout(sa):na=!0;var t=u+1,e=$e(u);e.hasOwnProperty("pid")&&(t=e.pid);var a=la+"&gid="+o.galleryUID+"&pid="+t;ca||-1===da.hash.indexOf(a)&&(pa=!0);var s=da.href.split("#")[0]+"#"+a;ha?"#"+a!==window.location.hash&&history[ca?"replaceState":"pushState"]("",document.title,s):ca?da.replace(s):da.hash=a,ca=!0,sa=setTimeout(function(){na=!1},60)}};xt("History",{publicMethods:{initHistory:function(){if(i.extend(o,ma,!0),o.history){da=window.location,pa=!1,ua=!1,ca=!1,la=fa(),ha="pushState"in history,la.indexOf("gid=")>-1&&(la=(la=la.split("&gid=")[0]).split("?gid=")[0]),kt("afterChange",n.updateURL),kt("unbindEvents",function(){i.unbind(window,"hashchange",n.onHashChange)});var t=function(){ra=!0,ua||(pa?history.back():la?da.hash=la:ha?history.pushState("",document.title,da.pathname+da.search):da.hash=""),va()};kt("unbindEvents",function(){c&&t()}),kt("destroy",function(){ra||t()}),kt("firstUpdate",function(){u=ga().pid});var e=la.indexOf("pid=");e>-1&&"&"===(la=la.substring(0,e)).slice(-1)&&(la=la.slice(0,-1)),setTimeout(function(){r&&i.bind(window,"hashchange",n.onHashChange)},40)}},onHashChange:function(){if(fa()===la)return ua=!0,void n.close();na||(oa=!0,n.goTo(ga().pid),oa=!1)},updateURL:function(){va(),oa||(ca?aa=setTimeout(Ca,800):Ca())}}}),i.extend(n,Kt)}})?s.call(e,a,e,t):s)||(t.exports=i)},E3OY:function(t,e){},Fv36:function(t,e){},GI30:function(t,e){},HQQP:function(t,e){},IEd0:function(t,e){},IcnI:function(t,e,a){"use strict";var s,i=a("xd7I"),n=a("48sp"),o=a("rVsN"),r=a.n(o),l=a("a3Yh"),c=a.n(l),u=a("OOvn"),p={state:{techLoginInfo:{},host:{img:"http://eximg.zbgedu.com",isDemo:!0},isEnv:!1,envType:0,userMenu:""},mutations:(s={},c()(s,"UPDATEDATA",function(t,e){for(var a in e)t[a]=e[a]}),c()(s,"updataLoginInfo",function(t,e){t.techLoginInfo=e.techLoginInfo}),c()(s,"updateEnvType",function(t,e){t.envType=e.envType}),c()(s,"updateUserMenu",function(t,e){t.userMenu=e.userMenu}),s),actions:{teacherLogin:function(t,e){var a=this,s=t.state,i=t.commit;return u.a.ajax("node-login",{username:e.username,password:e.password,type:e.type}).then(function(t){return i("updataLoginInfo",{techLoginInfo:t.data}),a.getTechMenu({state:s,commit:i},e),t})},getTechMenu:function(t,e){var a=this,s=(t.state,t.commit);return u.a.ajax("getTechMenu",{token:e}).then(function(t){if(t&&"success"==t.state){var e=t.data;return s("updateUserMenu",{userMenu:e}),t}a._vm.webApi.alert(t.msg||"系统异常，请稍后重试～")})},teacherLoginDev:function(t,e){t.state;var a=t.commit;return new r.a(function(t,s){u.a.ajax("login",{account:e.username,password:e.password,token:e.token}).then(function(s){if(s&&"success"==s.state){var i=s.data;u.a.ajax("member",{token:e.token}).then(function(e){i.eduUserId=e.data.eduUserId,a("updataLoginInfo",{techLoginInfo:i}),t(e)})}else t(s)})})}}},d={namespaced:!0,state:{classDetailInfo:{},selectClassInfo:{},selectExam:{}},mutations:{updateClassDetailInfo:function(t,e){t.classDetailInfo=e.classDetailInfo},updateSelectClassInfo:function(t,e){t.selectClassInfo=e.selectClassInfo},updateSelectExam:function(t,e){t.selectExam=e.selectExam}},actions:{getClassDetailInfo:function(t,e){t.state;var a=t.commit;return new r.a(function(t,s){u.a.ajax("queryCourseDetail",{token:e.token,courseArrangeId:e.courseArrangeId}).then(function(e){a("updateClassDetailInfo",{classDetailInfo:e.data}),t(e)})})}}};i.default.use(n.a);e.a=new n.a.Store({modules:{global:p,classManage:d,systemManage:{namespaced:!0,state:{addUserType:"",addRoleType:"",selectUser:"",selectRole:"",showUserBack:!1},mutations:{updateAddUserType:function(t,e){t.addUserType=e},updateShowUserBack:function(t,e){t.showUserBack=e},updateAddRoleType:function(t,e){t.addRoleType=e},updateSelectUser:function(t,e){t.selectUser=e},updateSelectRole:function(t,e){t.selectRole=e}}}}})},IzdF:function(t,e){},JGnb:function(t,e){},"K/nj":function(t,e){},K0Qi:function(t,e,a){"use strict";var s=a("4YfN"),i=a.n(s),n=a("48sp"),o=a("OOvn"),r={props:{picList:{type:Array,default:[]},isStartUpload:{type:Boolean,default:!1},isPublicStyle:{type:Boolean,default:!1},isPublicNum:{type:String,default:"1"}},data:function(){return{pictureList:[],isOpenUpload:!0,isPublicText:"公开",isPublic:1}},watch:{isStartUpload:function(t){t&&this.startUploadPic()},isPublicNum:function(t){this.isPublic=t,this.isNotePublic()}},created:function(){this.pictureList=this.picList},computed:i()({},Object(n.d)({host:function(t){return t.global.host},exchangeDetail:function(t){return t.exchange.exchangeDetail}}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}}),methods:{isNotePublic:function(){"1"==this.isPublic?(this.isPublicText="公开",this.$refs.isPublicDiv.classList.remove("select-btn-active")):(this.isPublicText="私人",this.$refs.isPublicDiv.classList.add("select-btn-active"))},handleCutStatus:function(t){var e=this.webApi.recursiveParentNode(t.target,"div");this.isPublic=e.classList.contains("select-btn-active")?"1":"0",this.isNotePublic()},handleOpenUpload:function(){this.isOpenUpload=!1,this.$emit("showInput",!0)},removeThisPic:function(t){this.pictureList=this.pictureList.filter(function(e,a){return a!=t.target.dataset.index})},handleCloseUpload:function(){this.isOpenUpload=!0,this.$emit("showInput",!1)},handleEmptyList:function(){this.pictureList=[]},changeLoadPicture:function(t){var e=this,a=this.$refs.iptFile.files,s=0,i=a.length,n=this.pictureList.length||0;if(a.length+n>5)this.webApi.alert("抱歉，图片最多只可上传5张！");else{var o=function(){var t=a[s],i=new FileReader;try{i.readAsDataURL(t)}catch(t){__DEV__&&console.log(t)}i.onload=function(a){e.pictureList.push({src:a.target.result,isFile:!0,file:t})}};for(s=0;s<i;s++)o()}},handleUploadBtn:function(){if(this.pictureList.length>=5)return this.webApi.alert("最多可上传5张图片"),!1;this.$refs.iptFile.click()},startUploadPic:function(){var t=0,e=this,a={isPublic:this.isPublic,state:"success",imgPath:[]};function s(a){e.callUpload(e.pictureList[t],i)}function i(i){a.imgPath.push(i),++t<e.pictureList.length?s(e.pictureList[t]):(a.imgPath.map(function(t){t&&"string"==typeof t||(a.state="error")}),a.imgPath=a.imgPath.join(","),e.$emit("load-upload",a))}this.picList&&0!=this.picList.length?s(this.pictureList[t]):this.$emit("load-upload",a)},callUpload:function(t,e){var a=this;t.isFile?this.webApi.pictureCompress(t.file,function(t,s){console.log(t,s);var i=new FormData;i.append("token",a.techLoginInfo.token),i.append("file",t,s),console.log(i),o.a.ajax("fileUpload",i).then(function(t){t&&"success"==t.state?e(t.data[0].storeFileUrl):e(null)})}):e(t.src.replace(this.host.img,""))}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"tmp-foot"},[a("i",{directives:[{name:"show",rawName:"v-show",value:t.isOpenUpload,expression:"isOpenUpload"}],staticClass:"iconfont icon-pic",on:{click:function(e){return e.stopPropagation(),t.handleOpenUpload(e)}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:0!=t.pictureList.length,expression:"pictureList.length != 0"}],staticClass:"msg-num"},[t._v(t._s(t.pictureList.length))])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpenUpload&&t.isPublicStyle,expression:"isOpenUpload && isPublicStyle"}],ref:"isPublicDiv",staticClass:"select-btn",on:{click:function(e){return e.stopPropagation(),t.handleCutStatus(e)}}},[a("span",[t._v(t._s(t.isPublicText))]),a("i")]),t._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:!t.isOpenUpload,expression:"!isOpenUpload"}],staticClass:"pic-upload"},[t._l(t.pictureList,function(e,s){return a("div",{staticClass:"list"},[a("img",{attrs:{src:e.src}}),t._v(" "),a("a",{staticClass:"iconfont icon-guanbi",attrs:{href:"javascript:;","data-index":s},on:{click:function(e){return e.stopPropagation(),t.removeThisPic(e)}}})])}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.pictureList.length<5,expression:"pictureList.length < 5"}],staticClass:"iconfont add",on:{click:function(e){return e.stopPropagation(),t.handleUploadBtn(e)}}},[a("span",[t._v("")])])],2),t._v(" "),a("input",{ref:"iptFile",staticClass:"ipt-file",attrs:{type:"file",multiple:"multiple",accept:"image/*"},on:{change:t.changeLoadPicture}})])},staticRenderFns:[]};var c=a("C7Lr")(r,l,!1,function(t){a("Oyuj")},"data-v-1cebb5de",null);e.a=c.exports},LZdR:function(t,e){},LudB:function(t,e){},LyZf:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("xd7I"),i=a("aA9S"),n=a.n(i),o=a("3cXf"),r=a.n(o),l=a("4YfN"),c=a.n(l),u=a("48sp"),p=a("OOvn"),d=a("4er+"),h={name:"loading",data:function(){return{envTypeArray:[{name:"正式",type:0},{name:"测试",type:1},{name:"开发",type:2},{name:"模拟",type:3}]}},created:function(){},computed:c()({},Object(u.d)({envType:function(t){return t.global.envType}})),methods:c()({},Object(u.c)(["UPDATEDATA"]),{changeEnvType:function(t){this.UPDATEDATA({envType:t}),this.cookie.set("envType",t,{path:""}),this.cookie.remove("techLoginInfo",{path:""}),window.location.reload()},envTypeClose:function(){this.UPDATEDATA({isEnv:!1})}})},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("aside",{staticClass:"env-type"},[a("div",{staticClass:"env-type-content"},[a("a",{staticClass:"env-type-close",attrs:{href:"javascript:;"},on:{click:t.envTypeClose}},[t._v("✖")]),t._v(" "),a("p",{staticClass:"env-type-title"},[t._v("请选择开发环境！")]),t._v(" "),a("ul",{staticClass:"env-type-ul"},t._l(t.envTypeArray,function(e,s){return a("li",{staticClass:"env-type-li"},[a("a",{staticClass:"env-type-a ",class:[e.type==t.envType?"active":""],attrs:{href:"javascript:;"},on:{click:function(e){return t.changeEnvType(s)}}},[t._v("\n\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t")])])}),0)])])},staticRenderFns:[]};var f=a("C7Lr")(h,m,!1,function(t){a("10cD")},"data-v-4f37d104",null).exports,v={name:"App",components:{layout:d.a,iEnv:f},data:function(){return{showLayout:!0}},computed:c()({},Object(u.d)({isEnv:function(t){return t.global.isEnv}})),created:function(){var t=this,e=this.webApi.getUrlKey("token")||this.cookie.get("techLoginInfo")?this.webApi.getUrlKey("token")||JSON.parse(this.cookie.get("techLoginInfo")).token:"";if(e){this.showLayout=!1;var a=null;p.a.ajax("member",{token:e}).then(function(s){s&&"success"==s.state?((a=s.data).token=e,a.memberId=s.data.id,t.cookie.set("techLoginInfo",a),t.updataLoginInfo({techLoginInfo:a}),t.getTechMenu(e).then(function(e){console.log(e),setTimeout(function(){t.showLayout=!0},100),t.$nextTick(function(){})})):"nologin"==s.msg||t.webApi.alert(s.msg)})}if(window.addEventListener("beforeunload",function(){sessionStorage.setItem("store",r()(t.$store.state))}),sessionStorage.getItem("store")&&this.$store.replaceState(n()({},this.$store.state,JSON.parse(sessionStorage.getItem("store")))),!window.location.href.match("teching.zbg")){var s=this.cookie.getJSON("envType")||0;this.UPDATEDATA({isEnv:!1,envType:s}),document.onkeyup=function(e){27==(e=e||window.event).keyCode&&t.UPDATEDATA({isEnv:!t.isEnv})}}},methods:c()({},Object(u.c)(["UPDATEDATA","updataLoginInfo"]),Object(u.b)(["getTechMenu"]))},g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app"},[this.showLayout?e("router-view"):this._e(),this._v(" "),this.isEnv?e("iEnv"):this._e()],1)},staticRenderFns:[]};var C=a("C7Lr")(v,g,!1,function(t){a("2AI7")},null,null).exports,b=a("YaEn"),_=a("IcnI"),x=a("zsLt"),y=a.n(x),w=a("kfHR"),k=a.n(w),I=a("NX26"),S=a.n(I),T=a("sqb0"),D=a.n(T);function P(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.localForage=t.prototype.localForage=S.a,t.cookie=t.prototype.cookie=D.a,t.log=t.prototype.log=function(t){},t.prototype.dedupe=function(t){return k()(new y.a(t))},t.prototype.canvasRound=function(t,e){var a=document.getElementById(t);if(a&&a.getContext){var s=a.width,i=a.height,n=a.getAttribute("data-progress");0==n&&(n=.01);var o=a.getContext("2d"),r=1,l=setInterval(function(){if(r>20)clearInterval(l);else{if(o.clearRect(0,0,s,i),e&&e.bg&&(o.beginPath(),o.arc(s/2,i/2,s/2-1,1.5*Math.PI,100,!1),e&&e.bgBorderWidth?o.lineWidth=e.bgBorderWidth:o.lineWidth=1,e&&e.bgBorderColor?o.strokeStyle=e.bgBorderColor:o.strokeStyle="#fff",o.stroke()),n){var t=Math.PI*(n/20*r/100*2-.5);o.beginPath(),o.arc(s/2,i/2,s/2-1,1.5*Math.PI,t,!1),e&&e.borderWidth?o.lineWidth=e.borderWidth:o.lineWidth=2,e&&e.borderColor?o.strokeStyle=e.borderColor:o.strokeStyle="#fff",o.stroke()}o.closePath()}r++},40)}},t.prototype.$myMethod=function(t){console.log("myMethod")}}S.a.config({driver:[S.a.LOCALSTORAGE,S.a.INDEXEDDB,S.a.WEBSQL],name:"elearning"});var E=P;"undefined"!=typeof window&&window.Vue&&window.Vue.use(P);var A,L=a("NxjZ"),N=a.n(L),R=a("0L5c"),z=a.n(R),O=(a("zlkP"),a("GI30"),a("BqyZ"),a("xst1")),j=a("urnN"),F=a.n(j);s.default.use(F.a),s.default.use(u.a),s.default.use(N.a),s.default.use(z.a),s.default.use(E),Array.prototype.remove=function(t){var e=this.indexOf(t);e>-1&&this.splice(e,1)},s.default.config.productionTip=!1,s.default.prototype.$api=s.default.prototype.webApi=O.a,s.default.prototype.ModalHelper={afterOpen:function(){A=document.scrollingElement.scrollTop,document.body.classList.add("dialog-open"),document.body.style.top=-A+"px"},beforeClose:function(){document.body.classList.remove("dialog-open"),document.scrollingElement.scrollTop=A}},new s.default({el:"#app",router:b.a,store:_.a,components:{App:C},template:"<App/>"})},NVBv:function(t,e){},OOvn:function(t,e,a){"use strict";var s=a("rVsN"),i=a.n(s),n=a("xd7I"),o=a("84iU"),r=a.n(o),l=a("CtzY"),c=a.n(l),u={url:"",baseURL:"http://tm.zbgedu.com/",method:"get",transformRequest:[function(t){return t.ELEARNING=function(t){var e,a,s,i,n,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="",l="",c="",u=0,p=function(t){var e,a,s,i;for(e="",s=t.length,a=0;a<s;a++)(i=t.charCodeAt(a))>=1&&i<=127?e+=t.charAt(a):i>2047?(e+=String.fromCharCode(224|i>>12&15),e+=String.fromCharCode(128|i>>6&63),e+=String.fromCharCode(128|i>>0&63)):(e+=String.fromCharCode(192|i>>6&31),e+=String.fromCharCode(128|i>>0&63));return e}(t);do{e=p.charCodeAt(u++),a=p.charCodeAt(u++),l=p.charCodeAt(u++),s=e>>2,i=(3&e)<<4|a>>4,n=(15&a)<<2|l>>6,c=63&l,isNaN(a)?n=c=64:isNaN(l)&&(c=64),r=r+o.charAt(s)+o.charAt(i)+o.charAt(n)+o.charAt(c),e=a=l="",s=i=n=c=""}while(u<p.length);return r}(t.ELEARNING),t=c.a.stringify(t)}],transformResponse:[function(t){return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{},paramsSerializer:function(t){return c.a.stringify(t)},data:{ELEARNING:"elearning"},timeout:0,withCredentials:!1,responseType:"json",maxContentLength:2e3,validateStatus:function(t){return t>=200&&t<300},maxRedirects:5};var p,d=a("a3Yh"),h=a.n(d),m="https://zbapi.zbgedu.com",f=(p={host:{action:"https://action.zbgedu.com",actionDemo:"https://actionDemo.zbgedu.com",actionDev:"https://actiondev.zbgedu.com",actionMock:"http://localhost:3080",api:"https://api.zbgedu.com",apiDemo:"https://apiDemo.zbgedu.com",apiDev:"https://apiDev.zbgedu.com",apiNew:"https://zbapi.zbgedu.com",apiNewDemo:"https://apiDemo.zbgedu.com",static:"https://exstatic.zbgedu.com",img:"https://exstatic.zbgedu.com",QRCode:"https://exstatic.zbgedu.com",demoQRCode:"http://192.168.10.201:9994",imgAddress:"https://exstatic.zbgedu.com",infoAddress:"https://www.zbgedu.com/",IPLocation:"https://www.zbgedu.com/api/v2/"},nodePrefix:"/api/userAction/scene/mobileIndex",notFindUrl:"/help",examples:{name:"接口示例",apiType:"node",isPrefix:!0,path:"/help",type:"GET",isMock:!1,mock:"/mock/node-help.json",isQuery:!1,queryData:{help:"help"}},"node-login":{name:"登录",apiType:"node",isPrefix:!0,path:"/api/userAction/scene/mobileIndex/login",type:"POST",isMock:!1,mock:"/mock/node-login.json",isQuery:!1,queryData:{type:"pcWeb",username:"zpk",password:"123456"}},actionTaskProgress:{name:"保存任务进度",apiType:"node",isPrefix:!1,path:"/api/userAction/course/taskProgress/v1.0/",type:"GET",isMock:!1,mock:"/mock/taskProgress.json",isQuery:!1,queryData:{token:"2e9e8aa0-6048-4e0b-ac88-b46b3e0261c6",memberId:"8a22ecb553a0b1320153a7251a1e149f",courseId:"8a22ecb55678b61b0156b1b9e20702b0,ff8080814f0b1b74014f158ab55a0e33"}},bbslist:{isPrefix:!0,path:"/api/studytools/bbslist/v1.0",type:"GET",isMock:!1,mock:"/mock/bbslist.json",isQuery:!1},bbsdetail:{path:"/api/studytools/bbsdetail/v1.0",mock:"/mock/bbsdetail.json"},bbsreply:{path:"/api/studytools/bbsreply/v1.0",mock:"/mock/bbsreply.json",type:"POST"},bbs_del:{path:"/api/studytools/bbs_del/v1.0",type:"POST",mock:"/mock/bbs_del.json"},token:{path:"/api/zbids/app/gettoken/v1.0/",mock:"/mock/token.json",data:{appType:"pc",appId:"pcWeb",appKey:"e877000be408a6cb0428e0f584456e03"}},login:{path:"/api/zbids/member/login/v1.0",mock:"/mock/login.json",type:"POST"},logout:{path:"/api/zbids/member/loginout/v1.0",mock:"/mock/logout.json"},member:{path:"/api/zbids/member/getmemberinfo",mock:"/mock/getmemberinfo.json"},updateStatus:{path:"/api/study/message/updateStatus/v1.0",mock:"/mock/updateStatus.json"},courseDetail:{name:"查询课程下的树形",path:"/api/teachsource/course/courseDetail/data",urlDemo:"/api/teachsource/course/courseDetail/data"},gettoken:{name:"获取token",isPrefix:!0,path:"/api/zbids/app/gettoken/v1.0/",type:"GET",isMock:!1,isQuery:!1,queryData:{appType:"pc",appId:"pcWeb",appKey:"e877000be408a6cb0428e0f584456e03"}}},h()(p,"login",{name:"登录",path:"/api/zbids/member/login/v1.0",type:"POST",defaultData:{account:"zpk",password:"123456",token:this.token}}),h()(p,"logout",{name:"登出",path:"/api/zbids/member/loginout/v1.0"}),h()(p,"updateStatus",{name:"更新消息状态",path:"/api/study/message/updateStatus/v1.0",defaultData:{token:this.token,messageId:"messageId",isall:"0"}}),h()(p,"member",{name:"用户详细信息",path:"/api/zbids/member/getmemberinfo"}),h()(p,"getKnowledgePoint",{name:"获取知识点",apiType:"php",isPrefix:!0,path:"/api/userAction/php/examen/getKnowledgeCache",type:"GET"}),h()(p,"addExamen",{name:"新建试卷",apiType:"php",isPrefix:!0,path:"/api/userAction/php/examen/addExamen",type:"POST"}),h()(p,"getExerciseList",{name:"获取试题列表",apiType:"php",isPrefix:!0,path:"/api/userAction/php/examen/getExerciseList",type:"GET"}),h()(p,"getExamenData",{name:"获取试卷列表",apiType:"php",isPrefix:!0,path:"/api/userAction/php/examen/getExamenData",type:"GET"}),h()(p,"getDictData",{name:"获取难度",apiType:"php",isPrefix:!0,path:"/api/userAction/php/examen/getDictData",type:"GET"}),h()(p,"addExercise",{name:"添加试题",apiType:"php",isPrefix:!0,path:"/api/userAction/php/examen/addExercise",type:"POST"}),h()(p,"getExamenInfoData",{name:"获取试卷基本信息",apiType:"php",isPrefix:!0,path:"/api/userAction/php/examen/getExamenInfoData",type:"GET"}),h()(p,"getExamenExerciseData",{name:"获取试卷下试题的详情",apiType:"php",isPrefix:!0,path:"/api/userAction/php/examen/getExamenExerciseData",type:"GET"}),h()(p,"delExamenExercise",{name:"删除试卷下的试题",apiType:"php",isPrefix:!0,path:"/api/userAction/php/examen/delExamenExercise",type:"GET"}),h()(p,"sortUpDown",{name:"试卷详情页面中试题上移下移",apiType:"php",isPrefix:!0,path:"/api/userAction/php/examen/sortUpDown",type:"GET"}),h()(p,"editExamen",{name:"编辑试卷",apiType:"php",isPrefix:!0,path:"/api/userAction/php/examen/editExamen",type:"POST"}),h()(p,"editExamenState",{name:"新建试卷修改状态",apiType:"php",isPrefix:!0,path:"/api/userAction/php/examen/editExamenState",type:"POST"}),h()(p,"delExamen",{name:"删除试卷列表中的试卷",apiType:"php",isPrefix:!0,path:"/api/userAction/php/examen/delExamen",type:"GET"}),h()(p,"editScore",{name:"修改试卷中试题的分数",apiType:"php",isPrefix:!0,path:"/api/userAction/php/examen/editScore",type:"GET"}),h()(p,"editSection",{name:"修改试卷中试题的类别",apiType:"php",isPrefix:!0,path:"/api/userAction/php/examen/editExamenExerciseType",type:"POST"}),h()(p,"getUserExamAllRecord",{name:"获取班级某些试卷的所有学员的情况",isPrefix:!0,path:"/api/userAction/php/examen/getUserExamAllRecord",type:"GET",isMock:!1,isQuery:!1,queryData:{classId:"classId",examId:"examId"}}),h()(p,"getClassTasksProgress",{name:"获取班级某任务或多个任务学员的每个人的进度",isPrefix:!0,apiType:"node",path:"/api/userAction/class/getTasksProgress/v1.0",type:"GET",isMock:!1,isQuery:!1,queryData:{token:"token",classId:"classId",taskId:"taskId"}}),h()(p,"getUserExerciseAllRecord",{name:"获取班级某任务或多个任务学员的每个人的进度",isPrefix:!0,path:"/api/userAction/php/examen/getUserExerciseAllRecord",isMock:!1,isQuery:!1,queryData:{classId:"classId",examId:"examId"}}),h()(p,"getUserOneExamAllRecord",{name:"获取单个学员获取单张卷子所有批次情况",isPrefix:!0,path:"/api/userAction/php/examen/getUserOneExamAllRecord",type:"GET",isMock:!1,isQuery:!1,queryData:{memberId:"memberId",classId:"classId",examId:"examId"}}),h()(p,"fileUpload",{name:"上传图片",hostNameDemo:"https://api.zbgedu.com",path:"/api/base/file/upload",type:"POST"}),h()(p,"insertMessage",{name:"推送消息",isPrefix:!0,path:"/api/study/message/insertMessage/v1.0",type:"POST"}),h()(p,"bbsClassNoSolve",{name:"未解决统计按照班级",isPrefix:!0,path:"/api/studytools/bbsClassNoSolve/v1.0",type:"GET"}),h()(p,"getdegree",{name:"查看班级本周计划内包含的试卷的不懂错题",isPrefix:!0,path:"/api/userAction/study/member/getdegree"}),h()(p,"examReport",{name:"测评报告",apiType:"node",isPrefix:!0,path:"/api/userAction/scene/mobileIndex/examReport",isMock:!1,mock:"/mock/examReport.json",queryData:{knowledgePointId:"dd68b8cb-9c9c-4da4-9d24-7cbc92006d41",memberId:"ff8080815133db0d0151375bfdf30c0d",examenNum:0}}),h()(p,"getListPaper",{name:"获取任务下试卷的列表",isPrefix:!0,path:"/api/userAction/php/examen/getTaskExamen",type:"GET",isMock:!1,isQuery:!1}),h()(p,"getExamenData",{name:"获取符合条件的试卷列表",isPrefix:!0,path:"/api/userAction/php/examen/getExamenData",type:"GET",isMock:!1,isQuery:!1}),h()(p,"addTaskExamen",{name:"添加试卷任务",isPrefix:!0,path:"/api/userAction/php/examen/addTaskExamen",type:"POST",isMock:!1,isQuery:!1}),h()(p,"delTaskExamen",{name:"删除任务下的试卷",isPrefix:!0,path:"/api/userAction/php/examen/delTaskExamen"}),h()(p,"getClassExam",{name:"获取班级下所有的作业",isPrefix:!0,path:"/api/userAction/php/examen/getClassExam"}),h()(p,"exerciseIdList",{apiType:"node",name:"获取当前班级下的试卷列表",isPrefix:!0,path:"/api/userAction/scene/mobileIndex/course/exerciseIdList"}),h()(p,"queryCourseArray",{name:"获取教师课程列表接口",type:"GET",isPrefix:!0,path:"/api/edu/course/queryCourseArray"}),h()(p,"queryCourseDetail",{name:"获取课程详情信息接口",type:"GET",isPrefix:!0,path:"/api/edu/course/queryCourseArrayDetail"}),h()(p,"queryCourseArrayDetailList",{name:"获取上课课表列表",type:"GET",isPrefix:!0,path:"/api/edu/course/findCourseArrayDetailList"}),h()(p,"getTeacherKnowledge",{name:"获取教师负责的前两级，项目科目",type:"GET",isPrefix:!0,path:"/api/userAction/php/bbs/getTeacherKnowledge"}),h()(p,"getCourseTeacheringType",{name:"获取课程类型",type:"GET",isPrefix:!0,path:"/api/userAction/php/bbs/getCourseTeacheringType"}),h()(p,"addBbs",{name:"帖子加入知识库",type:"GET",isPrefix:!0,path:"/api/userAction/php/knowledge/addBbs"}),h()(p,"queryClassExamen",{name:"查询课表下的作业列表",type:"POST",isPrefix:!0,path:"/api/study/userAction/class/queryClassExamen"}),h()(p,"deleteClassExamen",{name:"删除课表下的作业",type:"POST",isPrefix:!0,path:"/api/study/userAction/class/deleteClassExamen"}),h()(p,"classBbsCount",{name:"获取班级下答疑统计",type:"GET",isPrefix:!0,path:"/api/userAction/php/bbs/classBbsCount"}),h()(p,"saveClassExamen",{name:"在课表上添加作业",type:"POST",isPrefix:!0,path:"/api/study/userAction/class/saveClassExamen"}),h()(p,"searchCourseAppraisalTaskBySubjectId",{name:"获取标准模版课作业",type:"GET",isPrefix:!0,path:"/api/teachsource/course/searchCourseAppraisalTaskBySubjectId"}),h()(p,"searchCourseTaskBySubjectId",{name:"获取标准模版课作业",type:"POST",isPrefix:!0,path:"/api/study/userAction/course/searchFacecourseTaskList"}),h()(p,"getTestpaperAnalysis",{name:"卷面分析",type:"POST",isPrefix:!0,path:"/api/edu/userAction/examen/getUserExerciseAllRecord"}),h()(p,"getExamStatistics",{name:"测评统计",type:"POST",isPrefix:!0,path:"/api/edu/userAction/examen/getTestCount"}),h()(p,"getTestCountCondition",{name:"根据条件查询测评统计",type:"POST",isPrefix:!0,path:"/api/edu/userAction/examen/getTestCountCondition"}),h()(p,"exportTestCount",{name:"测评统计-列表导出",type:"GET",isPrefix:!0,path:"/api/edu/userAction/examen/exportTestCount"}),h()(p,"exportUserExerciseAllRecord",{name:"卷面分析-列表导出",type:"GET",isPrefix:!0,path:"/api/edu/userAction/examen/exportUserExerciseAllRecord"}),h()(p,"editPost",{name:"答疑列表回复编辑",type:"POST",isPrefix:!0,path:"/api/userAction/php/bbs/editPost"}),h()(p,"teacherBbsCount",{name:"获取老师答疑统计接口(教辅上线版)",type:"GET",isPrefix:!0,path:"/api/userAction/php/bbs/teacherBbsCount"}),h()(p,"findClassList",{name:"优播课学习行为(班级列表)",type:"POST",isPrefix:!0,path:"/api/edu/userAction/classes/yb/findClassList"}),h()(p,"getClassStatistics",{name:"优播课学习行为(班级列表)(新版)",type:"POST",isPrefix:!0,path:"/api/study/userAction/teacherClass/getClassStatistics"}),h()(p,"setThreadReplyState",{name:"设置答疑处理中状态",type:"GET",isPrefix:!0,path:"/api/userAction/php/bbs/setThreadReplyState"}),h()(p,"bbsStatisticalData",{name:"教师答疑统计",type:"GET",isPrefix:!0,path:"/api/userAction/php/bbs/bbsStatisticalData"}),h()(p,"bbsStatisticalInfo",{name:"教师答疑明细",type:"GET",isPrefix:!0,path:"/api/userAction/php/bbs/bbsStatisticalInfo"}),h()(p,"getKnowledgeCategory",{name:"证书科目树",type:"GET",isPrefix:!0,path:"/api/userAction/php/bbs/getKnowledgeCategory"}),h()(p,"findStudentLearnProgress",{name:"获取优播课学员明细",type:"POST",isPrefix:!0,path:"/api/edu/userAction/classes/yb/findStudentLearnProgress"}),h()(p,"getClassPlanDetail",{name:"获取课程学习计划",type:"GET",isPrefix:!0,path:"/api/userAction/php/class/getClassPlanDetail"}),h()(p,"findClassProgressCount",{name:"优播课-学员统计-班级汇总",type:"POST",isPrefix:!0,host:"https://zbapi.zbgedu.com",path:"/api/study/userAction/statistics/flipped/selectStudyTaskProgressByClassId"}),h()(p,"findItemCategoryList",{name:"优播课-查询证书科目",type:"POST",isPrefix:!0,path:"/api/edu/userAction/classes/yb/findItemCategoryList"}),h()(p,"getTaskInfo",{name:"获取任务详情",host:"https://zbapi.zbgedu.com",hostNameDemo:"https://apidemo.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/courseResourse/getTaskInfoByIdToTech"}),h()(p,"getTaskInfoById",{name:"获取任务详情",host:"https://zbapi.zbgedu.com",hostNameDemo:"https://apidemo.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/courseResourse/getTaskInfoByIdToTech"}),h()(p,"queryMemberByNameAndNickname",{name:"模糊查询学员姓名或昵称",host:"https://zbapi.zbgedu.com",hostNameDemo:"https://apidemo.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/member/queryMemberByNameAndNickname"}),h()(p,"getClassCourseDetail",{name:"获取课程详情",apiType:"node",type:"GET",isPrefix:!0,path:"/api/userAction/scene/mobileIndex/iClassCourseDetail"}),h()(p,"getYouboClasses",{name:"获取班主任优播课列表",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/teacherClass/getClasses"}),h()(p,"getClassInfo",{name:"获取优播课班级信息",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/teacherClass/getClassInfo"}),h()(p,"queryStudyPlanExtendSelect",{name:"获取周计划下拉框",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/teacherClass/queryStudyPlanExtendSelect"}),h()(p,"queryStudyPlanMonth",{name:"直播统计月份列表",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/teacherClass/queryStudyPlanMonth"}),h()(p,"openCourseTrailer",{name:"获取优播课直播预告",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/teacherClass/openCourseTrailer"}),h()(p,"getYouboCourseProgress",{name:"获取优播课课程进度",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/teacherClass/studyPlanProgress"}),h()(p,"queryStudyPlanDetail",{name:"获取优播课任务列表",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/teacherClass/queryStudyPlanDetail"}),h()(p,"getQuestionById",{name:"通过试题id获取试题信息",host:"https://apitiku.zbgedu.com",hostNameDemo:"http://apitikudemo.zbgedu.com",type:"GET",isPrefix:!0,path:"/manager/question/v1/getQuestionById"}),h()(p,"getExamenTaskList",{name:"优播课测评统计",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/statistics/selectStatisticsCoursePaperList"}),h()(p,"getStatisticsCoursePaperByChart",{name:"优播课测评统计折线图数据",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/statistics/selectStatisticsCoursePaperByChart"}),h()(p,"getStatisticsCoursePaperByLeader",{name:"优播课测评统计排行榜",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/statistics/selectStatisticsCoursePaperByLeader"}),h()(p,"getStatisticsMemberPaperPage",{name:"优播课测评统计完成情况列表",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/statistics/selectStatisticsMemberPaperPage"}),h()(p,"getStatisticsQuestionPageByTask",{name:"优播课测评统计卷面分析列表",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/statistics/selectStatisticsQuestionPageByTask"}),h()(p,"getMemberTaskList",{name:"优播课任务统计列表",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/statistics/task/selectMemberTaskList"}),h()(p,"getMemberTaskStatistics",{name:"优播课任务统计列表柱形图",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/statistics/task/selectMemberTaskStatistics"}),h()(p,"getTaskInfoAndProgress",{name:"查询任务详情（包含题库数据）",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/userAction/scene/java/task/getTaskDetailById"}),h()(p,"getOpenCourseList",{name:"优播客直播统计列表",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/statistics/openCourse/selectList"}),h()(p,"exportStatisticsCoursePaper",{name:"优播客作业统计首页列表导出",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/statistics/exportStatisticsCoursePaper"}),h()(p,"selectLiveListChart",{name:"优播课直播统计柱状图",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/statistics/openCourse/selectListChart"}),h()(p,"getStudentTestPaperAnswerHistory",{name:"优播课直播统计柱状图",host:"https://apitiku.zbgedu.com",hostNameDemo:"https://apitikudemo.zbgedu.com",type:"POST",isPrefix:!0,path:"/manager/managerInterface/v1/studentTestPaperAnswerHistory"}),h()(p,"getStatisticsFaceCoursePaperList",{name:"面授课作业统计-首页列表",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/statistics/faceCoursePaper/selectStatisticsFaceCoursePaperList"}),h()(p,"exportStatisticsFaceCoursePaper",{name:"面授课作业统计-首页列表-导出",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/statistics/faceCoursePaper/exportStatisticsFaceCoursePaper"}),h()(p,"getStatisticsFaceMemberPaperPage",{name:"面授课作业统计-完成情况列表",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/statistics/faceCoursePaper/selectStatisticsFaceMemberPaperPage"}),h()(p,"exportStatisticsFaceMemberPaper",{name:"面授课作业统计-完成情况列表导出",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/statistics/faceCoursePaper/exportStatisticsFaceMemberPaper"}),h()(p,"getStatisticsFaceCoursePaperByChart",{name:"面授课作业统计-首页图表",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/statistics/faceCoursePaper/selectStatisticsFaceCoursePaperByChart"}),h()(p,"getFaceStatisticsCoursePaperByLeader",{name:"面授课作业统计-排行榜",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/statistics/faceCoursePaper/selectFaceStatisticsCoursePaperByLeader"}),h()(p,"getFaceStatisticsQuestionPageByTask",{name:"面授课作业统计-卷面分析列表",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/statistics/faceCoursePaper/selectFaceStatisticsQuestionPageByTask"}),h()(p,"exportStatisticsFaceQuestion",{name:"面授课作业统计-卷面分析列表-导出",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/statistics/faceCoursePaper/exportStatisticsFaceQuestion"}),h()(p,"getCourseInfoPagerByParam",{name:"获取课程二维码列表",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/tech/manager/course/searchCourseInfoPagerByParam"}),h()(p,"updateQrcodeByCourseId",{name:"课程二维码上传",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/courseTechExtend/updateQrcodeByCourseId"}),h()(p,"deleteQrcodeByCourseId",{name:"课程二维码删除",host:"https://zbapi.zbgedu.com",type:"POST",isPrefix:!0,path:"/api/study/userAction/courseTechExtend/deleteQrcodeByCourseId"}),h()(p,"queryExamenInfo",{host:"https://zbapi.zbgedu.com",path:"/api/userAction/scene/mobileIndex/queryExamenInfo",type:"GET",isPrefix:!0}),h()(p,"getAllItemCategoryList",{name:"获取项目科目列表",host:"https://zbapi.zbgedu.com",path:"/api/tech/manager/itemCategory/selectAllItemCategoryList",type:"POST",isPrefix:!0}),h()(p,"getSelectList",{name:"获取角色下拉列表",host:"https://zbapi.zbgedu.com",path:"/api/tech/manager/techRole/listAll",type:"POST",isPrefix:!0}),h()(p,"getRoleList",{name:"获取角色列表",host:"https://zbapi.zbgedu.com",path:"/api/tech/manager/techRole/list",type:"POST",isPrefix:!0}),h()(p,"getUserList",{name:"获取用户列表",host:"https://zbapi.zbgedu.com",path:"/api/tech/manager/techMember/list",type:"POST",isPrefix:!0}),h()(p,"getUserByNumber",{name:"工号查询用户",host:"https://zbapi.zbgedu.com",path:"/api/tech/manager/techMember/getUserByNumber",type:"POST",isPrefix:!0}),h()(p,"getRoleDetail",{name:"角色详情",host:"https://zbapi.zbgedu.com",path:"/api/tech/manager/techRole/info",type:"POST",isPrefix:!0}),h()(p,"getMenuList",{name:"查询一二级菜单列表",host:"https://zbapi.zbgedu.com",path:"/api/tech/manager/techFun/listSecondLevel",type:"POST",isPrefix:!0}),h()(p,"saveTechRole",{name:"编辑/新增角色",host:"https://zbapi.zbgedu.com",path:"/api/tech/manager/techRole/save",type:"POST",isPrefix:!0}),h()(p,"saveTechUser",{name:"编辑/新增用户",host:"https://zbapi.zbgedu.com",path:"/api/tech/manager/techMember/save",type:"POST",isPrefix:!0}),h()(p,"getEditUserInfo",{name:"查询编辑用户详情",host:"https://zbapi.zbgedu.com",path:"/api/tech/manager/techMember/info",type:"POST",isPrefix:!0}),h()(p,"getUserInfo",{name:"查询用户详情",host:"https://zbapi.zbgedu.com",path:"/api/tech/manager/techMember/detail",type:"POST",isPrefix:!0}),h()(p,"deleteUser",{name:"删除用户",host:"https://zbapi.zbgedu.com",path:"/api/tech/manager/techMember/delete",type:"POST",isPrefix:!0}),h()(p,"deleteRole",{name:"删除角色",host:"https://zbapi.zbgedu.com",path:"/api/tech/manager/techRole/delete",type:"POST",isPrefix:!0}),h()(p,"getTechMenu",{name:"获取导航菜单",host:"https://zbapi.zbgedu.com",path:"/api/tech/manager/teacherScope/menu",type:"POST",isPrefix:!0}),h()(p,"getCourseArranges",{name:"获取教师权限内的面授班列表",host:"https://zbapi.zbgedu.com",path:"/api/study/userAction/teacherFacecourse/getCourseArranges",type:"POST",isPrefix:!0}),h()(p,"getItemCategory",{name:"教师项目科目权限范围",host:"https://zbapi.zbgedu.com",path:"/api/tech/manager/teacherScope/itemCategory",type:"POST",isPrefix:!0}),h()(p,"selectStatisticsOnlineCoursePage",{name:"网课学生学情查询列表",host:m,path:"/api/study/userAction/statistics/onlineCourse/selectStatisticsOnlineCoursePage",type:"POST",isPrefix:!0}),h()(p,"exportStatisticsOnlineCourse",{name:"网课学生学情列表导出",host:m,path:"/api/study/userAction/statistics/onlineCourse/exportStatisticsOnlineCourse",type:"POST",isPrefix:!0}),h()(p,"getTechBranch",{name:"通用-教师分部权限范围",host:m,path:"/api/tech/manager/eduOrganization/findAll",type:"POST",isPrefix:!0}),h()(p,"getLoginToken",{name:"模拟登陆",host:m,path:"/api/zbids/tech/login",type:"POST",isPrefix:!0}),h()(p,"getTeachingType",{name:"获取教师授课方式",host:m,path:"/api/tech/manager/teacherScope/teachingType",type:"POST",isPrefix:!0}),p),v=a("YaEn");r.a.defaults.timeout=0,r.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",r.a.interceptors.response.use(function(t){return t&&"success"==t.data.state?i.a.resolve(t.data):i.a.reject(t.data)},function(t){return i.a.reject(t)});var g=["gettoken","login","updateStatus"],C={ajax:function(t,e){var a={server:t,data:e},s=C.getAjaxData(a);return C.request({servername:t,requeseData:s,done:function(e){return C.requestComplete(t,e),C.requestSuccess(t,e)},fail:function(e){return C.requestComplete(t,e),C.requestFail(t,e)}})},getAjaxData:function(t){var e=f[t.server];return{url:t.url?t.url:this.getRequestUrl(e),type:t.type?t.type:this.getRequestType(e.type),data:t.data?t.data:this.getRequestData(e.data)}},getRequestUrl:function(t){var e="",a="",s="?verTT="+(new Date).getTime(),i=!1,o=parseInt(n.default.cookie.get("envType"));switch(o){case 1:t.isMock?i=!0:t.hostNameDemo?(e=f.host.actionDemo,a=t.hostNameDemo):(e=f.host.actionDemo,a=f.host.apiDemo);break;case 2:t.isMock?i=!0:(e=f.host.actionDev,a=f.host.apiDev);break;case 3:i=!0;break;default:e=f.host.action,a=f.host.api}return i?t.mock:(1!=o&&2!=o&&3!=o?t.host?t.host:"node"==t.apiType?e:a:t.hostNameDemo?t.hostNameDemo:"node"==t.apiType?e:a)+(t.path?t.path:f.notFindUrl)+s},getRequestType:function(t){return t||"GET"},getRequestData:function(t){return t||{}},request:function(t){var e=t.servername,a=t.requeseData;return localStorage.getItem("elearning/"+e)?n.default.localForage.getItem(e):"POST"===a.type||"post"===a.type?r.a.post(a.url,a.data,u).then(function(e){return t.done(e)}).catch(function(e){return t.fail(e)}):"GET"===a.type?r.a.get(a.url,{params:a.data},u).then(function(e){return t.done(e)}).catch(function(e){return t.fail(e)}):void 0},requestSuccess:function(t,e){var a=!0;return g.forEach(function(e){e==t&&(a=!1)}),a&&-1==t.indexOf("bbsdetail")&&t.indexOf("bbslist"),e},requestFail:function(t,e){return("nologin"==e.state&&"333"==e.code||"nologin"==e.msg)&&(n.default.cookie.remove("techLoginInfo"),"login"!==v.a.currentRoute.name&&(console.log(v.a.currentRoute),window.location.href=window.location.origin+"/#/login?fromPath="+v.a.currentRoute.path)),e},requestComplete:function(t,e){t.complete&&t.complete(e)},ajaxStatic:function(t){var e=f[t.server];$.ajax({url:e.staticData,type:"get",success:function(e){t.done(e)},error:function(e){t.fail(e)}})}};e.a={ajax:C.ajax}},Oyuj:function(t,e){},PLJL:function(t,e){},"Pm+h":function(t,e){},RQQo:function(t,e){},TNe5:function(t,e){},UgW6:function(t,e){},VEuD:function(t,e){},VMJf:function(t,e){},VZCH:function(t,e){},Wd7m:function(t,e){},X3tG:function(t,e){},YaEn:function(t,e,a){"use strict";var s=a("xd7I"),i=a("7LQH"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"exchangeManage"},[e("router-view")],1)},staticRenderFns:[]};var o=a("C7Lr")({name:"exchange"},n,!1,function(t){a("nIbs")},"data-v-12c73fa4",null).exports,r=a("3cXf"),l=a.n(r),c=a("4YfN"),u=a.n(c),p=a("Vxj9"),d=a.n(p),h={props:{id:{type:String,required:!1,default:"scroll"},isRefresh:{type:Boolean,required:!1,default:!1},toNum:{type:Number,default:0},toTop:{type:Boolean,default:!0}},data:function(){return{iScroll:""}},created:function(){},mounted:function(){this.iScroll=this.IScroll(document.getElementById(this.id),this.$refs[this.id]),document.getElementById(this.id).querySelector(".iScrollVerticalScrollbar").style.zIndex=0},watch:{isRefresh:function(){var t=this;this.$nextTick(function(){t.refresh()})},toNum:function(){var t=this;this.$nextTick(function(){t.toScroll()})}},methods:{IScroll:function(t,e){var a=new d.a(t,{probeType:3,mouseWheel:!0,startX:0,startY:0,preventDefault:!1,fadeScrollbars:!0,scrollbars:!0,interactiveScrollbars:!0,shrinkScrollbars:"scale"}),s=!0;return a.on("scroll",function(){var t=e.children;if(Math.abs(this.y)){if(s){var a=document.createElement("span");a.setAttribute("class","wrapper-shadow"),e.insertBefore(a,t[0]),s=!1}}else s||(e.removeChild(e.children[0]),s=!0)}),a},refresh:function(){this.toTop&&this.iScroll.scrollTo(0,0),this.iScroll.refresh()},toScroll:function(){console.log(this.toNum),this.iScroll.scrollTo(0,-this.toNum)}}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:this.id,staticClass:"scroll",attrs:{id:this.id}},[e("div",{ref:"wrapper",staticClass:"wrapper",attrs:{id:"wrapper"}},[this._t("default")],2)])},staticRenderFns:[]};var f=a("C7Lr")(h,m,!1,function(t){a("7Wtw")},null,null).exports,v=a("GLy/"),g=a.n(v),C={name:"loading",props:{size:{type:String,default:"middle"},loadingType:{type:String,required:!1,default:"loading"}},data:function(){return{}}},b={render:function(){var t=this.$createElement,e=this._self._c||t;return e("aside",{staticClass:"loader-main"},["loading"==this.loadingType?e("div",{staticClass:"loader-content"},[e("div",{staticClass:"loader-box"},[e("div",{staticClass:"loader",class:"loader-"+this.size},[this._v("loading...")])])]):e("span",{staticClass:"text-loader-content"},[e("span",{staticClass:"text-loader"})])])},staticRenderFns:[]};var _=a("C7Lr")(C,b,!1,function(t){a("zaQ3")},null,null).exports,x=a("48sp"),y=a("OOvn"),w=a("g1sz"),k=a.n(w),I={name:"youboke",components:{iScroll:f,iLoading:_},computed:{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}},data:function(){return{listenCourseName:"",classList:"",state:"4",pageSize:5,pageNo:1,totalCount:0,openCourseList:"",scrollRefresh:!1,scrollRefresh1:!1,courseProgress:"",selectClass:"",currentClassIndex:"",aqData:"",aqXseris:[0,0,0,0],classType:!0}},mounted:function(){this.getClasses()},methods:{handleCurrentChange:function(t){this.pageNo=t,this.getClasses()},handleSizeChange:function(t){this.pageSize=t,this.pageNo=1,this.getClasses()},search:function(){this.getClasses()},changeClass:function(t){this.selectClass=t,this.getOpenCourseList(),this.getCourseProgress(),this.getAqData()},enterClass:function(t){sessionStorage.setItem("store",l()(this.$store.state)),window.open("#/youboCenter/youboCenterIndex/"+t.classId,"_blank")},getClasses:function(){var t=this;y.a.ajax("getYouboClasses",{token:this.techLoginInfo.token,state:this.state,name:this.listenCourseName,pageIndex:this.pageNo,pageSize:this.pageSize}).then(function(e){e&&"success"==e.state?(t.classList=e.data.result||[],t.totalCount=e.data.total,4==t.state&&t.classList.length>0&&(t.selectClass=t.classList[0],t.getOpenCourseList(),t.getCourseProgress(),setTimeout(function(){t.getAqData()},100)),t.$nextTick(function(){t.scrollRefresh=!t.scrollRefresh})):(t.classList=[],t.webApi.alert(e.msg||"服务器异常，请重试~"))})},getOpenCourseList:function(){var t=this;console.log(this.selectClass),y.a.ajax("openCourseTrailer",{token:this.techLoginInfo.token,courseId:this.selectClass.courseId}).then(function(e){e&&"success"==e.state&&(t.openCourseList=e.data),t.$nextTick(function(){t.scrollRefresh1=!t.scrollRefresh1})})},getCourseProgress:function(){var t=this;y.a.ajax("getYouboCourseProgress",{token:this.techLoginInfo.token,classId:this.selectClass.classId}).then(function(e){e&&"success"==e.state&&(t.courseProgress=e.data),t.$nextTick(function(){t.scrollRefresh1=!t.scrollRefresh1})})},changeClassType:function(){var t=this;if(this.classType=!this.classType,this.classList="",this.classType)this.state=1,this.getClasses();else{this.state=0,this.getClasses();for(var e=function(e){setTimeout(function(){t.drawPie(e)},100)},a=0;a<3;a++)e(a)}},getAqData:function(){var t=this;y.a.ajax("classBbsCount",{token:this.techLoginInfo.token,classId:this.selectClass.classId}).then(function(e){e&&"success"==e.state&&(t.aqData=e.data,t.aqXseris[0]=t.aqData.resolved,t.aqXseris[1]=t.aqData.unanswered,t.aqXseris[2]=t.aqData.replied,t.aqXseris[3]=t.aqData.asked,t.drawAq()),t.$nextTick(function(){t.scrollRefresh1=!t.scrollRefresh1})})},drawAq:function(){this.aqEchart=k.a.init(document.getElementById("aqEchart")),this.aqEchart.setOption({color:["#000","#000","#ff3366","#334455"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",top:"20",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:["已解决","未回复","已回复","追问"],axisTick:{show:!1},axisLabel:{color:"#666"},axisLine:{lineStyle:{color:"#ddd"}},splitLine:!1}],yAxis:[{type:"value",axisTick:{show:!1},axisLabel:{show:!1},splitLine:!1,axisLine:{lineStyle:{color:"#ddd"}}}],series:[{type:"bar",barWidth:"24px",data:this.aqXseris,itemStyle:{normal:{color:function(t){return["#EE4477","#F28943","#FF585B","#79C269"][t.dataIndex]}}},label:{normal:{show:!0,position:"top"}}}]}),this.aqEchart.on("click",this.eConsole)},eConsole:function(t){console.log(t),window.open("/#/youboCenter/aqStatistics/"+this.selectClass.classId+"?type="+t.dataIndex,"_blank")},drawPie:function(t){k.a.init(document.getElementById("radderContent"+t)).setOption({tooltip:{},legend:{data:["实际开销（Actual Spending）"]},radar:{name:{textStyle:{color:"#666",fontSize:"12px",borderRadius:3,padding:[3,5]}},indicator:[{name:"已解决",max:3e4},{name:"已回复",max:38e3},{name:"未回复",max:52e3},{name:"学员追问",max:25e3}],radius:40},series:[{type:"radar",data:[{value:[28e3,31e3,42e3,21e3],name:"实际开销（Actual Spending）"}]}]})}}},S={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"youbo-wrap"},[s("div",{staticClass:"youbo-head"},[s("div",{staticClass:"text-wrap"},[t._v("我的班级")]),t._v(" "),s("div",{staticClass:"search-wrap"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.listenCourseName,expression:"listenCourseName"}],staticClass:"ac-search",attrs:{type:"text",placeholder:"输入您要寻找的班级名称"},domProps:{value:t.listenCourseName},on:{input:function(e){e.target.composing||(t.listenCourseName=e.target.value)}}}),t._v(" "),s("a",{staticClass:"ac-search-a",attrs:{href:"javascript:;"},on:{click:t.search}},[s("i",{staticClass:"iconfont icon-sousuo"})])])]),t._v(" "),s("div",{staticClass:"youbo-content"},[t.classType?s("div",{staticClass:"going-class-wrap"},[s("div",{staticClass:"going-left"},[t.classList?s("div",{staticStyle:{height:"100%",overflow:"hidden"}},[t.classList.length>0?s("div",{staticStyle:{height:"100%"}},[s("iScroll",{attrs:{id:"youboContentScroll1","is-refresh":t.scrollRefresh}},[s("ul",{staticClass:"wrap-ul"},t._l(t.classList,function(e,a){return s("li",{key:a,class:["wrap-li","wrap-li"+a,e.classId==t.selectClass.classId?"active":""],on:{click:function(a){return t.changeClass(e)}}},[s("div",{staticClass:"li-left"},[s("div",{staticClass:"li-left-l"},[s("div",{staticClass:"img-wrap"},[s("img",{staticClass:"class-img",attrs:{src:e.bigCoverPath?"http://eximg.zbgedu.com"+e.bigCoverPath:"/static/flippedClassBg.png",alt:""}}),t._v(" "),s("div",{staticClass:"shadow-wrap"},[s("span",{staticClass:"ml10"},[t._v("开课中")])])]),t._v(" "),s("div",{staticClass:"text-wrap"},[s("p",{staticClass:"className"},[t._v(t._s(e.className))]),t._v(" "),s("p",{staticClass:"timeline"},[t._v("班级有效期："+t._s(t.webApi.formatDate(e.startTime,"YMD"))+"至"+t._s(t.webApi.formatDate(e.endTime,"YMD")))]),t._v(" "),s("p",{staticClass:"student-num"},[s("i"),t._v("学员数量："+t._s(e.studentNum)+"人")]),t._v(" "),s("p",{staticClass:"item-cretifacate-wrap"},[t._v("项目："+t._s(e.categoryName)+" "),s("span",{staticClass:"ml20"},[t._v("   科目："+t._s(e.subjectName))])])])]),t._v(" "),s("div",{staticClass:"li-left-r"},[s("div",{staticClass:"li-left-r-t"},["-1"!=e.openCourseState?s("div",["1"==e.openCourseState?s("span",[s("i",{staticClass:"isLive-icon"}),t._v("正在直播")]):s("span",[t._v("下次直播时间："+t._s(t.webApi.formatDate(e.openCourseStartTime,"ALL")))])]):t._e()]),t._v(" "),s("div",{staticClass:"li-left-r-b"},[s("div",{staticClass:"enter-btn",on:{click:function(a){return t.enterClass(e)}}},[t._v("进入班级")])])])])])}),0),t._v(" "),s("div",{staticClass:"pagination-wrap"},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total",pageSize:t.pageSize,total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])],1):s("div",[t._m(0)])]):s("div",[s("iLoading")],1)]),t._v(" "),t.classList&&t.classList.length>0?s("div",{staticClass:"going-right"},[s("iScroll",{attrs:{id:"youboContentRightScroll","is-refresh":t.scrollRefresh1}},[s("div",{staticClass:"going-right-content"},[s("div",{staticClass:"go-r-title"},[s("p",{staticClass:"go-r-t-p usual-title"},[t._v(t._s(t.selectClass.courseName))])]),t._v(" "),t.openCourseList&&t.openCourseList.length>0?s("div",{staticClass:"live-wrap"},[s("div",{staticClass:"live-wrap-title usual-title"},[t._v("直播预告")]),t._v(" "),s("div",{staticClass:"live-list-wrap"},[s("ul",{staticClass:"live-ul"},t._l(t.openCourseList,function(e,a){return s("li",{staticClass:"live-li"},[s("div",{staticClass:"live-li-left"},[s("div",{staticClass:"live-img-wrap"},[s("img",{staticStyle:{width:"110px",height:"64px"},attrs:{src:"http://eximg.zbgedu.com"+e.liveCover,alt:"直播背景图"}})]),t._v(" "),"1"==e.isNow?s("div",{staticClass:"live-status"},[t._v("直播中")]):t._e()]),t._v(" "),s("div",{staticClass:"live-li-right"},[s("div",{staticClass:"l-l-r-top"},[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"l-l-r-bottom"},[t._v("开始时间："+t._s(t.webApi.formatDate(e.startTime,"ALL")))])])])}),0)])]):t._e(),t._v(" "),s("div",{staticClass:"aq-wrap"},[s("div",{staticClass:"aq-title usual-title"},[t._v("\n                答疑报告\n                ")]),t._v(" "),s("div",{staticClass:"aq-content"},[s("div",{staticClass:"aq-c-data"},[t._v("问题总数："+t._s(t.aqData.all_count))]),t._v(" "),s("div",{staticClass:"aq-echart",attrs:{id:"aqEchart"}})])]),t._v(" "),t.courseProgress?s("div",{staticClass:"class-progress-wrap"},[s("div",{staticClass:"c-p-w-title usual-title"},[t._v("课程进度")]),t._v(" "),s("div",{staticClass:"c-p-w-current"},[t._v("本周：第"+t._s(t.courseProgress.currWeekIndex)+"周")]),t._v(" "),s("div",{staticClass:"circle-wrap"},[s("el-progress",{attrs:{type:"circle",percentage:Number(Math.round(t.courseProgress.currWeekIndex/t.courseProgress.weekNum*100*100)/100),color:"#6A76D9","show-text":!1,width:90,"stroke-width":10}})],1),t._v(" "),s("div",{staticClass:"text-wrap"},[s("div",{staticClass:"text1"},[t._v(t._s(Number(Math.round(t.courseProgress.currWeekIndex/t.courseProgress.weekNum*100*100)/100))+"%")]),t._v(" "),s("div",{staticClass:"text2"},[t._v("进度")]),t._v(" "),s("div",{staticClass:"text3"},[t._v(t._s(t.courseProgress.weekNum)+"周")])])]):t._e()])])],1):t._e()]):s("div",{staticClass:"gone-class-wrap"},[s("iScroll",{attrs:{id:"youboContentScroll","is-refresh":t.scrollRefresh}},[t.classList&&t.classList.length>0?s("ul",{staticClass:"wrap-ul"},t._l(t.classList,function(e,a){return s("li",{key:a,staticClass:"wrap-li"},[s("div",{staticClass:"li-left"},[s("div",{staticClass:"li-left-l"},[s("div",{staticClass:"img-wrap"},[s("img",{staticClass:"class-img",attrs:{src:"/static/classImg.png",alt:""}}),t._v(" "),s("div",{staticClass:"shadow-wrap"},[s("span",{staticClass:"ml10"},[t._v("开课中")])])]),t._v(" "),s("div",{staticClass:"text-wrap"},[s("p",{staticClass:"className"},[t._v("ACCA 优播课程")]),t._v(" "),s("p",{staticClass:"timeline"},[t._v("班级有效期："+t._s(t.webApi.formatDate(e.startTime,"ALL")))]),t._v(" "),s("p",{staticClass:"student-num"},[s("i"),t._v("学员数量：20人")]),t._v(" "),s("p",{staticClass:"item-cretifacate-wrap"},[t._v("项目：ACCA "),s("span",{staticClass:"ml20"},[t._v("科目：AAA")])])])]),t._v(" "),s("div",{staticClass:"li-left-r"},[s("div",{staticClass:"li-left-r-t"}),t._v(" "),s("div",{staticClass:"li-left-r-b"},[s("div",{staticClass:"enter-btn"},[t._v("进入班级")])]),t._v(" "),s("div",{staticClass:"line-border"})])]),t._v(" "),s("div",{staticClass:"li-right"},[s("div",{staticClass:"li-right-l"},[s("div",{staticClass:"title"},[s("i",{staticClass:"title-icon"}),t._v("汇总报告\n                ")]),t._v(" "),s("div",{staticClass:"num-content"},[s("p",{staticClass:"usual-p"},[t._v("问题总数：203")]),t._v(" "),s("p",{staticClass:"usual-p"},[t._v("未回复：203")]),t._v(" "),s("p",{staticClass:"usual-p"},[t._v("学员追问：203")]),t._v(" "),s("p",{staticClass:"usual-p"},[t._v("预警问题：203")])])]),t._v(" "),s("div",{staticClass:"li-right-r"},[s("div",{staticClass:"radderContent",attrs:{id:"radderContent"+a}})])])])}),0):s("div",[s("div",{staticClass:"has-no-data"},[s("div",{staticClass:"img-wrap"},[s("img",{staticClass:"img-no",attrs:{src:a("a4/I"),alt:"暂无内容"}})]),t._v(" "),s("p",{staticClass:"no-text"},[t._v("暂无内容")])])])])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"has-no-data"},[e("div",{staticClass:"img-wrap"},[e("img",{staticClass:"img-no",attrs:{src:a("a4/I"),alt:"暂无内容"}})]),this._v(" "),e("p",{staticClass:"no-text"},[this._v("暂无内容")])])}]};var T=a("C7Lr")(I,S,!1,function(t){a("e6XZ")},null,null).exports,D={name:"classManage",components:{iScroll:f,svgBar:g.a,iLoading:_,youboComponent:T},mounted:function(){this.getCourseList()},computed:u()({},Object(x.d)({selectClassInfo:function(t){return t.classManage.selectClassInfo},classDetailInfo:function(t){return t.classManage.classDetailInfo},host:function(t){return t.global.host}}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))},options:function(){return{radius:70,circleWidth:24,maxValue:100,pathColors:["#eeeeee","#6973DC"],textColor:"#999999",text:function(t){return"<div style=display:block;width:100%;position:absolute;top:50px;font-size:18px;color:#333333;line-height:20px;height:20px;>"+t+"%<br/><span style=font-size:14px;line-height:20px; >课程完成度</span></div>"}}}}),data:function(){return{scrollRefresh:!1,scrollRefresh1:!1,styleType:1,classType:this.$route.params.type,classList:[],aqXseris:[],curClassInfo:"",selectClassIndex:0,showContentRight:!0,bbsCountInfo:"",courseplanName:"",courseName:"",currentPage:1,totalRecord:0}},watch:{$route:{handler:function(){2==this.$route.params.type&&this.getCourseList()},deep:!0},classType:function(t){1==t&&this.getCourseList()},selectClassInfo:function(){var t=this;this.bbsCountInfo="",this.showContentRight=!this.showContentRight,this.updateClassDetailInfo({classDetailInfo:""}),this.getClassDetailInfo({token:this.techLoginInfo.token,courseArrangeId:this.selectClassInfo.courseArrangeId}).then(function(e){t.showContentRight=!t.showContentRight,t.getBbsCount(e.data.courseArrangeId)})}},methods:u()({},Object(x.c)("classManage",["updateSelectClassInfo","updateClassDetailInfo"]),Object(x.b)("classManage",["getClassDetailInfo"]),{search:function(){this.$refs.searches.value;this.getCourseList()},toAQDetail:function(){window.open("#/classCenter/dataStatisticsAq/"+this.classDetailInfo.courseArrangeId,"_blank")},toAQ:function(t){window.open("/#/classCenter/dataStatisticsAq/"+this.classDetailInfo.courseArrangeId+"?type="+t,"_blank")},drawAq:function(){this.aqEchart=k.a.init(document.getElementById("aqEchart")),this.aqEchart.setOption({color:["#000","#000","#ff3366","#334455"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",top:"20",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:["已解决","未回复","已回复","追问"],axisTick:{show:!1},axisLabel:{color:"#666"},axisLine:{lineStyle:{color:"#ddd"}},splitLine:!1}],yAxis:[{type:"value",axisTick:{show:!1},axisLabel:{show:!1},splitLine:!1,axisLine:{lineStyle:{color:"#ddd"}}}],series:[{type:"bar",barWidth:"24px",data:this.aqXseris,itemStyle:{normal:{color:function(t){return["#EE4477","#F28943","#FF585B","#79C269"][t.dataIndex]}}},label:{normal:{show:!0,position:"top"}}}]}),this.aqEchart.on("click",this.eConsole)},eConsole:function(t){console.log(t),window.open("/#/classCenter/dataStatisticsAq/"+this.classDetailInfo.courseArrangeId+"?type="+t.dataIndex,"_blank")},getCourseList:function(){var t=this;y.a.ajax("getCourseArranges",{token:this.techLoginInfo.token,teacherId:this.techLoginInfo.eduUserId,courseplanName:this.courseName,finishStatus:0,pageSize:8,currentPage:this.currentPage}).then(function(e){e&&"success"==e.state?null!=e.data?(t.selectClassIndex=0,t.classList=e.data.result,t.totalRecord=e.data.total,t.$nextTick(function(){var t=this;setTimeout(function(){t.scrollRefresh=!t.scrollRefresh},100)}),e.data.result.length>0&&t.updateSelectClassInfo({selectClassInfo:e.data.result[0]})):t.classList=[]:t.webApi.alert("服务器异常，请重试～")})},listenCourseName:function(){this.webApi.trim(this.$refs.searches.value)||(this.currentPage=1,this.getCourseList())},getBbsCount:function(t){var e=this;y.a.ajax("classBbsCount",{token:this.techLoginInfo.token,classId:t}).then(function(t){t&&"success"==t.state?(e.bbsCountInfo=t.data,e.aqXseris[0]=e.bbsCountInfo.resolved,e.aqXseris[1]=e.bbsCountInfo.unanswered,e.aqXseris[2]=e.bbsCountInfo.replied,e.aqXseris[3]=e.bbsCountInfo.asked,e.drawAq()):e.webApi.alert(t.msg)})},sizeChange:function(t){this.currentPage=t,this.getCourseList()},prevSize:function(){this.currentPage--,this.getCourseList()},nextSize:function(){this.currentPage++,this.getCourseList()},changeStyleType:function(){this.scrollRefresh=!this.scrollRefresh},enterClass:function(t,e){this.changeClassDetail(t,e),sessionStorage.setItem("store",l()(this.$store.state)),window.open("#/classCenter/classCenterIndex/"+t.courseArrangeId,"_blank")},changeClassDetail:function(t,e){this.selectClassIndex!=e&&(this.updateSelectClassInfo({selectClassInfo:t}),this.selectClassIndex=e)}})},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"classManage-wrap"},[a("div",{staticClass:"content"},["2"==t.$route.params.type?a("div",{staticClass:"mianshou-content"},[a("div",{staticClass:"content-left"},[a("div",{staticClass:"left-head"},[a("div",{staticClass:"text-wrap"},[t._v("我的班级")]),t._v(" "),a("div",{staticClass:"search-wrap"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.courseName,expression:"courseName"}],ref:"searches",staticClass:"ac-search",attrs:{type:"text",placeholder:"输入您要寻找的班级名称"},domProps:{value:t.courseName},on:{input:[function(e){e.target.composing||(t.courseName=e.target.value)},t.listenCourseName]}}),t._v(" "),a("a",{staticClass:"ac-search-a",attrs:{href:"javascript:;"},on:{click:t.search}},[a("i",{staticClass:"iconfont icon-sousuo"})])]),t._v(" "),a("div",{staticClass:"changeStyle-wrap"},[a("el-radio-group",{attrs:{fill:"#eeeeee"},on:{change:t.changeStyleType},model:{value:t.styleType,callback:function(e){t.styleType=e},expression:"styleType"}},[a("el-radio-button",{attrs:{label:"1"}},[a("div",{staticClass:"div-b div-usual"})]),t._v(" "),a("el-radio-button",{attrs:{label:"2"}},[a("div",{staticClass:"div-a div-usual"})])],1)],1)]),t._v(" "),a("div",{staticClass:"left-content"},[t.classList&&t.classList.length>0?[a("iScroll",{attrs:{id:"leftContentScroll","is-refresh":t.scrollRefresh}},[a("ul",{staticClass:"ul-wrap",class:[1==t.styleType?"":"ul-wrap-vertical"]},t._l(t.classList,function(e,s){return a("li",{staticClass:"li-wrap",class:[s==t.selectClassIndex?"active":""],on:{click:function(a){return t.changeClassDetail(e,s)}}},[a("div",{staticClass:"li-left"},[a("div",{staticClass:"img-wrap"},[a("img",{staticClass:"img-c",attrs:{src:e.coverPath?t.host.img+e.coverPath:"/static/classImg.png",alt:e.courseplanName}})])]),t._v(" "),a("div",{staticClass:"li-right"},[a("p",{staticClass:"title-wrap"},[t._v(t._s(e.courseplanName))]),t._v(" "),a("p",{staticClass:"subject-name-wrap"},[t._v("项目-科目："+t._s(e.itemName)+"-"+t._s(e.courseCategoryName))]),t._v(" "),a("div",{staticClass:"a-wrap"},[a("a",{staticClass:"enterClass",attrs:{href:"javascript:;"},on:{click:function(a){return a.stopPropagation(),t.enterClass(e,s)}}},[t._v("进入班级")])]),t._v(" "),a("div",{staticClass:"endtime-wrap"},[a("p",{staticClass:"endtime-p"},[t._v("有效期："+t._s(t.webApi.formatDate(e.endDate/1e3,"YMD")))])])])])}),0),t._v(" "),t.totalRecord>8?a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",pageSize:8,total:t.totalRecord},on:{"current-change":t.sizeChange,"prev-click":t.prevSize,"next-click":t.nextSize}}):t._e()],1)]:[t._m(0)]],2)]),t._v(" "),a("transition",{attrs:{name:"flip",mode:"out-in"}},[t.showContentRight&&t.classList&&t.classList.length>0?a("div",{staticClass:"content-right"},[t.classDetailInfo?[a("div",{staticClass:"right-head"},[t._v(t._s(t.classDetailInfo.courseplanName))]),t._v(" "),a("div",{staticClass:"right-content"},[a("div",{staticClass:"c-wrap"},[a("div",{staticClass:"rencent-wrap"},[a("div",{staticClass:"title-wrap"},[a("p",{staticClass:"p-wrap"},[t._v("近期安排")])]),t._v(" "),a("div",{staticClass:"today-wrap"},[a("p",{staticClass:"today-p"},[t._v("今日面授课")]),t._v(" "),t.classDetailInfo.courseDateToday?[a("p",[t._v("日期："+t._s(t.classDetailInfo.courseDateToday)+"  上课时段："+t._s(t.classDetailInfo.coursePeriodToday))]),t._v(" "),a("p",[t._v("教学点："+t._s(t.classDetailInfo.universityName))])]:[a("div",{staticClass:"nodata"},[a("p",[t._v("该班级暂无课程")])])]],2),t._v(" "),a("div",{staticClass:"next-wrap"},[a("p",{staticClass:"next-p"},[t._v("下次面授课")]),t._v(" "),t.classDetailInfo.courseDateNext?[a("p",[t._v("日期："+t._s(t.classDetailInfo.courseDateNext)+"  上课时段："+t._s(t.classDetailInfo.coursePeriodNext))]),t._v(" "),a("p",[t._v("教学点："+t._s(t.classDetailInfo.universityName))])]:[a("div",{staticClass:"nodata"},[a("p",[t._v("该班级暂无课程")])])]],2)]),t._v(" "),a("div",{staticClass:"answer-report"},[a("div",{staticClass:"title-wrap"},[a("p",{staticClass:"p-wrap"},[t._v("答疑报告 ")])]),t._v(" "),a("p",{staticClass:"answer-number"},[t._v("问题数："+t._s(t.bbsCountInfo.all_count))]),t._v(" "),a("div",{staticClass:"aq-echart",attrs:{id:"aqEchart"}})]),t._v(" "),a("div",{staticClass:"courseComplete-wrap"},[a("div",{staticClass:"title-wrap"},[a("p",{staticClass:"p-wrap"},[t._v("授课进度")])]),t._v(" "),a("div",{staticClass:"courseCompletePie",attrs:{id:"courseCompletePie"}},[a("svgBar",{staticClass:"progressBar",attrs:{value:t.classDetailInfo.finishRate?t.classDetailInfo.finishRate:0,options:t.options}})],1)])])])]:[a("div",{staticStyle:{height:"100%"}},[a("iLoading")],1)]],2):t._e()])],1):t._e(),t._v(" "),"1"==t.$route.params.type?a("div",{staticClass:"youbo-big-wrap"},[a("youboComponent")],1):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"has-no-data"},[e("div",{staticClass:"img-wrap"},[e("img",{staticClass:"img-no",attrs:{src:a("a4/I"),alt:"暂无内容"}})]),this._v(" "),e("p",{staticClass:"no-text"},[this._v("暂无内容")])])}]};var E=a("C7Lr")(D,P,!1,function(t){a("fad9")},null,null).exports,A=a("hRKE"),L=a.n(A),N=a("4Xi4"),R=a.n(N),z={name:"videoSource",props:{videoParams:{type:Object}},components:{iScroll:f},data:function(){return{srcImg:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4",scrollRefresh:!1,isMuted:!0,chapterData:[],defaultProps:{children:"children",label:"chapterTitle"},ccid:"",prex:""}},computed:{defaultCheckedKeys:function(){var t=[];return t.push(this.videoParams.chapterId),t}},mounted:function(){this.getChapterData();var t=this.cookie.getJSON("envType")||0;this.prex=0==t?"https://elearning.zbgedu.com":"https://elearningdemo.zbgedu.com",console.log(this.videoParams),console.log(window.location.href.match("localhost"))},methods:{changeScroll:function(){var t=this;setTimeout(function(){t.scrollRefresh=!t.scrollRefresh},500)},close:function(){this.$emit("on-closeVideo")},getChapterData:function(){var t=this;y.a.ajax("courseDetail",{courseId:this.videoParams.courseId}).then(function(e){if(!e||"success"!=e.state)return t.webApi.alert("查询失败"),!1;t.chapterData=e.data[0].chapters,t.chapterData.forEach(function(e,a,s){e.chapterId==t.videoParams.chapterId&&e.tasks.forEach(function(e,a,s){e.taskId==t.videoParams.taskId&&("openCourse"==e.taskType?t.ccid=e.openCourseCcid:t.ccid=e.videoCcid)}),0!=e.children.length&&e.children.forEach(function(e,a,s){e.chapterId==t.videoParams.chapterId&&e.tasks.forEach(function(e,a,s){e.taskId==t.videoParams.taskId&&("openCourse"==e.taskType?t.ccid=e.openCourseCcid:t.ccid=e.videoCcid)}),0!=e.children.length&&e.children.forEach(function(e,a,s){e.chapterId==t.videoParams.chapterId&&e.tasks.forEach(function(e,a,s){e.taskId==t.videoParams.taskId&&("openCourse"==e.taskType?t.ccid=e.openCourseCcid:t.ccid=e.videoCcid)}),0!=e.children.length&&e.children.forEach(function(e,a,s){e.chapterId==t.videoParams.chapterId&&e.tasks.forEach(function(e,a,s){e.taskId==t.videoParams.taskId&&("openCourse"==e.taskType?t.ccid=e.openCourseCcid:t.ccid=e.videoCcid)})})})})}),t.scrollRefresh=!t.scrollRefresh}),console.log(this.videoParams)}}},O={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"videoSource-wrap"},[e("div",{staticClass:"videoSource-w"},[e("el-container",[e("el-header",{attrs:{height:"50px"}},[this._v("问题来源\n        "),e("i",{staticClass:"close-btn",on:{click:this.close}})]),this._v(" "),e("el-container",[e("el-main",[e("iframe",{attrs:{allowtransparency:"true",width:"100%",height:"100%",scrolling:"no",frameborder:"0",src:this.prex+"/player.html?ccid="+this.ccid+"&time="+this.videoParams.taskprogress}})])],1)],1)],1)])},staticRenderFns:[]};var j=a("C7Lr")(z,O,!1,function(t){a("UgW6")},null,null).exports,F={name:"videoPlayer.vue",props:["videoParams"],data:function(){return{src:"",envType:parseInt(this.cookie.get("envType"))}},mounted:function(){console.log(this.videoParams),this.getTaskInfo()},computed:{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}},methods:{getTaskInfo:function(){var t=this;y.a.ajax("getTaskInfo",{token:this.techLoginInfo.token,taskId:this.videoParams.taskId}).then(function(e){var a=e.data,s=("1"==t.envType?"https://videodemo.zbgedu.com":"https://video.zbgedu.com")+"/example?isShowConfig=false&id="+a.videoId+"&seek="+t.videoParams.taskprogress;t.src=s})}}},M={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"videoPlayer"},[e("iframe",{staticStyle:{border:"0",width:"100%",height:"100%"},attrs:{id:"iframe",name:"help",allowFullScreen:"true",allowTransparency:"true",scrolling:"no",frameBorder:"0",src:this.src}})])},staticRenderFns:[]};var $=a("C7Lr")(F,M,!1,function(t){a("NVBv")},null,null).exports,q={name:"examSource",components:{iScroll:f,iLoading:_},props:{examParams:{type:Object}},computed:u()({},Object(x.d)({envType:function(t){return t.global.envType}}),{defaultCheckedKeys:function(){var t=[];return t.push(this.examParams.chapterId),t},techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}}),data:function(){return{scrollRefresh:!1,chapterData:[],courseId:this.examParams.courseId,defaultProps:{children:"children",label:"chapterTitle"},exerciseId:this.examParams.taskId,examId:"",showIframe:!1,frameUrl:""}},mounted:function(){this.getFrameUrl()},methods:{close:function(){this.$emit("closeExam")},getFrameUrl:function(){var t=this,e=(new Date).getTime()+18e5,a=new Date(e),s=window.location.hostname;/\.zbgedu\.com/.test(s)&&(s="zbgedu.com"),document.cookie="zbgeduId="+this.techLoginInfo.token+";path=/;domain="+s+";expires="+a.toGMTString()+";source=source;";var i="tiku";"1"==this.envType&&(i="tikudemo");var n=this.examParams.exerciseVersionId||this.examParams.exerciseId||this.examParams.questionId||"";y.a.ajax("getQuestionById",{questionVersionId:n}).then(function(e){"success"==e.state?("1"==e.data.baseInfo.itemId?t.frameUrl="https://"+i+".zbgedu.com/questionTest?question=questionVersionInfo&itemId="+e.data.baseInfo.itemId+"&questionVersionId="+n+"&title="+t.examParams.sourcePath+"isParsing=1":t.frameUrl="https://"+i+".zbgedu.com/page/questionTest?question=questionVersionInfo&itemId="+e.data.baseInfo.itemId+"&questionVersionId="+n+"&title="+t.examParams.sourcePath+"isParsing=1",t.scrollRefresh=!t.scrollRefresh,setTimeout(function(){t.showIframe=!0},2e3)):t.$api.alert("服务器异常，请重试~")})},changeScroll:function(){var t=this;setTimeout(function(){t.scrollRefresh=!t.scrollRefresh},500)}}},B={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"examSource-wrap"},[a("div",{staticClass:"examSource-w"},[a("el-container",[a("el-header",{attrs:{height:"50px"}},[t._v("问题来源\n        "),a("i",{staticClass:"close-btn",on:{click:t.close}})]),t._v(" "),a("el-container",[a("el-main",[a("div",{staticClass:"model-wrap-fix"}),t._v(" "),a("iframe",{directives:[{name:"show",rawName:"v-show",value:t.showIframe,expression:"showIframe"}],staticStyle:{width:"1200px",height:"100%"},attrs:{src:t.frameUrl,frameborder:"0"}}),t._v(" "),t.showIframe?t._e():a("iLoading")],1)],1)],1)],1)])},staticRenderFns:[]};var U=a("C7Lr")(q,B,!1,function(t){a("LZdR")},null,null).exports,W=a("84iU"),V=a.n(W),G=a("Eq4a"),H=a.n(G),Z={name:"editorElem",data:function(){return{editor:null,editorContent:""}},props:["catchData","content"],watch:{},mounted:function(){var t=this;this.editor=new H.a(this.$refs.editorElem),this.editor.customConfig.onchange=function(e){t.editorContent=e,t.catchData(t.editorContent)},this.editor.customConfig.menus=["bold","fontSize","italic","underline","foreColor"],this.editor.create(),""!=this.content&&this.editor.txt.html(this.content)},methods:{clearContent:function(){this.editor.txt.clear()}}},Q={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"wangeditor"}},[e("div",{ref:"editorElem",staticStyle:{"text-align":"left"}})])},staticRenderFns:[]};var Y=a("C7Lr")(Z,Q,!1,function(t){a("reGN")},null,null).exports,K=a("E/Qh"),J=a.n(K),X=a("wq5a"),tt=a.n(X),et={props:{list:{type:Array,default:[]},currentIndex:{type:Number,default:0}},data:function(){return{}},created:function(){},mounted:function(){var t=this,e=document.querySelectorAll(".pswp")[0],a={captionEl:!1,fullscreenEl:!1,history:!1,shareEl:!1,tapToClose:!0,index:this.currentIndex},s=new J.a(e,tt.a,this.list,a);s.init(),s.listen("close",function(){t.$emit("closePic",!0)})},computed:{},watch:{},methods:{}},at={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pswp",attrs:{tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"pswp__bg"}),t._v(" "),a("div",{staticClass:"pswp__scroll-wrap"},[a("div",{staticClass:"pswp__container"},[a("div",{staticClass:"pswp__item"}),t._v(" "),a("div",{staticClass:"pswp__item"}),t._v(" "),a("div",{staticClass:"pswp__item"})]),t._v(" "),a("div",{staticClass:"pswp__ui pswp__ui--hidden"},[a("div",{staticClass:"pswp__top-bar"},[a("div",{staticClass:"pswp__counter"}),t._v(" "),a("button",{staticClass:"pswp__button pswp__button--close",attrs:{title:"Close (Esc)"}}),t._v(" "),a("button",{staticClass:"pswp__button pswp__button--share",attrs:{title:"Share"}}),t._v(" "),a("button",{staticClass:"pswp__button pswp__button--fs",attrs:{title:"Toggle fullscreen"}}),t._v(" "),a("button",{staticClass:"pswp__button pswp__button--zoom",attrs:{title:"Zoom in/out"}}),t._v(" "),a("div",{staticClass:"pswp__preloader"},[a("div",{staticClass:"pswp__preloader__icn"},[a("div",{staticClass:"pswp__preloader__cut"},[a("div",{staticClass:"pswp__preloader__donut"})])])])]),t._v(" "),a("div",{staticClass:"pswp__share-modal pswp__share-modal--hidden pswp__single-tap"},[a("div",{staticClass:"pswp__share-tooltip"})]),t._v(" "),a("button",{staticClass:"pswp__button pswp__button--arrow--left",attrs:{title:"Previous (arrow left)"}}),t._v(" "),a("button",{staticClass:"pswp__button pswp__button--arrow--right",attrs:{title:"Next (arrow right)"}}),t._v(" "),a("div",{staticClass:"pswp__caption"},[a("div",{staticClass:"pswp__caption__center"})])])])])}]};var st=a("C7Lr")(et,at,!1,function(t){a("IzdF")},"data-v-fa65e294",null).exports,it=a("K0Qi"),nt=a("cfMN"),ot={props:{exchangeData:{type:Object,default:function(){}},canClick:{type:Boolean,default:function(){return!0}}},components:{iLoading:_,iScroll:f,photoSwipe:st,uploadPicture:it.a,videoSource:j,slider:nt.slider,slideritem:nt.slideritem,editor:Y},data:function(){return{scrollRefresh:!1,showPic:!1,list:[],allPic:[],value1:4,isCommitting:!1,isPicSuccessNum:-1,allLoad:!1,currentIndex:0,showUploadImg:!1,isStartUpload:!1,picList:[],replyList1:[1,2,3],replyContent:"",contentValue:"",showReply:!1,getGradeTeacherInfo:"",gradeTeacherArr:"",data:{},fileList:[],imgPathArr:[],editContent:"",exchangeDetail:{},replyData:[],flag:!1,prevClickTime:0,currentAudio:"",lastPlayAudio:"",successAddKnowledge:!1,showVoice:!0,uploadHeadersData:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json;charset=UTF-8"},videoParams:"",lastStudentIndex:-1,showVideoSource:!1,currentTime:"",dialogImageUrl:"",dialogVisible:!1,uploadImgData:{token:""},scrollOptions:{currentPage:0,thresholdDistance:500,thresholdTime:100,autoplay:1e3,loop:!0,direction:"vertical",loopedSlides:1,slidesToScroll:1,timingFunction:"ease",speed:300}}},watch:{exchangeData:function(t){this.successAddKnowledge=!1,this.showReply=!1,void 0==t?this.exchangeDetail=!1:(this.exchangeDetail={},this.picList=[],this.showUploadImg=!1,this.getExchangeDetailAjax())},exchangeDetail1:function(t){return this.exchangeData=t,this.exchangeData},list:function(t){this.isPicSuccessNum=-1,this.allLoad=!0,this.showPic=!0}},mounted:function(){this.currentTime=Date.parse(new Date)/1e3,this.uploadImgData.token=this.techLoginInfo.token,this.getExchangeDetailAjax()},create:function(){},computed:u()({},Object(x.d)({host:function(t){return t.global.host}}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))},classOption:function(){return{limitMoveNum:2,step:.3}},replyList:function(){var t=this,e=this.replyData,a=[],s=!1,i=0;if(this.lastStudentIndex=-1,this.getGradeTeacherInfo="",this.gradeTeacherArr="",e.forEach(function(s,i,n){void 0==e[i].playStatus&&(e[i].playStatus=!1,e[i].showEdit=!1),s.memberId==t.exchangeDetail.memberId&&(t.lastStudentIndex=i),0!=s.grade&&a.push(s)}),(a=this.filterSameArr(a)).length>0){for(var n=0;n<a.length;n++)this.techLoginInfo.id==a[n].memberId&&(s=!0,i=n);s?(this.getGradeTeacherInfo=a[i],this.getGradeTeacherInfo.showtext="您"):1==a.length?(this.getGradeTeacherInfo=a[0],this.getGradeTeacherInfo.showtext=a[0].nickName?a[0].nickName:a[0].realName):this.gradeTeacherArr=a}return e}}),methods:u()({},Object(x.b)("exchange",["getExchangeDetail"]),{showUploadBtn:function(){this.showUploadImg=!this.showUploadImg,this.fileList=[],this.imgPathArr=[],this.showUploadImg&&this.exchangeDetail.replys.forEach(function(t,e){t.showEdit=!1})},catchData:function(t){this.replyContent=t},catchEditData:function(t){this.editContent=t},toAnswer:function(){var t=this;y.a.ajax("setThreadReplyState",{token:this.techLoginInfo.token,id:this.exchangeDetail.id}).then(function(e){e&&"success"==e.state?(t.showReply=!0,t.exchangeDetail.isProcessing="1",t.$emit("toAnswer",t.exchangeDetail)):t.webApi.alert(e.msg)})},handleRemove:function(t,e){this.imgPathArr=this.imgPathArr.filter(function(e){return e!=t.imgPath})},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},onUploadChange:function(t,e){var a=new FileReader;a.readAsDataURL(t.raw),a.onload=function(t){}},handleExceed:function(t,e){this.$message.warning("最多只能上传5个文件哦～")},uploadImgFunc:function(t,e){var a=this,s=t.file,i=new FormData;i.append("file",s),i.append("token",this.techLoginInfo.token),V.a.post("https://api.zbgedu.com/api/base/file/upload",i,{method:"post",headers:{"Content-Type":"multipart/form-data"}}).then(function(t){console.log(t),a.imgPathArr.push(t.data[0].storeFileUrl)}).catch(function(t){console.log(t)})},sub:function(){var t=this,e=this.webApi.trim(this.replyContent);if(""!=e||0!=this.imgPathArr.length){for(var a="",s=0;s<this.imgPathArr.length;s++)a+='<img src="'+this.imgPathArr[s]+'"><br>';var i=e.replace(/>/g,"&gt;").replace(/</g,"&lt;"),n={token:this.techLoginInfo.token,id:this.exchangeData.id,pageNo:1,pageSize:20,content:"<p>"+i+"</p><br>"+a,replaytype:0,teacher:"permission"};y.a.ajax("bbsreply",n).then(function(e){if(!e||"success"!=e.state)return t.webApi.alert("回复失败，请稍后重试"),!1;t.replyContent="",t.$refs.editor.clearContent(),t.contentValue="",t.imgPathArr=[],t.$refs.upload&&t.$refs.upload.clearFiles(),t.$emit("hasAnswered",t.exchangeDetail),t.webApi.alert("评论成功"),t.getExchangeDetailAjax()})}else this.webApi.alert("内容不能为空")},confirmEdit:function(t,e){var a=this,s="";if(""!=this.editContent||0!=this.imgPathArr.length){this.isCommitting=!0;for(var i=0;i<this.imgPathArr.length;i++)s+='<img src="'+this.imgPathArr[i]+'"><br>';var n=this.editContent.replace(/>/g,"&gt;").replace(/</g,"&lt;"),o={token:this.techLoginInfo.token,id:this.exchangeData.id,content:"<p>"+n+"</p><br>"+s,imgPath:this.imgPathArr.join(),clienttype:"pc",pid:t.pid};y.a.ajax("editPost",o).then(function(t){t&&"success"==t.state?(a.$message({message:"编辑成功！",type:"success"}),a.getExchangeDetailAjax()):a.webApi.alert(t.msg||"系统异常，请稍后再试～"),a.isCommitting=!1})}else this.webApi.alert("内容不能为空")},getExchangeDetailAjax:function(){var t=this,e={pageNo:1,pageSize:1e3,id:this.exchangeData.id,token:this.techLoginInfo.token};this.canClick||(e.isStatistical=1),y.a.ajax("bbsdetail",e).then(function(e){t.exchangeDetail=e.data,t.replyData=e.data.replys,t.$nextTick(function(){var t=this;setTimeout(function(){t.scrollRefresh=!t.scrollRefresh},200)})})},editComment:function(t,e){var a=this;this.exchangeDetail.replys.forEach(function(t,e){t.showEdit=!1}),this.showUploadImg=!1,this.fileList=[],this.imgPathArr=[];this.webApi.isEmpty(t.imgPath)||t.imgPath.split(",").forEach(function(t){a.fileList.push({url:"http://eximg.zbgedu.com"+t,imgPath:t}),a.imgPathArr.push(t)}),this.fileList.push(),t.showEdit=!0,this.editContent=t.contentHtml.replace(/<[^>]+>/g,"").replace(/&gt;/g,">").replace(/&lt;/g,"<"),this.$set(this.exchangeDetail.replys,e,t),this.scrollRefresh=!this.scrollRefresh},cancelEdit:function(t,e){t.showEdit=!1,this.$set(this.exchangeDetail.replys,e,t),this.scrollRefresh=!this.scrollRefresh},filterSameArr:function(t){var e=[];return t.forEach(function(t){for(var a=!1,s=0;s<e.length;s++)if(e[s].memberId===t.memberId){a=!0;break}a||e.push(t)}),e},addBbs:function(t){var e=this;y.a.ajax("addBbs",{token:this.techLoginInfo.token,tid:t}).then(function(t){t&&"success"==t.state?(e.$message({message:"添加成功！",type:"success"}),e.successAddKnowledge=!0):e.webApi.alert(t.msg)})},showInput:function(t){this.flag=!!t},checkVideoSource:function(t){this.showVideoSource=!0,this.videoParams=t},playAudio:function(t,e){var a=document.getElementById("audioId");t.filePath==this.lastPlayAudio?(t.playStatus=!t.playStatus,this.$set(this.exchangeDetail.replys,e,t),"true"==self.status?(a.pause(),self.status="false"):(a.play(),self.status="true")):(this.exchangeDetail.replys.forEach(function(t,e,a){t.playStatus=!1}),t.playStatus=!t.playStatus,this.$set(this.exchangeDetail.replys,e,t),a.src=t.filePath,a.play(),self.status="true"),this.lastPlayAudio=t.filePath},closeVideo:function(){this.showVideoSource=!1},deleteComment:function(t){var e=this;this.$confirm("确定要删除这条回复吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){y.a.ajax("bbs_del",{token:e.techLoginInfo.token,id:t.id,type:"1"}).then(function(t){t.state&&"success"==t.state?(e.webApi.alert("回复删除成功！"),e.getExchangeDetailAjax()):e.webApi.alert("回复删除失败！")})}).catch(function(){})},handleFocusState:function(){this.$refs.uploadPicRef&&this.$refs.uploadPicRef.handleCloseUpload()},loadUpload:function(t){var e=this;if("error"!=t.state){var a=this.webApi.trim(this.replyContent);if(""==a)return this.webApi.alert("内容不能为空"),!1;if(""==this.exchangeData.id)return this.webApi.alert("id不能为空"),!1;if(""==this.exchangeData.subjectId)return this.webApi.alert("科目id不能为空"),!1;var s=[],i="",n=t.imgPath;if(!this.webApi.isEmpty(n))for(var o in s=n.split(","))i+='<img src="'+this.webApi.cdnImgUrl+s[o]+'"><br>';var r={token:this.techLoginInfo.token,id:this.exchangeData.id,pageNo:1,pageSize:20,content:"<p>"+a+"</p><br>"+i,replaytype:0,teacher:"permission"};y.a.ajax("bbsreply",r).then(function(t){if(!t||"success"!=t.state)return e.webApi.alert("回复失败，请稍后重试"),!1;e.$refs.uploadPicRef.handleEmptyList(),e.isStartUpload=!1,e.$refs.editor.clearContent(),e.webApi.alert("评论成功"),e.getExchangeDetailAjax()})}else this.webApi.alert("图片上传失败，请稍后再试")},setImgPath:function(t){var e=this,a=[];return t.split(",").forEach(function(t){e.webApi.isEmpty(t)||a.push(t)}),a},getImgPath:function(t){return t.length>0&&"http"!=t.substr(0,4)?this.host.img+t:t},getreolyImg:function(t){var e=document.createElement("div");e.innerHTML=t;var a=e.getElementsByTagName("img");if(a.length<1)return"";for(var s=[],i=0;i<a.length;i++)s.push(a[i].getAttribute("src"));return s},openPreviewPic:function(t,e){this.currentIndex=t;var a=e;this.allPic=[];for(var s=0;s<a.length;s++)this.allPic.push(this.getImgPath(a[s]));-1==this.isPicSuccessNum?this._picListInit():this.isPicSuccessNum<this.allPic.length&&this.webApi.alert("图片加载中，请耐心等待。。。！")},_picListInit:function(t){var e=this,a=[];this.isPicSuccessNum=0,this.allPic.map(function(t){var s=new Image;s.onload=function(){a.push({src:t,w:s.width,h:s.height}),a.length==e.allPic.length&&(e.list=a),e.isPicSuccessNum++},s.src=t})},closePic:function(){this.showPic=!1}})},rt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ac-right-content"},[t.exchangeDetail?a("div",{staticClass:"has-data"},[t.webApi.isEmpty(t.exchangeDetail)?a("iLoading"):a("div",{staticClass:"ac-right-main"},[a("iScroll",{attrs:{id:"exchangeDetail","is-refresh":t.scrollRefresh,toTop:!1}},[a("div",{staticClass:"ac-box"},[t.canClick?t._e():a("div",{staticClass:"popup-wrap"},[1==t.exchangeDetail.isdelete?a("div",{staticClass:"hasDeleted-icon"}):t._e()]),t._v(" "),a("div",{staticClass:"top-header"},[a("div",{staticClass:"top-header-li"},[a("div",{staticClass:"iconWrap"},["1"==t.exchangeDetail.isProcessing?a("div",{staticClass:"chulizhong"}):["1"==t.exchangeDetail.solve?a("div",{staticClass:"hasResolve usual-style"},[a("i",[t._v("✓")]),t._v("已解决\n                  ")]):"0"==t.exchangeDetail.solve?a("div",{staticClass:"noAnswer usual-style"},[a("i",[t._v("?")]),t._v("未回复\n                  ")]):"2"==t.exchangeDetail.solve?a("div",{staticClass:"noResolve usual-style"},[a("i",[t._v("!")]),t._v("已回复\n                  ")]):"3"==t.exchangeDetail.solve?a("div",{staticClass:"question-closely usual-style"},[a("i",[t._v("⇧")]),t._v("学员追问\n                  ")]):t._e()]],2),t._v(" "),a("span",{staticClass:"text-span",attrs:{title:t.exchangeDetail.chapterName}},[t._v("源自：\n                        "),t._v(" "),"chapter"==t.exchangeDetail.taskType?a("span",{attrs:{title:t.exchangeDetail.courseName+" + "+t.exchangeDetail.chapterName}},[t._v(t._s(t.exchangeDetail.courseName)+" + "+t._s(t.exchangeDetail.chapterName))]):t._e(),t._v(" "),"video"==t.exchangeDetail.taskType?a("span",{attrs:{title:t.exchangeDetail.courseName+" + "+t.exchangeDetail.chapterName}},[t._v(t._s(t.exchangeDetail.courseName)+" + "+t._s(t.exchangeDetail.chapterName))]):t._e(),t._v(" "),"course"==t.exchangeDetail.taskType||""==t.exchangeDetail.taskType?a("span",{attrs:{title:t.exchangeDetail.courseName}},[t._v(t._s(t.exchangeDetail.courseName))]):t._e(),t._v(" "),"exam"==t.exchangeDetail.taskType?[t.exchangeDetail.sourcePath?a("span",{attrs:{title:t.exchangeDetail.sourcePath}},[t._v(t._s(t.exchangeDetail.sourcePath))]):a("span",{attrs:{title:t.exchangeDetail.courseName+" + "+t.exchangeDetail.chapterName+(t.exchangeDetail.taskCurrent?" + 第"+t.exchangeDetail.taskCurrent+"题":"")}},[t._v(t._s(t.exchangeDetail.courseName)+" + "+t._s(t.exchangeDetail.chapterName)+t._s(t.exchangeDetail.taskCurrent?" + 第"+t.exchangeDetail.taskCurrent+"题":""))])]:t._e()],2)])]),t._v(" "),a("div",{staticClass:"ac-question"},[a("div",{on:{click:t.handleFocusState}},[a("div",{staticClass:"ac-right-top"},[a("div",{staticClass:"ac-top-left"},[a("img",{staticClass:"ac-desc-avatar",attrs:{src:t.host.img+t.exchangeDetail.headImg}}),t._v(" "),a("span",{staticClass:"ac-desc-user-name"},[t._v(t._s(t.exchangeDetail.nikeName))])]),t._v(" "),a("div",{staticClass:"ac-top-right"},[t.currentTime-t.exchangeDetail.updateTime>43200&&("0"==t.exchangeDetail.solve||"3"==t.exchangeDetail.solve)?a("span",{staticClass:"yujing-icon-wrap"},[a("i",{staticClass:"yujing-icon"})]):t._e(),t._v(" "),a("span",{staticClass:"ac-desc-time"},[t._v(t._s(t.webApi.formatDate(t.exchangeDetail.updateTime,"Y"))+"-"+t._s(t.webApi.formatDate(t.exchangeDetail.updateTime,"M"))+"-"+t._s(t.webApi.formatDate(t.exchangeDetail.updateTime,"D"))+"   "+t._s(t.webApi.formatDate(t.exchangeDetail.updateTime,"h"))+":"+t._s(t.webApi.formatDate(t.exchangeDetail.updateTime,"m")))])])]),t._v(" "),a("p",{staticClass:"ac-question-title"},[t._v("标题："+t._s(t.exchangeDetail.title))]),t._v(" "),a("div",{staticClass:"ac-question-content"},[a("pre",[t._v("内容："),a("span",{domProps:{innerHTML:t._s(t.exchangeDetail.contentHtml.replace(/<img.*?>/g,""))}})])]),t._v(" "),t.exchangeDetail.imgPath?a("div",{staticClass:"discussQA-imgPath"},[a("viewer",{attrs:{images:t.setImgPath(t.exchangeDetail.imgPath)}},t._l(t.setImgPath(t.exchangeDetail.imgPath),function(e,s){return a("img",{key:s,attrs:{src:t.getImgPath(e)}})}),0)],1):t._e()]),t._v(" "),t.showReply?t._e():a("div",{staticClass:"atonce-btn-wrap"},[a("button",{staticClass:"atonce-btn",on:{click:t.toAnswer}},[t._v("我来回答")])]),t._v(" "),t.showReply?a("div",{staticClass:"ac-question-reply"},[a("editor",{ref:"editor",attrs:{catchData:t.catchData,content:t.replyContent}}),t._v(" "),a("div",{staticClass:"question-reply-btn"},[a("input",{ref:"iptFile",staticClass:"ipt-file",attrs:{type:"file",multiple:"multiple",accept:"image/*",hidden:""}}),t._v(" "),a("uploadPicture",{ref:"uploadPicRef",attrs:{isStartUpload:t.isStartUpload,picList:t.picList},on:{"load-upload":t.loadUpload,showInput:t.showInput}}),t._v(" "),a("a",{staticClass:"show-uploadImg-a",attrs:{href:"javascript:;"},on:{click:function(e){return t.showUploadBtn()}}},[a("i",{staticClass:"iconfont icon-pic"})]),t._v(" "),a("a",{staticClass:"replay-a",attrs:{href:"javascript:;"},on:{click:t.sub}},[t._v("回复")])],1)],1):t._e(),t._v(" "),t.showUploadImg?a("el-upload",{ref:"upload",attrs:{action:"http://api.zbgedu.com/api/base/file/upload","list-type":"picture-card",headers:t.uploadHeadersData,"auto-upload":!0,"file-list":t.fileList,limit:5,"on-exceed":t.handleExceed,data:t.uploadImgData,"on-change":t.onUploadChange,"http-request":t.uploadImgFunc,accept:"image/*","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove}},[a("i",{staticClass:"el-icon-plus"})]):t._e()],1),t._v(" "),t.getGradeTeacherInfo||t.gradeTeacherArr?a("div",{staticClass:"get-grade-wrap"},[t.gradeTeacherArr?a("div",{staticClass:"get-grade"},[a("slider",{ref:"slider",attrs:{options:t.scrollOptions}},t._l(t.gradeTeacherArr,function(e,s){return a("slideritem",{key:s},[a("img",{staticClass:"get-grade-avatar",attrs:{src:t.host.img+e.headImg}}),t._v(" "),a("span",{staticClass:"ac-answer-user-name"},[t._v(t._s(e.nikeName?e.nikeName:e.realName))]),t._v(" "),"4"==e.userlevel||"5"==e.userlevel||"6"==e.userlevel?a("span",{staticClass:"ac-answer-icon"},[t._v("中博名师")]):t._e(),t._v(" "),a("div",{staticClass:"ac-answer-info"},[a("p",{staticClass:"ac-answer-info-top"},[a("span",{staticClass:"get-grade-text"},[t._v("恭喜"+t._s(e.nikeName?e.nikeName:e.realName)+"解决了该问题并获得"+t._s(e.grade)+"颗星\n                      "),a("el-rate",{attrs:{disabled:"","text-color":"#fc3a6f","score-template":"{value}"},model:{value:e.grade-0,callback:function(a){t.$set(e,"grade-0",a)},expression:"item.grade-0"}})],1)])])])}),1)],1):t._e(),t._v(" "),t.getGradeTeacherInfo?a("div",{staticClass:"get-grade"},[a("img",{staticClass:"get-grade-avatar",attrs:{src:t.host.img+t.getGradeTeacherInfo.headImg}}),t._v(" "),a("span",{staticClass:"ac-answer-user-name"},[t._v(t._s(t.getGradeTeacherInfo.nikeName?t.getGradeTeacherInfo.nikeName:t.getGradeTeacherInfo.realName))]),t._v(" "),"4"==t.getGradeTeacherInfo.userlevel||"5"==t.getGradeTeacherInfo.userlevel||"6"==t.getGradeTeacherInfo.userlevel?a("span",{staticClass:"ac-answer-icon"},[t._v("中博名师")]):t._e(),t._v(" "),a("div",{staticClass:"ac-answer-info"},[a("p",{staticClass:"ac-answer-info-top"},[a("span",{staticClass:"get-grade-text"},[t._v("恭喜"+t._s(t.getGradeTeacherInfo.showtext)+"解决了该问题并获得"+t._s(t.getGradeTeacherInfo.grade)+"颗星\n                  "),a("el-rate",{attrs:{disabled:"","text-color":"#fc3a6f","score-template":"{value}"},model:{value:t.getGradeTeacherInfo.grade,callback:function(e){t.$set(t.getGradeTeacherInfo,"grade",e)},expression:"getGradeTeacherInfo.grade"}})],1)])])]):t._e()]):t._e(),t._v(" "),a("div",{staticClass:"ac-answer",on:{click:t.handleFocusState}},[a("div",{staticClass:"ac-answer-tit"},[t._v("全部回复("+t._s(t.exchangeDetail.replyCount)+")")]),t._v(" "),a("audio",{attrs:{id:"audioId"}}),t._v(" "),t.replyList.length>0?a("ul",{staticClass:"ac-answer-ul"},t._l(t.replyList,function(e,s){return a("li",{staticClass:"ac-answer-li"},[a("img",{staticClass:"ac-answer-avatar",attrs:{src:t.host.img+e.headImg}}),t._v(" "),a("div",{staticClass:"ac-answer-info"},[a("p",{staticClass:"ac-answer-info-top"},[a("span",{staticClass:"ac-answer-user-name"},[t._v(t._s(e.nikeName?e.nikeName:e.realName))]),t._v(" "),"4"==e.userlevel||"5"==e.userlevel||"6"==e.userlevel?a("span",{staticClass:"ac-answer-icon"},[t._v("中博名师")]):t._e(),t._v(" "),a("span",{staticClass:"ac-answer-time"},[t._v(t._s(t.webApi.formatDate(e.updateTime,"Y"))+"-"+t._s(t.webApi.formatDate(e.updateTime,"M"))+"-"+t._s(t.webApi.formatDate(e.updateTime,"D"))+"  "+t._s(t.webApi.formatDate(e.updateTime,"h"))+":"+t._s(t.webApi.formatDate(e.updateTime,"m"))+":"+t._s(t.webApi.formatDate(e.updateTime,"s")))])]),t._v(" "),"1"==e.replayForm?a("div",{staticClass:"ac-answer-info-desc"},[e.showEdit?t._e():a("p",{domProps:{innerHTML:t._s(t.webApi.unescapeHTML(e.contentHtml.replace(/<img.*?>/g,"")))}}),t._v(" "),e.showEdit?a("div",{staticClass:"edit-content-wrap"},[a("editor",{ref:"editor1",refInFor:!0,attrs:{catchData:t.catchEditData,content:t.editContent}}),t._v(" "),a("div",{staticClass:"el-upload-wrap"},[a("el-upload",{ref:"upload",refInFor:!0,attrs:{action:"http://api.zbgedu.com/api/base/file/upload","list-type":"picture-card",headers:t.uploadHeadersData,"auto-upload":!0,"file-list":t.fileList,data:t.uploadImgData,limit:5,"on-change":t.onUploadChange,"http-request":t.uploadImgFunc,accept:"image/*","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove}},[a("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),a("div",{staticClass:"btn-wrap"},[a("button",{staticClass:"edit-btn-usual edit-btn-cancel",on:{click:function(a){return t.cancelEdit(e,s)}}},[t._v("放弃修改")]),t._v(" "),a("button",{staticClass:"edit-btn-usual edit-btn-confirm",attrs:{disabled:t.isCommitting},on:{click:function(a){return t.confirmEdit(e,s)}}},[t._v(t._s(t.isCommitting?"正在提交...":"确认修改"))])])],1):t._e(),t._v(" "),e.imgPath&&t.getreolyImg(e.contentHtml).length<1&&!e.showEdit?a("div",{staticClass:"ac-answer-pic"},[a("viewer",{attrs:{images:t.setImgPath(e.imgPath)}},t._l(t.setImgPath(e.imgPath),function(e){return a("img",{key:e,attrs:{src:t.getImgPath(e)}})}),0)],1):t._e(),t._v(" "),e.contentHtml&&t.getreolyImg(e.contentHtml).length>0&&!e.showEdit?a("div",{staticClass:"ac-answer-pic"},[a("viewer",{attrs:{images:t.getreolyImg(e.contentHtml)}},t._l(t.getreolyImg(e.contentHtml),function(e){return a("img",{key:e,attrs:{src:t.getImgPath(e)}})}),0)],1):t._e()]):t._e(),t._v(" "),"2"==e.replayForm?a("div",{staticClass:"an-answer-info-voice"},[a("a",{staticClass:"audio-icon",attrs:{href:"javascript:;"},on:{click:function(a){return t.playAudio(e,s)}}},[a("i",{staticClass:"icon-audio",class:[e.playStatus?"playing":""]})]),a("span",{staticClass:"time-audio"},[t._v(t._s(e.soundlen)+"秒")])]):t._e(),t._v(" "),"1"!=t.exchangeDetail.solve&&e.memberId==(t.techLoginInfo.memberId?t.techLoginInfo.memberId:t.techLoginInfo.eduUserId)&&!e.showEdit&&s>t.lastStudentIndex?a("div",{staticClass:"ac-answer-delete"},[a("span",{staticClass:"ac-answer-delete-span ac-answer-delete-edit",on:{click:function(a){return t.editComment(e,s)}}},[a("i",{staticClass:"icon-edit-wrap"}),t._v("编辑")])]):t._e()])])}),0):a("div",{staticClass:"has-no-data"},[a("div",{staticClass:"img-wrap"}),t._v(" "),a("p",{staticClass:"text-p"},[t._v("暂无回复内容")])])])])]),t._v(" "),t.showPic?a("photoSwipe",{attrs:{list:t.list,currentIndex:t.currentIndex},on:{closePic:t.closePic}}):t._e()],1)],1):a("div",{staticClass:"no-data"},[t._v("暂无数据")]),t._v(" "),t.showVideoSource?a("videoSource",{attrs:{videoParams:t.videoParams},on:{"on-closeVideo":t.closeVideo}}):t._e(),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]};var lt=a("C7Lr")(ot,rt,!1,function(t){a("l7SY")},null,null).exports,ct={name:"pagination",props:{pageNo:{type:Number},pageSize:{type:Number},totalCount:{type:Number},isRefresh:{type:Boolean}},data:function(){return{pageStart:"",pageStartI:1,pagePrevs:4,pageNexts:4,pageForNum:"",pageTotal:""}},created:function(){this.pagin()},watch:{isRefresh:function(){this.pagin()}},methods:{pagin:function(){this.pageTotal=Math.ceil(this.totalCount/+this.pageSize),this.pageStart=+this.pageNo,this.pageForNum=this.pageStart+this.pagePrevs,this.pageTotal>this.pageForNum?this.pageStart<=this.pagePrevs?(this.pageStartI=1,this.pageForNum=this.pageForNum):this.pageStart<this.pagePrevs+this.pageNexts?(this.pageForNum=this.pageForNum,this.pageStartI=this.pageForNum-this.pagePrevs-this.pagePrevs):this.pageStart>=this.pagePrevs+this.pageNexts&&this.pageStart<=this.pageTotal-this.pageNexts?(this.pageForNum=this.pageStart+this.pageNexts,this.pageStartI=this.pageStart-this.pagePrevs):this.pageStart>this.pageTotal-this.pageNexts&&(this.pageForNum=this.pageTotal,this.pageStartI=this.pageTotal-this.pagePrevs-this.pagePrevs):(this.pageForNum=this.pageTotal,this.pageStartI=this.pageTotal-this.pagePrevs-this.pagePrevs),+this.pageForNum>+this.pageTotal&&(this.pageForNum=this.pageTotal)},pageChange:function(t){this.$emit("pageChange",t)},pagePrev:function(){this.$emit("pagePrev")},pageNext:function(){this.$emit("pageNext")}}},ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagination-box"},[a("ul",{staticClass:"pagination"},[t.pageStart>1?[a("li",{staticClass:"pagination-li js-pagination-prev",on:{click:t.pagePrev}},[a("a",{staticClass:"pagination-a pagination-prev",attrs:{href:"javascript:;"}},[t._v("\n\t\t\t  <\n\t\t\t  ")])])]:t._e(),t._v(" "),t.pageStart>t.pagePrevs&&t.pageStartI>1?[a("li",{staticClass:"pagination-li js-pagination-li",attrs:{"data-pageno":"1"},on:{click:function(e){return t.pageChange(1)}}},[a("a",{staticClass:"pagination-a",attrs:{href:"javascript:;"}},[t._v("1...")])])]:t._e(),t._v(" "),t.totalCount>20&&t.pageForNum?t._l(t.pageForNum,function(e){return e>=t.pageStartI?a("li",{staticClass:"pagination-li js-pagination-li ",class:e==t.pageNo?"select":"",attrs:{"data-pageno":"page"},on:{click:function(a){return t.pageChange(e)}}},[a("a",{staticClass:"pagination-a",attrs:{href:"javascript:;"}},[t._v(t._s(e))])]):t._e()}):t._e(),t._v(" "),t.pageForNum!=t.pageTotal&&t.pageTotal-t.pageStart>t.pageNexts?[a("li",{staticClass:"pagination-li js-pagination-li",attrs:{"data-pageno":"pageTotal"},on:{click:function(e){return t.pageChange(t.pageTotal)}}},[a("a",{staticClass:"pagination-a",attrs:{href:"javascript:;"}},[t._v("..."+t._s(t.pageTotal))])])]:t._e(),t._v(" "),t.pageStart<t.pageTotal?[a("li",{staticClass:"pagination-li js-pagination-next",on:{click:t.pageNext}},[a("a",{staticClass:"pagination-a pagination-next",attrs:{href:"javascript:;"}},[t._v("\n\t\t\t  >\n\t\t\t  ")])])]:t._e()],2)])},staticRenderFns:[]};var pt=a("C7Lr")(ct,ut,!1,function(t){a("HQQP")},"data-v-8ee7f250",null).exports,dt={name:"multipleSearchInput",data:function(){return{selectType:"1",keyWords:"",selectUser:""}},computed:{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}},methods:{querySearchAsync:function(t,e){var a=0;a=2==this.selectType||4==this.selectType?2:1,y.a.ajax("queryMemberByNameAndNickname",{token:this.techLoginInfo.token,name:t,type:a,limit:50}).then(function(t){e(t.data)})},handleSelect:function(t){this.selectUser=t},listenSearch:function(){this.webApi.trim(this.keyWords)},search:function(){var t={keyWords:this.keyWords,type:this.selectType,selectUser:this.selectUser};this.$emit("search",t)},changeType:function(t){this.keyWords="",this.selectUser=""}}},ht={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"multipleSearchInputWrap"},["1"!=t.selectType?a("el-autocomplete",{attrs:{"value-key":"name","fetch-suggestions":t.querySearchAsync,placeholder:"请输入内容"},on:{select:t.handleSelect},model:{value:t.keyWords,callback:function(e){t.keyWords=e},expression:"keyWords"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},on:{change:t.changeType},slot:"prepend",model:{value:t.selectType,callback:function(e){t.selectType=e},expression:"selectType"}},[a("el-option",{attrs:{label:"关键词查询",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"学员用户名",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"学员姓名",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"教师用户名",value:"4"}})],1),t._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.search},slot:"append"})],1):a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},on:{input:t.listenSearch},model:{value:t.keyWords,callback:function(e){t.keyWords=e},expression:"keyWords"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:t.selectType,callback:function(e){t.selectType=e},expression:"selectType"}},[a("el-option",{attrs:{label:"关键词查询",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"学员用户名",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"学员姓名",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"教师用户名",value:"4"}})],1),t._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.search},slot:"append"})],1)],1)},staticRenderFns:[]};var mt=a("C7Lr")(dt,ht,!1,function(t){a("RQQo")},null,null).exports,ft={name:"anwserQuestion",components:{iLoading:_,iScroll:f,iPagination:pt,exchangeDetail:lt,videoSource:j,examSource:U,videoPlayer:$,multipleSearchInput:mt},filters:{},data:function(){return{scrollRefresh:!1,pageNo:1,pageSize:20,activeIndex:0,exchangeData:{},exchangeDetailData:{},firstOpen:!0,selectType:"1",inputText:"",listFilterForm:{courseListId:"",classListId:"",selectedOptions:[],classType:[],vortType:"",statusType:"",askTime:null,classId:"",time:"12"},pickerOptions0:{disabledDate:function(t){return t.getTime()>Date.now()}},cascaderProps:{children:"child",label:"title",value:"id"},categoryId:"",subjectId:"",knowledge_node_path1:"",knowledge_node_path2:"",typeList:["预警问题","全部问题"],exchangeListData:"",vortType:[{name:"全部",value:""},{name:"视频",value:"video"},{name:"题目",value:"exam"},{name:"章节",value:"chapter"},{name:"课程",value:"course"}],statusType:[{name:"全部",value:""},{name:"未回复",value:"0"},{name:"学员追问",value:"3"}],allStatusType:[{name:"全部",value:""},{name:"未回复",value:"0"},{name:"已回复",value:"2"},{name:"已解决",value:"1"},{name:"学员追问",value:"3"}],warnStatusType:[{name:"全部",value:""},{name:"未回复",value:"0"},{name:"学员追问",value:"3"}],selectTypeChange:0,type:3,orderBy:5,solve:"",keyWords:"",taskType:"",showPop:!1,qid:"",exerciseId:"",curRenderClassIndex:"",courseId:"",showSelectChapter:!1,curCourseId:"",selectChapterId:[],showExamSource:!1,showVideoSource:!1,examParams:"",myChapterId:[],time:"12",classSelectList:[],currentTime:"",end_time:"",start_time:"",showChapterSource:!1,chapterParams:"",options1:[{id:"1",title:"全部科目"}],options:{},classList:[],selectObj:"",rules:{time:[{validator:function(t,e,a){if(!e)return a(new Error("年龄不能为空"));setTimeout(function(){R()(e)?e<0?a(new Error("必须为正整数")):a():a(new Error("请输入数字值"))},1e3)},trigger:"blur"}]}}},created:function(){this.getExchangeListAjax()},mounted:function(){this.currentTime=Date.parse(new Date)/1e3,this.getTeacherKnowledge(),this.getCourseType(),this.getCourseList()},computed:u()({},Object(x.d)({host:function(t){return t.global.host},envType:function(t){return t.global.envType},teacherClass:function(t){return t.global.teacherClass}}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}}),watch:{exchangeData:function(t){this.exchangeData=t},"listFilterForm.selectedOptions":function(t){""==t[0]?(this.knowledge_node_path1=t[0],this.knowledge_node_path2=""):(this.knowledge_node_path1=t[0],this.knowledge_node_path2=t[1]),this.pageNo=1,this.getExchangeListAjax()},selectChapterId:function(){this.pageNo=1,this.getExchangeListAjax()}},methods:{sizeChange:function(t){this.pageNo=t,this.getExchangeListAjax()},getExchangeListAjax:function(){var t=this;this.exchangeListData="",this.firstOpen=!0,this.exchangeDetailData={};var e=this.listFilterForm.time;""===this.listFilterForm.time&&0==this.selectTypeChange&&(e=12),console.log(this.listFilterForm.classType);var a={self:0,type:this.type,ordertype:this.orderBy,pageNo:this.pageNo,pageSize:this.pageSize,subjectId:"",knowledge_node_path1:this.knowledge_node_path1,knowledge_node_path2:this.knowledge_node_path2,token:this.techLoginInfo.token,classId:this.listFilterForm.classId,teaching_type:this.listFilterForm.classType.join(","),courseId:this.listFilterForm.courseListId,solve:this.listFilterForm.statusType,start_time:this.start_time,end_time:this.end_time,taskType:this.listFilterForm.vortType,time:e,chapterId:this.selectChapterId.join(","),memberId:this.techLoginInfo.id,request_type:"teaching"};this.selectObj&&(1==this.selectObj.type?a.keyWords=this.selectObj.keyWords:2==this.selectObj.type||3==this.selectObj.type?a.studentId=this.selectObj.selectUser.memberId:(a.teacherId=this.selectObj.selectUser.memberId,a.is_teacher_answer=1)),y.a.ajax("bbslist",a).then(function(e){e&&"success"==e.state&&(t.exchangeListData=e,t.activeIndex=0,t.exchangeDetailData=e.data[0]?e.data[0]:{}),t.$nextTick(function(){t.scrollRefresh=!t.scrollRefresh})})},handleSelect:function(t){console.log(t)},querySearchAsync:function(t,e){console.log(t),console.log(e),y.a.ajax("queryMemberByNameAndNickname",{token:this.techLoginInfo.token,name:t,type:1,limit:50}).then(function(t){console.log(t.data),e(t.data)})},changeTime:function(){this.getExchangeListAjax()},toGather:function(){window.open("/#/aqReportGather")},toAnswer:function(t){this.exchangeListData.data.forEach(function(e,a){e.id==t.id&&(e.isProcessing=1)})},hasAnswered:function(t){this.exchangeListData.data.forEach(function(e,a){e.id==t.id&&(e.isProcessing=0,e.solve=2)})},changeAskTime:function(){null==this.listFilterForm.askTime?(console.log("kongla"),this.start_time="",this.end_time=""):(this.start_time=this.listFilterForm.askTime[0],this.end_time=this.listFilterForm.askTime[1]),this.pageNo=1,this.getExchangeListAjax()},changeRequirement:function(){this.pageNo=1,this.getExchangeListAjax()},handleChange:function(t){},getTeacherKnowledge:function(){var t=this;y.a.ajax("getTeacherKnowledge",{token:this.techLoginInfo.token}).then(function(e){if(e&&"success"==e.state){var a=t.copyData(e.data);t.options1=t.filterCascaderData(a)}})},getCourseList:function(){var t=this;y.a.ajax("queryCourseArray",{token:this.techLoginInfo.token,teacherId:this.techLoginInfo.eduUserId,courseplanName:"",finishStatus:0,pageSize:1e3,currentPage:1}).then(function(e){e&&"success"==e.state?null!=e.data?t.classList=e.data.pageResult:t.classList=[]:t.webApi.alert("服务器异常，请重试～")})},getCourseType:function(){var t=this;y.a.ajax("getCourseTeacheringType",{token:this.techLoginInfo.token}).then(function(e){e&&"success"==e.state&&(t.classSelectList=e.data)})},filterCascaderData:function(t){if(t){var e=t,a=[];for(var s in a.push({title:"全部项目",id:""}),e)for(var i in a.push(e[s]),e[i]);return a}return[]},copyData:function(t){var e=Array.isArray(t)?[]:{};for(var a in t)"object"===L()(t[a])?("child"==a&&t[a].unshift({title:"全部科目",id:""}),e[a]=this.copyData(t[a])):e[a]=t[a];return e},changeQuesitonType:function(t){this.selectTypeChange!=t&&(this.selectTypeChange=t,this.listFilterForm.askTime=null,this.start_time="",this.end_time="",0==t?(this.time="12",this.solve="",this.orderBy=5,this.statusType=this.warnStatusType,this.listFilterForm.statusType="",this.listFilterForm.time="12"):(this.time="",this.orderBy=1,this.statusType=this.allStatusType,this.listFilterForm.statusType="0",this.listFilterForm.time=""),this.pageNo=1,this.getExchangeListAjax())},closeChapterPop:function(){this.showChapterSource=!1},cancelSChapter:function(){this.showSelectChapter=!1},okSChapter:function(t){this.selectChapterId=t,this.showSelectChapter=!1},checkExamSource:function(t){""!=t.exerciseId||""!=t.exerciseVersionId?(this.showExamSource=!0,this.examParams=t):this.$api.alert("试题数据有误，无法展示试题详情~")},checkChapterSource:function(t){this.showChapterSource=!0,this.chapterParams=t},checkVideoSource:function(t){this.showVideoSource=!0,this.videoParams=t},closeExamPop:function(){this.showExamSource=!1},closeVideo:function(){this.showVideoSource=!1},checkExam:function(){this.qid=1,this.showPop=!0},clearFilter:function(){this.listFilterForm={courseListId:"",classListId:""},this.selectChapterId=[],this.curVortType=0,this.taskType="",this.solve="",this.type=3},openDetail:function(t,e){this.firstOpen=!1,this.activeIndex=e,this.exchangeDetailData=t},search:function(t){this.selectObj=t,this.pageNo=1,this.getExchangeListAjax()},listenSearch:function(){this.webApi.trim(this.keyWords)||(this.pageNo=1,this.getExchangeListAjax())},jumpPage:function(t){this.pageNo=t,this.getExchangeListAjax()},prevPage:function(){this.pageNo=this.pageNo-1,this.getExchangeListAjax()},pageNext:function(){this.pageNo=this.pageNo+1,this.getExchangeListAjax()}}},vt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"answerQuestion"},[s("el-container",{staticClass:"answerQuestion-el-container"},[s("el-header",{attrs:{height:"140"}},[s("div",{staticClass:"typeChange-wrap"},[s("ul",{staticClass:"typeChange-ul"},t._l(t.typeList,function(e,a){return s("li",{staticClass:"typeChange-li",class:[t.selectTypeChange==a?"active":""],on:{click:function(e){return t.changeQuesitonType(a)}}},[0==a?s("i",{staticClass:"yujing-icon"}):t._e(),t._v(t._s(e))])}),0),t._v(" "),s("span",{staticClass:"all-report-wrap",on:{click:function(e){return t.toGather()}}},[s("i",{staticClass:"huizong-icon"}),t._v("答疑汇总报告")])]),t._v(" "),s("div",{staticClass:"manage-box-select"},[s("div",{staticClass:"ac-left-top myAc-left-top"},[s("div",{staticClass:"ac-top-left"},[s("el-form",{attrs:{inline:!0,rules:t.rules,model:t.listFilterForm}},[s("el-form-item",{attrs:{label:"选择项目/科目"}},[s("el-cascader",{attrs:{size:"mini",options:t.options1,props:t.cascaderProps},on:{change:t.handleChange},model:{value:t.listFilterForm.selectedOptions,callback:function(e){t.$set(t.listFilterForm,"selectedOptions",e)},expression:"listFilterForm.selectedOptions"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"选择课程"}},[s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{size:"mini",multiple:"","collapse-tags":"",placeholder:"请选择（默认全部）"},on:{change:function(e){return t.changeRequirement()}},model:{value:t.listFilterForm.classType,callback:function(e){t.$set(t.listFilterForm,"classType",e)},expression:"listFilterForm.classType"}},t._l(t.classSelectList,function(t){return s("el-option",{key:t.value,attrs:{label:t.title,value:t.value}})}),1)],1),t._v(" "),s("el-form-item",{attrs:{label:"问题状态"}},[s("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:function(e){return t.changeRequirement()}},model:{value:t.listFilterForm.statusType,callback:function(e){t.$set(t.listFilterForm,"statusType",e)},expression:"listFilterForm.statusType"}},t._l(t.statusType,function(t){return s("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}),1)],1),t._v(" "),s("el-form-item",{attrs:{label:"问题来源"}},[s("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:function(e){return t.changeRequirement()}},model:{value:t.listFilterForm.vortType,callback:function(e){t.$set(t.listFilterForm,"vortType",e)},expression:"listFilterForm.vortType"}},t._l(t.vortType,function(t){return s("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}),1)],1),t._v(" "),s("el-form-item",{attrs:{label:"提问时间"}},[s("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","range-separator":"至",size:"mini","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","picker-options":t.pickerOptions0,"end-placeholder":"结束日期"},on:{change:function(e){return t.changeAskTime()}},model:{value:t.listFilterForm.askTime,callback:function(e){t.$set(t.listFilterForm,"askTime",e)},expression:"listFilterForm.askTime"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"发帖时间超过"}},[s("el-input",{staticClass:"el-input2",attrs:{clearable:""},on:{input:t.changeTime},model:{value:t.listFilterForm.time,callback:function(e){t.$set(t.listFilterForm,"time",t._n(e))},expression:"listFilterForm.time"}})],1)],1)],1),t._v(" "),s("div",{staticClass:"ac-top-middle"},[s("multipleSearchInput",{on:{search:t.search}})],1)])])]),t._v(" "),s("el-container",{staticClass:"answerQuestion-s-el-container"},[s("el-aside",{staticClass:"answerQuestion-s-el-aside"},[s("div",{staticClass:"ac-left myAc-left"},[t.exchangeListData?s("div",{staticClass:"ac-left-content"},[this.webApi.isEmpty(t.exchangeListData.data)?s("div",{staticClass:"no-data-wrap"},[s("div",{staticClass:"no-data"},[s("div",{staticClass:"img-wrap"},[s("img",{staticClass:"img-no",attrs:{src:a("a4/I"),alt:"暂无内容"}})]),t._v(" "),s("p",{staticClass:"no-text"},[t._v("暂无答疑")])])]):s("iScroll",{attrs:{id:"exchangeManage","is-refresh":t.scrollRefresh}},[s("ul",{staticClass:"ac-list-ul"},[s("div",[t._l(t.exchangeListData.data,function(e,a){return s("li",{staticClass:"ac-list-li",class:[t.activeIndex==a?"active":""]},[s("div",{staticClass:"ac-list-a"},[s("a",{staticClass:"ac-list-li-content js-ac-list-active",attrs:{href:"javascript:;"},on:{click:function(s){return t.openDetail(e,a)}}},[s("div",{staticClass:"source-wrap"}),t._v(" "),s("div",{staticClass:"ac-list-title"},[s("div",{staticClass:"flex-l"},[s("div",{staticClass:"iconWrap"},["1"==e.isProcessing?s("div",{staticClass:"chulizhong"}):["1"==e.solve?s("div",{staticClass:"hasResolve usual-style"},[s("i",[t._v("✓")]),t._v("已解决\n                              ")]):"0"==e.solve?s("div",{staticClass:"noAnswer usual-style"},[s("i",[t._v("?")]),t._v("未回复\n                              ")]):"2"==e.solve?s("div",{staticClass:"noResolve usual-style"},[s("i",[t._v("!")]),t._v("已回复\n                              ")]):"3"==e.solve?s("div",{staticClass:"question-closely usual-style"},[s("i",[t._v("⇧")]),t._v("学员追问\n                              ")]):t._e()]],2),t._v(" "),s("span",{staticClass:"ac-list-title-span"},[t._v(t._s(e.title))])]),t._v(" "),s("div",{staticClass:"flex-r"},[s("div",{staticClass:"post-time-wrap"},[t._v(t._s(t.webApi.formatDate(e.updateTime,"ALL"))),t.currentTime-e.updateTime>43200&&("0"==e.solve||"3"==e.solve)?s("div",{staticClass:"yujing-icon-wrap"},[s("i",{staticClass:"yujing-icon"})]):t._e()])])]),t._v(" "),s("p",{staticClass:"ac-list-desc"},[t._v(t._s(e.contentSummary))]),t._v(" "),s("div",{staticClass:"source-wrap-small"},[s("div",{staticClass:"source-wrap-mini"},[t._v("\n                          源自：\n                          "),"chapter"==e.taskType?s("span",{attrs:{title:e.courseName+" + "+e.chapterName}},[t._v(t._s(e.courseName)+" + "+t._s(e.chapterName))]):t._e(),t._v(" "),"video"==e.taskType?s("span",{attrs:{title:e.courseName+" + "+e.chapterName}},[t._v(t._s(e.courseName)+" + "+t._s(e.chapterName))]):t._e(),t._v(" "),"course"==e.taskType||""==e.taskType?s("span",{attrs:{title:e.courseName}},[t._v(t._s(e.courseName))]):t._e(),t._v(" "),"exam"==e.taskType?[e.sourcePath?s("span",{attrs:{title:e.sourcePath}},[t._v(t._s(e.sourcePath))]):s("span",{attrs:{title:e.courseName+" + "+e.chapterName+(e.taskCurrent?" + 第"+e.taskCurrent+"题":"")}},[t._v(t._s(e.courseName)+" + "+t._s(e.chapterName)+t._s(e.taskCurrent?" + 第"+e.taskCurrent+"题":""))])]:t._e()],2),t._v(" "),"-1"!=e.taskprogress&&" "!=e.taskType&&"video"==e.taskType&&e.courseId&&" "!=e.courseId&&e.chapterId&&" "!=e.chapterId&&e.taskId&&" "!=e.taskId&&t.webApi.formatType(e.taskType,e.taskprogress)?s("div",{staticClass:"ac-list-info-div"},[s("a",{staticClass:"ac-list-info-span ac-list-info-video",attrs:{href:"javascript:;"},on:{click:function(a){return t.checkVideoSource(e)}}},[s("i",{staticClass:"icon-wrap icon-source-video"}),t._v(" "),s("span",{staticClass:"ac-desc-video-time"},[t._v(t._s("-1"!=e.taskprogress&&" "!=e.taskType&&"video"==e.taskType&&e.courseId&&" "!=e.courseId&&e.chapterId&&" "!=e.chapterId&&e.taskId&&" "!=e.taskId?t.webApi.formatType(e.taskType,e.taskprogress):"")+" ")])])]):t._e(),t._v(" "),"exam"==e.taskType?s("div",{staticClass:"ac-list-info-div"},[s("div",{staticClass:"exam-wrap",on:{click:function(a){return t.checkExamSource(e)}}},[s("i",{staticClass:"icon-wrap icon-source-exam"}),s("span",{staticClass:"text-wrap"},[t._v("题目")])])]):t._e()])]),t._v(" "),s("div",{staticClass:"ac-list-info"},[s("p",{staticClass:"ac-list-info-user"},[s("img",{staticClass:"avatar",attrs:{src:t.host.img+e.headImg}}),s("span",{staticClass:"ac-list-info-span user-name"},[t._v(t._s(e.nikeName))])]),t._v(" "),s("ul",{staticClass:"ac-list-info-ul"},[s("li",{staticClass:"ac-list-info-li"},[s("span",{staticClass:"ac-list-info-span"},[s("i",{staticClass:"iconfont icon-duihua"}),s("span",{staticClass:"ac-list-info-discuss-num"},[t._v(t._s(e.replyCount?e.replyCount:0)+"条评论")])])])])])])])}),t._v(" "),s("div",{staticClass:"text-count"},[t._v("\n                  ∗当页查询到"+t._s(t.exchangeListData.data.length)+"个问题，共查询到"+t._s(t.exchangeListData.totalCount)+"个问题\n                ")]),t._v(" "),s("div",{staticClass:"pagination-wrap"},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.pageNo,pageSize:t.pageSize,total:t.exchangeListData.totalCount?t.exchangeListData.totalCount:0},on:{"current-change":t.sizeChange}})],1)],2)])])],1):s("iLoading")],1)]),t._v(" "),this.webApi.isEmpty(t.exchangeListData.data)?t._e():s("el-main",{staticClass:"exchangeDetail-wrap-el-main",staticStyle:{background:"none"}},[s("div",{staticClass:"ac-right"},[s("exchangeDetail",{attrs:{exchangeData:t.firstOpen&&t.exchangeListData.data?t.exchangeListData.data[0]:t.exchangeDetailData},on:{toAnswer:t.toAnswer,hasAnswered:t.hasAnswered}})],1)])],1)],1),t._v(" "),t.showVideoSource?s("div",{staticClass:"video-player-wrap"},[s("div",{staticClass:"v-p-w-content"},[s("div",{staticClass:"video-title"},[t._v("问题来源\n        "),s("i",{staticClass:"close-btn",on:{click:t.closeVideo}})]),t._v(" "),s("div",{staticClass:"video-wrap"},[s("videoPlayer",{attrs:{videoParams:t.videoParams}})],1)])]):t._e(),t._v(" "),t.showExamSource?s("examSource",{attrs:{examParams:t.examParams},on:{closeExam:t.closeExamPop}}):t._e(),t._v(" "),t.showChapterSource?s("chapterSource",{attrs:{chapterParams:t.chapterParams},on:{closeChapter:t.closeChapterPop}}):t._e(),t._v(" "),t.showSelectChapter?s("selectChapter",{attrs:{courseId:t.curCourseId,myChapterId:t.myChapterId,selectChapterId:t.selectChapterId},on:{cancelSelectChapter:t.cancelSChapter,okSelectChapter:t.okSChapter}}):t._e()],1)},staticRenderFns:[]};var gt=a("C7Lr")(ft,vt,!1,function(t){a("X3tG")},null,null).exports,Ct=a("iDk4"),bt={name:"aqReportGather",components:{iHeader:Ct.a},computed:u()({},Object(x.d)({}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}}),data:function(){return{dataShow:[0,0,0,0],dataHide:[0,0,0,0],days:"0",start_time:"",end_time:"",selectDay:"0",askTime:null,dialogVisible:!1,getDataNum:"",pickerOptions0:{disabledDate:function(t){return t.getTime()>Date.now()}},dayList:[{label:"今天",value:"0"},{label:"最近三天",value:"3"},{label:"最近七天",value:"7"},{label:"最近一月",value:"30"},{label:"整体报告",value:"all"},{label:"自定义",value:"userDefined"}]}},mounted:function(){this.getCount()},watch:{days:function(){}},methods:{changeAskTime:function(){null==this.askTime?(this.start_time="",this.end_time=""):(this.start_time=this.askTime[0],this.end_time=this.askTime[1]),this.getCount()},getCount:function(){var t=this;y.a.ajax("teacherBbsCount",{token:this.techLoginInfo.token,days:this.days,startDate:this.start_time,endDate:this.end_time}).then(function(e){if(e&&"success"==e.state){var a=e.data;t.getDataNum=a,t.dataShow=[a.all_count,a.resolved,a.unanswered+a.asked,a.replied],t.drawPie()}})},selectDayFunc:function(t){"all"!==t&&"userDefined"!==t?(this.askTime=null,this.start_time="",this.end_time="",this.days=t,this.getCount()):"all"==t?(this.days="",this.askTime=null,this.start_time="",this.end_time="",this.getCount()):(this.days="",this.dialogVisible=!0)},drawPie:function(){this.chartPie=k.a.init(document.getElementById("pieId")),this.chartPie.setOption({xAxis:{type:"category",splitLine:{show:!1},data:["问题总数","已解决","学员追问未回复","已回复未解决"]},yAxis:{type:"value",name:"问题数量"},itemStyle:{color:"#4F76C6"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},series:[{data:this.dataShow,type:"bar",stack:"总量",barWidth:84,label:{show:!0,position:"inside"}}]})}}},_t={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app",attrs:{id:"app"}},[a("div",{staticClass:"aqReportGather-wrap"},[a("el-container",[a("el-header",[a("iHeader")],1),t._v(" "),a("el-main",[a("div",{staticClass:"aqReportGather-content"},[a("div",{staticClass:"title"},[a("div",{staticClass:"title-content"},[a("i",{staticClass:"huizong-icon"}),t._v("汇总报告\n            ")])]),t._v(" "),a("div",{staticClass:"content-wrap"},[a("div",{staticClass:"content"},[a("div",{staticClass:"select-time-wrap"},[a("div",{staticClass:"select-time-wrap-left"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectDay,callback:function(e){t.selectDay=e},expression:"selectDay"}},t._l(t.dayList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value},nativeOn:{click:function(a){return t.selectDayFunc(e.value)}}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.label))])])}),1)],1),t._v(" "),a("div",{staticClass:"select-time-wrap-right"},[t._v("更新时间："+t._s(t.webApi.formatDate((new Date).getTime()/1e3,"ALL").slice(0,15)+"00"))])]),t._v(" "),a("p",{staticClass:"great-p"},[t._v("\n                尊敬的老师，您好！"),a("br"),t._v("以下数据为您最新的问题汇总报告情况\n              ")]),t._v(" "),a("div",{staticClass:"total-num-wrap"},[a("span",{staticClass:"mr-20"},[t._v("总答疑数："+t._s(t.getDataNum.all_count))]),a("span",{staticClass:"mr-20"},[t._v("已解决："+t._s(t.getDataNum.resolved))]),a("span",{staticClass:"mr-20"},[t._v("学员追问未回复："+t._s(t.getDataNum.unanswered+t.getDataNum.asked))]),a("span",{staticClass:"mr-20"},[t._v("已回复未解决："+t._s(t.getDataNum.replied))]),a("span",{staticClass:"mr-20"},[t._v("获星数："+t._s(t.getDataNum.grade_count))])]),t._v(" "),a("div",{staticClass:"echart-wrap"},[a("div",{staticClass:"pieId",attrs:{id:"pieId"}}),t._v(" "),a("p",{staticClass:"echart-nam"},[t._v("问题答疑情况图表示例")])])])])])])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"请选择日期范围",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","range-separator":"至",size:"mini","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","picker-options":t.pickerOptions0,"end-placeholder":"结束日期"},on:{change:function(e){return t.changeAskTime()}},model:{value:t.askTime,callback:function(e){t.askTime=e},expression:"askTime"}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var xt=a("C7Lr")(bt,_t,!1,function(t){a("PLJL")},null,null).exports,yt=a("4er+"),wt={name:"classCenter",components:{iHeader:Ct.a},methods:{getRouter:function(){var t,e=this.$route.path;return e=(t=e.split("/")).length>2?t[2]:"/"+t[1]},changeRouter:function(t){this.$router.push({path:"/classCenter"+t+this.$route.params.classId})}}},kt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app classCenter-wrap",attrs:{id:"app"}},[a("el-container",{staticClass:"classCenter-wrap-container-wrap"},[a("el-header",[a("iHeader")],1),t._v(" "),a("el-container",{staticClass:"classCenter-wrap-container"},[a("el-aside",{staticClass:"classCenter-wrap-aside",attrs:{width:"160px"}},[a("ul",{staticClass:"menu-wrap-ul"},[a("li",{staticClass:"menu-wrap-li"},[a("div",{staticClass:"menu-title"},[t._v("班级课表")]),t._v(" "),a("ul",{staticClass:"menu-ul"},[a("li",{staticClass:"menu-li",class:["classCenterIndex"==t.getRouter()?"active":""],on:{click:function(e){return t.changeRouter("/classCenterIndex/")}}},[t._v("班级课表")])])]),t._v(" "),a("li",{staticClass:"menu-wrap-li"},[a("div",{staticClass:"menu-title"},[t._v("数据统计")]),t._v(" "),a("ul",{staticClass:"menu-ul"},[a("li",{staticClass:"menu-li",class:["dataStatisticsAq"==t.getRouter()?"active":""],on:{click:function(e){return t.changeRouter("/dataStatisticsAq/")}}},[t._v("答疑辅导统计")]),t._v(" "),a("li",{staticClass:"menu-li",class:["dataStatisticsExam"==t.getRouter()?"active":""],on:{click:function(e){return t.changeRouter("/dataStatisticsExam/")}}},[t._v("作业统计")])])])])]),t._v(" "),a("el-main",[a("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var It=a("C7Lr")(wt,kt,!1,function(t){a("fCST")},null,null).exports,St={name:"examStatistics",components:{iHeader:Ct.a,iScroll:f},computed:u()({},Object(x.d)({}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}}),watch:{checkList:function(t){this.getExamListByName()}},data:function(){return{className:"acca-班级",studentName:"",allChecked:!1,checkList:"",str:"12341",showPopupWrap:!1,dialogVisible:!1,message:"",envType:parseInt(this.cookie.get("envType")),routeParams:this.$route.params,examInfo:"",showIfame:!1,frameSrc:"",tableData:[],scrollRefresh:!1,selectStudent:"",receiveIds:""}},mounted:function(){this.getExamList(),this.getExportExcelUrl()},methods:{handleIconClick:function(){this.getExamListByName(),this.studentName=""},previewErrorQ:function(t){var e=this;if(!t||0==t.length)return this.webApi.alert("此学员暂无错题记录"),!1;var a="";a="1"==this.envType?"http://elearningdemo.zbgedu.com":"http://elearning.zbgedu.com";var s=[];t.forEach(function(t){s.push(t.exerciseId)});var i=s.join();this.frameSrc=a+"/#showAnswer?exerciseIds="+i,this.showPopupWrap=!0,setTimeout(function(){e.showIfame=!0},1e3)},closePreviewPopup:function(){this.showPopupWrap=!1},getExportExcelUrl:function(){var t="";t="1"==this.envType?"https://apidemo.zbgedu.com":"https://api.zbgedu.com",this.str=t+"/api/edu/userAction/examen/exportTestCount?verTT="+(new Date).getTime()+"&token="+this.techLoginInfo.token+"&classId="+this.routeParams.classId+"&examId="+this.routeParams.examenId+"&courseArrangeDetailId="+this.routeParams.courseArrangeId+"&pageSize=1000&pageNum=1"},exportExcel:function(){y.a.ajax("exportTestCount",{token:this.techLoginInfo.token,classId:this.routeParams.classId,examId:this.routeParams.examenId,courseArrangeDetailId:this.routeParams.courseArrangeId,pageSize:1e3,pageNum:1},{responseType:"blob"}).then(function(t){if(t&&"success"==t.state){var e=new Blob([t],{type:"application/vnd.ms-excel"}),a=URL.createObjectURL(e);window.location.href=a}})},handleSelectionChange:function(t){this.selectStudent=t},allCheck:function(t){this.toggleSelection(this.tableData)},getExamList:function(){var t=this;y.a.ajax("getExamStatistics",{token:this.techLoginInfo.token,classId:this.routeParams.classId,examId:this.routeParams.examenId,courseArrangeDetailId:this.routeParams.courseArrangeId,pageSize:1e3,pageNum:1}).then(function(e){e&&"success"==e.state&&(t.examInfo=e.data,t.tableData=e.data.queryList)})},getExamListByName:function(){var t=this;y.a.ajax("getTestCountCondition",{token:this.techLoginInfo.token,classId:this.routeParams.classId,examId:this.routeParams.examenId,courseArrangeDetailId:this.routeParams.courseArrangeId,userName:this.studentName,finishd:this.checkList,pageSize:1e3,pageNum:1}).then(function(e){e&&"success"==e.state&&(t.tableData=e.data.queryList)})},toggleSelection:function(t){var e=this;t?(t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t,!e.allSelect)}),this.allSelect=!this.allSelect):this.$refs.multipleTable.clearSelection()},sendMessage:function(){if(0!=this.selectStudent.length){var t=[];this.selectStudent.forEach(function(e){t.push(e.memberId)}),this.receiveIds=t.join(","),this.message='同学您好！您的"'+this.routeParams.className+'"的"'+this.examInfo.examTitle+'"任务尚未完成！请尽快完成哦！',this.dialogVisible=!0}else this.webApi.alert("请至少选中一个学生～")},replay:function(){var t=this,e=this.$refs.replayContent.value;e?y.a.ajax("insertMessage",{sendId:this.techLoginInfo.id,textTitle:"通知",text:e,type:0,author:this.techLoginInfo.nickName,receiveIds:this.receiveIds}).then(function(e){e&&"success"==e.state?(t.webApi.alert("发送成功～"),t.dialogVisible=!1):t.webApi.alert(e.msg)}):this.webApi.alert("请输入通知内容！")}}},Tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app",attrs:{id:"app"}},[a("div",{staticClass:"examStatistics-wrap"},[a("el-container",[a("el-header",[a("iHeader")],1),t._v(" "),a("el-main",[a("div",{staticClass:"examStatistics-content"},[a("div",{staticClass:"title-wrap"},[a("div",{staticClass:"title-left"},[t._v("当前位置："+t._s(t.routeParams.className)+">课表>测评统计")]),t._v(" "),a("div",{staticClass:"title-right"},[a("a",{staticClass:"button-a",attrs:{href:t.str,download:"教学中心"}},[t._v("导出表格")])])]),t._v(" "),a("div",{staticClass:"name-wrap"},[a("span",{staticClass:"name-content"},[t._v("测评名称："+t._s(t.examInfo.examTitle))]),t._v(" "),a("span",{staticClass:"span1"},[t._v("题目数量：共"+t._s(t.examInfo.exerciesCount)+"题")]),t._v(" "),a("span",{staticClass:"span1"},[t._v("测评时间："+t._s(t.examInfo.createDate))]),t._v(" "),a("span",{staticClass:"span2"},[t._v("完成情况："+t._s(t.examInfo.submintStuCount)+"/"+t._s(t.examInfo.allStuCount)+"人")])]),t._v(" "),a("div",{staticClass:"table-wrap"},[a("div",{staticClass:"table-title-wrap"},[a("el-input",{attrs:{placeholder:"请输入用户名/姓名搜索"},model:{value:t.studentName,callback:function(e){t.studentName=e},expression:"studentName"}},[a("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},on:{click:t.handleIconClick},slot:"suffix"})]),t._v(" "),a("el-checkbox-group",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},[a("el-checkbox",{attrs:{"false-label":"","true-label":"0",name:"state"}},[t._v("未完成")]),t._v(" "),a("el-checkbox",{attrs:{"false-label":"","true-label":"1",name:"state"}},[t._v("已完成")])],1)],1),t._v(" "),a("div",{staticClass:"table-content"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"loginName",label:"用户名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"realName",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"isFinishName",label:"完成情况"}}),t._v(" "),a("el-table-column",{attrs:{label:"答错/答对题数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.allCount-e.row.rightCount)+"/"+t._s(e.row.rightCount)+"题数")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"accuracy",label:"正确率"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticStyle:{color:"#ff366d"},attrs:{href:"javascript:;"},on:{click:function(a){return t.previewErrorQ(e.row.errorExercisesList)}}},[t._v("错题预览")])]}}])})],1),t._v(" "),t.webApi.isEmpty(t.tableData)?t._e():a("div",{staticClass:"opreating-wrap"},[a("el-checkbox",{on:{change:function(e){return t.allCheck()}},model:{value:t.allChecked,callback:function(e){t.allChecked=e},expression:"allChecked"}},[t._v("全选")]),t._v(" "),a("p",{staticClass:"send-msg",on:{click:t.sendMessage}},[t._v("发送通知")])],1)],1)])]),t._v(" "),t.showPopupWrap?a("div",{staticClass:"popup-wrap"},[a("div",{staticClass:"popup-box"},[a("div",{staticClass:"popup-content-wrap"},[a("div",{staticClass:"title"},[t._v("错题预览")]),t._v(" "),a("div",{staticClass:"popup-content"},[t.showIfame?a("iframe",{attrs:{src:t.frameSrc,width:"100%",height:"100%",frameborder:"0"}}):t._e()])]),t._v(" "),a("div",{staticClass:"close-btn",on:{click:t.closePreviewPopup}},[a("i",{staticClass:"el-icon-close"})])])]):t._e()])],1),t._v(" "),a("el-dialog",{attrs:{title:"发送通知",visible:t.dialogVisible,width:"40%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],ref:"replayContent",staticClass:"replay-content",domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.replay()}}},[t._v("发送")])],1)])],1)])},staticRenderFns:[]};var Dt=a("C7Lr")(St,Tt,!1,function(t){a("LyZf")},null,null).exports,Pt={name:"testpaperAnalysis",components:{iHeader:Ct.a,iLoading:_,examSource:U},computed:u()({},Object(x.d)({}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}}),data:function(){return{className:"",studentName:"",allChecked:!1,dialogVisible:!1,examInfo:"",examDetail:"",examParams:"",urlStr:"",envType:parseInt(this.cookie.get("envType")),routeParams:this.$route.params,tableData:[],showExamSource:!1}},mounted:function(){this.getTestList(),this.getExportExcelUrl(),this.getTaskInfo()},methods:{handleIconClick:function(){console.log("111")},cheakExam:function(t){this.examParams=t,this.showExamSource=!0},handleSelectionChange:function(t){},closeExamPop:function(){this.showExamSource=!1},getExportExcelUrl:function(){var t="";t="1"==this.envType?"https://apidemo.zbgedu.com":"https://api.zbgedu.com",console.log(t),this.urlStr=t+"/api/edu/userAction/examen/exportUserExerciseAllRecord?verTT="+(new Date).getTime()+"&token="+this.techLoginInfo.token+"&classId="+this.routeParams.classId+"&examId="+this.routeParams.examenId+"&pageSize=1000&pageNum=1"},getTaskInfo:function(){var t=this;console.log(this.$route.params),y.a.ajax("getTaskInfoAndProgress",{token:this.techLoginInfo.token,taskId:this.$route.params.examenId}).then(function(e){e&&"success"==e.state?t.examDetail=e.data:t.webApi.alert(e.msg||"服务器异常，请稍后重试～")})},getTestList:function(){var t=this;y.a.ajax("getFaceStatisticsQuestionPageByTask",{token:this.techLoginInfo.token,classId:this.$route.params.classId,taskId:this.$route.params.examenId,pageSize:1e3,pageNum:1}).then(function(e){e&&"success"==e.state?(t.examInfo=e.data,t.tableData=e.data.result):(t.examInfo={},t.webApi.alert(e.msg||"服务器异常，请稍后重试～"))})},allCheck:function(t){this.toggleSelection(this.tableData)},toggleSelection:function(t){var e=this;t?(t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t,!e.allSelect)}),this.allSelect=!this.allSelect):this.$refs.multipleTable.clearSelection()},sendMessage:function(){this.dialogVisible=!0},replay:function(){}}},Et={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app",attrs:{id:"app"}},[a("div",{staticClass:"testpaperAnalysis-wrap"},[a("el-container",[a("el-header",[a("iHeader")],1),t._v(" "),a("el-main",[a("div",{staticClass:"testpaperAnalysis-content"},[a("div",{staticClass:"title-wrap"},[a("div",{staticClass:"title-left"},[t._v("当前位置："+t._s(this.$route.params.className)+">课表>卷面分析")]),t._v(" "),a("div",{staticClass:"title-right"},[a("a",{staticClass:"button-a",attrs:{href:t.urlStr,download:"教学中心"}},[t._v("导出表格")])])]),t._v(" "),t.examInfo?a("div",[a("div",{staticClass:"name-wrap"},[a("span",{staticClass:"name-content"},[t._v("测评名称："+t._s(t.examDetail.taskName))]),t._v(" "),a("span",{staticClass:"span1"},[t._v("题目数量：共"+t._s(t.examDetail.questionNum)+"题")]),t._v(" "),a("span",{staticClass:"span1"},[t._v("测评时间："+t._s(t.webApi.formatDate(t.examDetail.examenStartDate,"YMD")))])]),t._v(" "),a("div",{staticClass:"table-wrap"},[a("div",{staticClass:"table-content"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"questionSn",label:"题目编号"}}),t._v(" "),a("el-table-column",{attrs:{label:"题目标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{height:"22px",cursor:"pointer",color:"#ff366d"},domProps:{innerHTML:t._s(e.row.questionTitle)},on:{click:function(a){return t.cheakExam(e.row)}}})]}}],null,!1,129936200)}),t._v(" "),a("el-table-column",{attrs:{label:"完成情况"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.finishedNum)+"/"+t._s(e.row.totalNum)+"人数")]}}],null,!1,1686250798)}),t._v(" "),a("el-table-column",{attrs:{label:"完成率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.finishedRate)+"%")]}}],null,!1,1075928771)}),t._v(" "),a("el-table-column",{attrs:{label:"答错/答对人数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.falseNum)+"/"+t._s(e.row.trueNum)+"人数")]}}],null,!1,2463453781)}),t._v(" "),a("el-table-column",{attrs:{label:"正确率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.trueRate)+"%")]}}],null,!1,1330979239)})],1)],1)])]):a("div",[a("iLoading")],1),t._v(" "),t.showExamSource?a("examSource",{attrs:{examParams:t.examParams},on:{closeExam:t.closeExamPop}}):t._e()],1)])],1)],1)])},staticRenderFns:[]};var At=a("C7Lr")(Pt,Et,!1,function(t){a("gzDx")},null,null).exports,Lt={name:"faceTestpaperAnalysis",components:{iHeader:Ct.a,iLoading:_,examSource:U},computed:u()({},Object(x.d)({}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}}),data:function(){return{className:"",studentName:"",allChecked:!1,dialogVisible:!1,examInfo:"",examParams:"",urlStr:"",envType:parseInt(this.cookie.get("envType")),routeParams:this.$route.params,tableData:[],showExamSource:!1}},mounted:function(){this.getTestList(),this.getTaskInfo()},methods:{handleIconClick:function(){console.log("111")},exportExcel:function(){this.webApi.postExcelFile({token:this.techLoginInfo.token,classId:this.$route.params.classId,taskId:this.$route.params.examenId},("1"==this.envType?"https://apidemo.zbgedu.com":"https://zbapi.zbgedu.com")+"/api/study/userAction/statistics/faceCoursePaper/exportStatisticsFaceQuestion")},cheakExam:function(t){this.examParams=t,this.showExamSource=!0},handleSelectionChange:function(t){},closeExamPop:function(){this.showExamSource=!1},getTaskInfo:function(){var t=this;console.log(this.$route.params),y.a.ajax("getTaskInfoAndProgress",{token:this.techLoginInfo.token,taskId:this.$route.params.examenId}).then(function(e){e&&"success"==e.state?(t.examInfo=e.data,console.log(t.examInfo)):t.webApi.alert(e.msg||"服务器异常，请稍后重试～")})},getExportExcelUrl:function(){var t="";t="1"==this.envType?"https://apidemo.zbgedu.com":"https://api.zbgedu.com",console.log(t),this.urlStr=t+"/api/edu/userAction/examen/exportUserExerciseAllRecord?verTT="+(new Date).getTime()+"&token="+this.techLoginInfo.token+"&classId="+this.routeParams.classId+"&examId="+this.routeParams.examenId+"&pageSize=1000&pageNum=1"},getTestList:function(){var t=this;y.a.ajax("getFaceStatisticsQuestionPageByTask",{token:this.techLoginInfo.token,classId:this.$route.params.classId,taskId:this.$route.params.examenId,pageSize:1e3,pageNum:1}).then(function(e){e&&"success"==e.state?t.tableData=e.data.result:t.webApi.alert(e.msg||"服务器异常，请稍后重试～")})},allCheck:function(t){this.toggleSelection(this.tableData)},toggleSelection:function(t){var e=this;t?(t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t,!e.allSelect)}),this.allSelect=!this.allSelect):this.$refs.multipleTable.clearSelection()},sendMessage:function(){this.dialogVisible=!0},replay:function(){}}},Nt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app",attrs:{id:"app"}},[a("div",{staticClass:"faceTestpaperAnalysis-wrap"},[a("el-container",[a("el-header",[a("iHeader")],1),t._v(" "),a("el-main",[a("div",{staticClass:"testpaperAnalysis-content"},[a("div",{staticClass:"title-wrap"},[a("div",{staticClass:"title-left"},[t._v("当前位置："+t._s(this.$route.params.className)+">卷面分析")]),t._v(" "),a("div",{staticClass:"title-right"},[a("a",{staticClass:"button-a",on:{click:t.exportExcel}},[t._v("导出表格")])])]),t._v(" "),t.examInfo?a("div",[a("div",{staticClass:"name-wrap"},[a("span",{staticClass:"name-content"},[t._v("测评名称："+t._s(t.examInfo.taskName))]),t._v(" "),a("span",{staticClass:"span1"},[t._v("题目数量：共"+t._s(t.examInfo.questionNum)+"题")]),t._v(" "),a("span",{staticClass:"span1"},[t._v("测评时间："+t._s(t.examInfo.requireTime)+"分钟")])]),t._v(" "),a("div",{staticClass:"table-wrap"},[a("div",{staticClass:"table-content"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"questionSn",label:"题目编号"}}),t._v(" "),a("el-table-column",{attrs:{label:"题目标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{height:"22px",cursor:"pointer",color:"#ff366d"},domProps:{innerHTML:t._s(e.row.questionTitle)},on:{click:function(a){return t.cheakExam(e.row)}}})]}}],null,!1,129936200)}),t._v(" "),a("el-table-column",{attrs:{label:"完成情况"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.finishedNum)+"/"+t._s(e.row.totalNum)+"人数")]}}],null,!1,1686250798)}),t._v(" "),a("el-table-column",{attrs:{label:"完成率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.finishedRate)+"%")]}}],null,!1,1075928771)}),t._v(" "),a("el-table-column",{attrs:{label:"答错/答对人数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.falseNum)+"/"+t._s(e.row.trueNum)+"人数")]}}],null,!1,2463453781)}),t._v(" "),a("el-table-column",{attrs:{label:"正确率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.trueRate)+"%")]}}],null,!1,1330979239)})],1)],1)])]):a("div",[a("iLoading")],1),t._v(" "),t.showExamSource?a("examSource",{attrs:{examParams:t.examParams},on:{closeExam:t.closeExamPop}}):t._e()],1)])],1)],1)])},staticRenderFns:[]};var Rt=a("C7Lr")(Lt,Nt,!1,function(t){a("m9jO")},null,null).exports,zt={name:"studyExamReport",data:function(){return{urlSearch:{},questionAnswerReportData:""}},components:{iLoading:_},props:{studentInfo:{type:Object}},computed:u()({},Object(x.d)({envType:function(t){return t.global.envType}}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}}),mounted:function(){this.getReportData()},methods:{getArcConfig:function(){return[{size:99,color:"#fff6ef"},{size:90,color:"#ffffff"},{size:75,color:"#f2f2f2"},{size:73,color:"#ffffff"}]},getReportData:function(){var t=this;V.a.post("https://"+("1"==this.envType?"apitikudemo":"apitiku")+".zbgedu.com/interface/question/v1/selectTestPaperAnswerReport",{teacherToken:this.techLoginInfo.token,memberId:this.studentInfo.memberId||this.studentInfo.studentId,studentTestpaperId:this.studentInfo.studentTestPaperId}).then(function(e){e&&"success"==e.state?(t.questionAnswerReportData=e.data,t.canvasExamresults(),t.canvasCorrectness(),t.canvasAnswertime()):t.webApi.alert("服务器异常，请稍后重试~")})},onCloseHistory:function(t){console.log(t),t.preventDefault(),this.props.onCloseHistory()},onParsingClickHandle:function(){var t=this,e=(new Date).getTime()+18e5,a=(new Date(e),window.location.hostname);/\.zbgedu\.com/.test(a)&&(a="zbgedu.com"),this.cookie.remove("zbgeduId");var s="mstiku";"1"==this.envType&&(s="mstikudemo"),y.a.ajax("getTaskInfoAndProgress",{token:this.techLoginInfo.token,taskId:this.questionAnswerReportData.taskId}).then(function(e){"success"==e.state?(t.frameUrl="https://"+s+".zbgedu.com/preview?question=paperInfoPreview&type="+(1==e.data.itemId?"acca":"cma")+"&value="+e.data.examenId+"&id="+t.techLoginInfo.token+"&agent=0",window.open(t.frameUrl)):t.$api.alert("服务器异常，请重试~")})},onParsingOfErrorClickHandle:function(){var t=this.questionAnswerReportData,e=this.techLoginInfo,a=e.token,s=e.memberId;t.checkErrorQuestion=1,t.id=t.testPaperId,this.webApi.source("exam",u()({},t,{token:a,memberId:s}))},canvasExamresults:function(){var t=document.getElementById("examresultsTwo");if(t){for(var e=t.getContext("2d"),a=2*Math.PI,s=this.getArcConfig(),i=0;i<s.length;i++){e.fillStyle=s[i].color,e.beginPath();var n=s[i].size;e.arc(110,110,n,0,a,!0),e.closePath(),e.fill()}var o=(this.questionAnswerReportData.answerScore/this.questionAnswerReportData.score).toFixed(0),r=Math.PI*(2*(1-o)),l=e.createLinearGradient(0,0,170,0);l.addColorStop("0","#fa742b"),l.addColorStop("1","#ffe985"),e.strokeStyle=l,e.lineCap="round",e.lineWidth=8,e.beginPath(),e.arc(110,110,60,r,0,!1),e.stroke()}},canvasCorrectness:function(){var t=document.getElementById("correctness2");if(t){var e=t.getContext("2d"),a=2*Math.PI,s=this.getArcConfig();s[0].color="#f3f8fe";for(var i=0;i<s.length;i++){e.fillStyle=s[i].color,e.beginPath();var n=s[i].size;e.arc(110,110,n,0,a,!0),e.closePath(),e.fill()}var o=((this.questionAnswerReportData.questionCount-this.questionAnswerReportData.misCount)/this.questionAnswerReportData.questionCount).toFixed(2);o="0.00"==o?1:o;var r=Math.PI*(2*(1-o)),l=e.createLinearGradient(0,0,170,0);l.addColorStop("0","#736efe"),l.addColorStop("0.75","#5efce8"),e.strokeStyle=l,e.lineCap="round",e.lineWidth=8,e.beginPath(),e.arc(110,110,60,r,0,!1),e.stroke()}},canvasAnswertime:function(){var t=document.getElementById("answertime2");if(t){var e=t.getContext("2d"),a=2*Math.PI,s=this.getArcConfig();s[0].color="#f3fcf5";for(var i=0;i<s.length;i++){e.fillStyle=s[i].color,e.beginPath();var n=s[i].size;e.arc(110,110,n,0,a,!0),e.closePath(),e.fill()}var o=2*Math.PI,r=e.createLinearGradient(0,0,170,0);r.addColorStop("0","#58cffb"),r.addColorStop("1","#f0ff00"),e.strokeStyle=r,e.lineCap="round",e.lineWidth=8,e.beginPath(),e.arc(110,110,60,o,0,!1),e.stroke()}}}},Ot={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AssessmentPropContainer"},[a("div",{directives:[{name:"show",rawName:"v-show",value:""==t.questionAnswerReportData,expression:"questionAnswerReportData==''"}]},[a("iLoading")],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.questionAnswerReportData,expression:"questionAnswerReportData"}],staticClass:"AssessmentMain"},[a("div",{staticClass:"AssessmentContainer"},[a("div",{staticClass:"AssessmentCanvas"},[a("div",{staticClass:"AssessmentCanvasItem"},[a("div",{staticClass:"AssessmentCanvasBox"},[a("canvas",{attrs:{id:"examresultsTwo",width:"220px",height:"220px"}}),t._v(" "),a("div",{staticClass:"AssessmentCanvasText"},[a("big",[t._v("\n                "+t._s(t.questionAnswerReportData.answerScore)+"\n              ")]),t._v(" "),a("span",[t._v("分")])],1)]),t._v(" "),a("h5",{staticClass:"AssessmentCanvasTitle"},[t._v("作答成绩")])]),t._v(" "),a("div",{staticClass:"AssessmentCanvasItem"},[a("div",{staticClass:"AssessmentCanvasBox"},[a("canvas",{attrs:{id:"correctness2",width:"220px",height:"220px"}}),t._v(" "),a("div",{staticClass:"AssessmentCanvasText"},[a("big",[t._v("\n                "+t._s(((t.questionAnswerReportData.questionCount-t.questionAnswerReportData.misCount)/t.questionAnswerReportData.questionCount*100).toFixed(0))+"\n              ")]),t._v(" "),a("span",[t._v("%")])],1)]),t._v(" "),a("h5",{staticClass:"AssessmentCanvasTitle"},[t._v("正确率")])]),t._v(" "),a("div",{staticClass:"AssessmentCanvasItem"},[a("div",{staticClass:"AssessmentCanvasBox"},[a("canvas",{attrs:{id:"answertime2",width:"220px",height:"220px"}}),t._v(" "),a("div",{staticClass:"AssessmentCanvasText"},[a("span",[t._v("\n                      "+t._s(Math.floor(t.questionAnswerReportData.totalTime/60))+"分"+t._s(t.questionAnswerReportData.totalTime%60)+"秒\n                  ")])])]),t._v(" "),a("h5",{staticClass:"AssessmentCanvasTitle"},[t._v("作答时间")])])]),t._v(" "),a("div",{staticClass:"AssessmentResult"},[t._m(0),t._v(" "),a("div",{staticClass:"AssessmentResultContainer"},t._l(t.questionAnswerReportData.questionAnswerList,function(e,s){return a("span",{class:["AssessmentResultItem",e.correctFlag?"AssessmentResultItemCorrect":"AssessmentResultItemError"]},[t._v(t._s(s+1))])}),0)]),t._v(" "),a("div",{staticClass:"AssessmentButtonGroup"},[a("button",{staticClass:"abtn1",on:{click:t.onParsingClickHandle}},[t._v("查看解析")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"AssessmentResultTitle"},[e("span",{staticClass:"AssessmentResultTitleItem"},[e("span",{staticClass:"AssessmentResultTitleBlock AssessmentResultTitleCorrect"}),this._v(" "),e("span",{staticClass:"AssessmentResultTitleText"},[this._v("正确")])]),this._v(" "),e("span",{staticClass:"AssessmentResultTitleItem"},[e("span",{staticClass:"AssessmentResultTitleBlock AssessmentResultTitleRrror"}),this._v(" "),e("span",{staticClass:"AssessmentResultTitleText"},[this._v("错误")])])])}]};var jt=a("C7Lr")(zt,Ot,!1,function(t){a("E3OY")},null,null).exports,Ft={name:"faceCompletion",components:{iHeader:Ct.a,iLoading:_,examSource:U,studyExamReport:jt},computed:u()({},Object(x.d)({}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}}),data:function(){return{className:"",typeOptions:[{name:"全部",value:""},{name:"已完成",value:"1"},{name:"未完成",value:"0"},{name:"未开始",value:"-1"}],studentName:"",minPercent:"",maxPercent:"",allChecked:!1,dialogVisible:!1,dialogHistory:!1,dialogReport:!1,totalRecord:0,pageSize:20,selectStudent:"",examInfo:"",historyData:[],isLoading:!1,searchText:"",status:"",message:"",examParams:"",selectNameType:"1",urlStr:"",taskInfo:"",envType:parseInt(this.cookie.get("envType")),routeParams:this.$route.params,tableData:[],showExamSource:!1}},mounted:function(){this.getTableData(),this.getTaskInfo()},methods:{handleIconClick:function(){console.log("111")},handleSelectionChange:function(t){this.selectStudent=t},changeType:function(){this.getTableData()},sortChange:function(t){this.currentPage=1},checkHistory:function(t){this.historyStudent=t,this.dialogHistory=!0,this.getHistoryData()},handleSizeChange:function(t){this.pageSize=t,this.currentPage=1,this.getTableData()},sizeChange:function(t){this.currentPage=t,this.getTableData()},checkReport:function(t){this.clickStudent=t,this.dialogReport=!0},getHistoryData:function(){var t=this;V.a.post("https://"+("1"==this.envType?"apitikudemo":"apitiku")+".zbgedu.com/manager/managerInterface/v1/studentTestPaperAnswerHistory",{teacherToken:this.techLoginInfo.token,studentId:this.historyStudent.memberId,testPaperId:this.historyStudent.testPaperId}).then(function(e){console.log(e),e&&"success"==e.state?t.historyData=e.data:t.webApi.alert("服务器异常，请稍后重试~")}).catch(function(e){t.webApi.alert(e.msg)})},exportExcel:function(){this.webApi.postExcelFile({token:this.techLoginInfo.token,classId:this.$route.params.classId,taskId:this.$route.params.examenId},("1"==this.envType?"https://apidemo.zbgedu.com":"https://zbapi.zbgedu.com")+"/api/study/userAction/statistics/faceCoursePaper/exportStatisticsFaceMemberPaper")},search:function(){this.currentPage=1,this.minPercent&&this.maxPercent&&Number(this.minPercent)>Number(this.maxPercent)?this.webApi.alert("正确率范围开始值不能大于结束值~"):this.getTableData()},cheakExam:function(t){this.examParams=t,this.showExamSource=!0},closeExamPop:function(){this.showExamSource=!1},getTableData:function(){var t=this;this.isLoading=!0;var e={token:this.techLoginInfo.token,classId:this.$route.params.classId,taskId:this.$route.params.examenId,taskState:this.status,trueRateBegin:this.minPercent,trueRateEnd:this.maxPercent,pageIndex:this.currentPage,pageSize:this.pageSize};"1"==this.selectNameType?e.memberNameLike=this.searchText:e.memberNicknameLike=this.searchText,y.a.ajax("getStatisticsFaceMemberPaperPage",e).then(function(e){"success"==e.state?(e.data.result.forEach(function(t){t.hasChildren=!0}),t.tableData=e.data.result,t.totalRecord=e.data.total):t.webApi.alert(e.msg||"服务器异常，请稍后重试～"),t.isLoading=!1})},getTaskInfo:function(){var t=this;y.a.ajax("getTaskInfoAndProgress",{token:this.techLoginInfo.token,taskId:this.$route.params.examenId}).then(function(e){e&&"success"==e.state?t.taskInfo=e.data:t.webApi.alert(e.msg||"服务器异常，请稍后重试～")})},getExportExcelUrl:function(){var t="";t="1"==this.envType?"https://apidemo.zbgedu.com":"https://api.zbgedu.com",console.log(t),this.urlStr=t+"/api/edu/userAction/examen/exportUserExerciseAllRecord?verTT="+(new Date).getTime()+"&token="+this.techLoginInfo.token+"&classId="+this.routeParams.classId+"&examId="+this.routeParams.examenId+"&pageSize=1000&pageNum=1"},allCheck:function(t){this.toggleSelection(this.tableData)},toggleSelection:function(t){var e=this;t?(t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t,!e.allSelect)}),this.allSelect=!this.allSelect):this.$refs.multipleTable.clearSelection()},sendMessage:function(){if(console.log(this.selectStudent),0!=this.selectStudent.length){var t=[];this.selectStudent.forEach(function(e){t.push(e.memberId)}),this.receiveIds=t.join(","),this.message='同学您好！您的"'+this.$route.params.className+'"的"'+this.taskInfo.taskName+'"任务尚未完成！请尽快完成哦！',this.dialogVisible=!0}else this.webApi.alert("请至少选中一个学生～")},replay:function(){var t=this,e=this.$refs.replayContent.value;e?y.a.ajax("insertMessage",{sendId:this.techLoginInfo.id,textTitle:"通知",text:e,type:0,author:this.techLoginInfo.nickName,receiveIds:this.receiveIds}).then(function(e){e&&"success"==e.state?(t.webApi.alert("发送成功～"),t.dialogVisible=!1):t.webApi.alert(e.msg)}):this.webApi.alert("请输入通知内容！")}}},Mt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app",attrs:{id:"app"}},[a("div",{staticClass:"faceCompletion-wrap"},[a("el-container",[a("el-header",[a("iHeader")],1),t._v(" "),a("el-main",[a("div",{staticClass:"faceCompletion-content"},[a("div",{staticClass:"youboCompletion-title"},[a("span",{staticClass:"goBack"},[t._v(t._s(this.$route.params.className)+">完成情况")]),t._v(" "),a("span",{staticClass:"export-btn",on:{click:t.exportExcel}},[t._v("导出表格")])]),t._v(" "),a("div",{staticClass:"ybc-content"},[a("div",{staticClass:"exam-title"},[t._v(t._s(t.taskInfo.taskName))]),t._v(" "),a("div",{staticClass:"filter-wrap"},[a("div",{staticClass:"fw-left"},[a("span",{staticClass:"mr20"},[t._v("题目数量：共"+t._s(t.taskInfo.questionNum)+"题")]),0!=t.taskInfo.examenStartDate&&""!=t.taskInfo.examenStartDate?a("span",{staticClass:"mr20"},[t._v("发布时间："+t._s(t.webApi.formatDate(t.taskInfo.examenStartDate,"YMD")))]):t._e()]),t._v(" "),a("div",{staticClass:"fw-right"},[a("div",{staticClass:"name-input"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入"+("1"==t.selectNameType?"姓名":"用户名")},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择姓名/用户名"},slot:"prepend",model:{value:t.selectNameType,callback:function(e){t.selectNameType=e},expression:"selectNameType"}},[a("el-option",{attrs:{label:"姓名",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"用户名",value:"2"}})],1),t._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.search},slot:"append"})],1)],1),t._v(" "),a("div",{staticClass:"type-select"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeType},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.typeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}),1)],1),t._v(" "),a("el-input",{attrs:{placeholder:"正确率"},model:{value:t.minPercent,callback:function(e){t.minPercent=e},expression:"minPercent"}},[a("template",{slot:"append"},[t._v("%")])],2),t._v("至\n                    "),a("el-input",{attrs:{placeholder:"正确率"},model:{value:t.maxPercent,callback:function(e){t.maxPercent=e},expression:"maxPercent"}},[a("template",{slot:"append"},[t._v("%")])],2),t._v(" "),a("span",{staticClass:"clear-button",on:{click:t.search}},[t._v("搜索")])],1)]),t._v(" "),a("div",{staticClass:"table-wrap"},[a("div",{staticClass:"table-content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tree-props":{children:"children",hasChildren:"hasChildren"},stripe:"",lazy:""},on:{"selection-change":t.handleSelectionChange,"sort-change":t.sortChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"用户名",prop:"memberNickname"}}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"memberName"}}),t._v(" "),a("el-table-column",{attrs:{label:"提交时间",width:"180",prop:"submitDate"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.submitDate?t.webApi.formatDate(e.row.submitDate,"ALL"):"--"))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"完成情况",prop:"taskState"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("-1"==e.row.taskState?"未开始":"0"==e.row.taskState?"未完成":"已完成"))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"答对题数/总题数",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.trueNum+"/"+e.row.totalNum))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"正确率",prop:"trueRate"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("-1"==e.row.trueRate?"--":e.row.trueRate+"%"))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.taskState?[a("span",{staticClass:"button-b",on:{click:function(a){return t.checkReport(e.row)}}},[t._v("查看报告")]),t._v(" "),a("span",{staticClass:"button-b",on:{click:function(a){return t.checkHistory(e.row)}}},[t._v("做题记录")])]:[t._v("\n                          ----\n                        ")]]}}])})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-checkbox",{on:{change:function(e){return t.allCheck()}},model:{value:t.allChecked,callback:function(e){t.allChecked=e},expression:"allChecked"}},[t._v("全选")]),t._v(" "),a("span",{staticClass:"send-msg",on:{click:t.sendMessage}},[t._v("发送通知")])],1),t._v(" "),a("div",{staticClass:"pagination-wrap"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, sizes, total","current-page":t.currentPage,pageSize:t.pageSize,total:t.totalRecord},on:{"current-change":t.sizeChange,"size-change":t.handleSizeChange,"prev-click":t.prevSize,"next-click":t.nextSize}})],1)],1),t._v(" "),a("div",{staticClass:"table-bottom"}),t._v(" "),a("el-dialog",{attrs:{title:"发送通知",visible:t.dialogVisible,width:"40%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],ref:"replayContent",staticClass:"replay-content",domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.replay()}}},[t._v("发送")])],1)]),t._v(" "),a("el-dialog",{staticClass:"history-dialog",attrs:{title:"做题记录",visible:t.dialogHistory,width:"80%",center:""},on:{"update:visible":function(e){t.dialogHistory=e}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],ref:"historyTable",attrs:{data:t.historyData,height:"80%",stripe:""}},[a("el-table-column",{attrs:{label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"用户名"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.historyStudent.memberNickname))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.historyStudent.memberName))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"提交时间",prop:"submitDate"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.answerTime?t.webApi.formatDate(e.row.answerTime,"ALL"):"--"))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"完成情况",prop:"taskState"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("-1"==e.row.taskState?"未开始":"0"==e.row.taskState?"未完成":"已完成"))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"答对题数/总题数",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.questionCount-e.row.misCount+"/"+e.row.questionCount))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"正确率",prop:"trueRate"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(Math.round((e.row.questionCount-e.row.misCount)/e.row.questionCount*1e4)/100+"%"))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"button-b",on:{click:function(a){return t.checkReport(e.row)}}},[t._v("查看报告")])]}}])})],1)],1),t._v(" "),t.dialogReport?a("div",[a("el-dialog",{attrs:{title:"学习报告",visible:t.dialogReport,width:"80%",center:""},on:{"update:visible":function(e){t.dialogReport=e}}},[a("studyExamReport",{attrs:{studentInfo:t.clickStudent}})],1)],1):t._e()],1)]),t._v(" "),t.showExamSource?a("examSource",{attrs:{examParams:t.examParams},on:{closeExam:t.closeExamPop}}):t._e()],1)])],1)],1)])},staticRenderFns:[]};var $t=a("C7Lr")(Ft,Mt,!1,function(t){a("YbYc")},null,null).exports,qt={name:"classCenterHeader",components:{iLoading:_},props:{classId:""},data:function(){return{classDetailInfo:""}},mounted:function(){this.getClassDetail()},computed:u()({},Object(x.d)({host:function(t){return t.global.host}}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}}),methods:{getClassDetail:function(){var t=this;y.a.ajax("queryCourseDetail",{token:this.techLoginInfo.token,courseArrangeId:this.classId}).then(function(e){e&&"success"==e.state?(t.classDetailInfo=e.data,t.$emit("returnDetailInfo",t.classDetailInfo)):(t.classDetailInfo={},t.webApi.alert(e.msg||"服务器异常，请稍后重试～"))})}}},Bt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"classCenterHeader-wrap"},[t.classDetailInfo?[a("div",{staticClass:"img-wrap"},[a("img",{staticClass:"course-img",attrs:{src:t.classDetailInfo.coverPath?t.host.img+t.classDetailInfo.coverPath:"/static/classImg.png",alt:"课程封面图片"}})]),t._v(" "),a("div",{staticClass:"title-right"},[a("p",{staticClass:"course-p"},[t._v(t._s(t.classDetailInfo.courseplanName))]),t._v(" "),a("p",{staticClass:"subject-name-p"},[t._v("项目-科目："+t._s(t.classDetailInfo.itemName+"-"+t.classDetailInfo.courseCategoryName))]),t._v(" "),a("p",{staticClass:"teacher-p"},[t._v("讲师："+t._s(t.classDetailInfo.realNames))])])]:[a("iLoading")]],2)},staticRenderFns:[]};var Ut=a("C7Lr")(qt,Bt,!1,function(t){a("eb7g")},null,null).exports,Wt={name:"aqStatistics",components:{iScroll:f,exchangeDeatail:lt,iPagination:pt,multipleSearchInput:mt,iLoading:_,videoPlayer:$},data:function(){return{allType:[{name:"未回复",value:"0"},{name:"学员追问",value:"3"},{name:"已回复",value:"2"},{name:"已解决",value:"1"}],type:0,askTime:null,start_time:"",currentTime:"",isWarning:!1,scrollRefresh:!1,scrollRefresh1:!1,end_time:"",pickerOptions0:{disabledDate:function(t){return t.getTime()>Date.now()}},time:"",aqData:"",selectObj:"",pageNo:1,pageSize:20,keyWords:"",exchangeListData:"",exchangeData:{},showVideoSource:!1,showExamDeatailModal:!1}},computed:u()({},Object(x.d)({host:function(t){return t.global.host}}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}}),mounted:function(){if(this.currentTime=Date.parse(new Date)/1e3,this.webApi.getUrlKey("type")){var t=this.webApi.getUrlKey("type");this.type=0==t?1:1==t?0:t}this.getCount(),this.getExchangeListAjax()},methods:{checkVideoSource:function(t){this.showVideoSource=!0,this.sourceParams=t},closeVideo:function(){this.showVideoSource=!1},checkExamSource:function(t){var e=this,a=(new Date).getTime()+18e5,s=(new Date(a),window.location.hostname);/\.zbgedu\.com/.test(s)&&(s="zbgedu.com"),this.cookie.remove("zbgeduId");var i="mstiku";"1"==this.envType&&(i="mstikudemo"),y.a.ajax("getTaskInfoAndProgress",{token:this.techLoginInfo.token,taskId:t.taskId}).then(function(t){"success"==t.state?(e.frameUrl="https://"+i+".zbgedu.com/preview?question=paperInfoPreview&type="+(1==t.data.itemId?"acca":"cma")+"&value="+t.data.examenId+"&id="+e.techLoginInfo.token+"&agent=0",window.open(e.frameUrl)):e.$api.alert("服务器异常，请重试~")})},openDetail:function(t){this.exchangeData=t,this.showExamDeatailModal=!0},close:function(){this.showExamDeatailModal=!1},search:function(t){console.log(t),this.selectObj=t,this.pageNo=1,this.getExchangeListAjax()},getExchangeListAjax:function(){var t=this;this.exchangeListData="",this.firstOpen=!0,this.exchangeDetailData={};var e=this.time,a={self:0,type:3,ordertype:5,pageNo:this.pageNo,pageSize:this.pageSize,subjectId:"",knowledge_node_path1:"",knowledge_node_path2:"",token:this.techLoginInfo.token,keyWords:"",classId:this.$route.params.classId,teaching_type:"",courseId:"",solve:this.type,start_time:this.start_time,end_time:this.end_time,taskType:"",time:e,chapterId:"",memberId:this.techLoginInfo.id};this.selectObj&&(1==this.selectObj.type?a.keyWords=this.selectObj.keyWords:2==this.selectObj.type||3==this.selectObj.type?a.studentId=this.selectObj.selectUser.memberId:(a.teacherId=this.selectObj.selectUser.memberId,a.is_teacher_answer=1)),y.a.ajax("bbslist",a).then(function(e){e&&"success"==e.state&&(t.exchangeListData=e,t.activeIndex=0,t.exchangeDetailData=e.data[0]?e.data[0]:{}),t.$nextTick(function(){t.scrollRefresh=!t.scrollRefresh})})},getCount:function(){var t=this;y.a.ajax("classBbsCount",{token:this.techLoginInfo.token,classId:this.$route.params.classId}).then(function(e){if(e&&"success"==e.state){var a=e.data;t.aqData=[{value:a.unanswered,name:"未回复"},{value:a.replied,name:"已回复"},{value:a.asked,name:"学员追问"},{value:a.resolved,name:"已解决"}],t.drawPie()}})},selectType:function(t){this.type=t.value,this.pageNo=1,this.getExchangeListAjax()},changeAskTime:function(){null==this.askTime?(this.start_time="",this.end_time=""):(this.start_time=this.askTime[0],this.end_time=this.askTime[1]),this.pageNo=1,this.getExchangeListAjax()},changeWarning:function(){this.isWarning?this.time="":this.time=12,this.isWarning=!this.isWarning,this.pageNo=1,this.type=0,this.getExchangeListAjax()},jumpPage:function(t){this.pageNo=t,this.getExchangeListAjax()},prevPage:function(){this.pageNo=this.pageNo-1,this.getExchangeListAjax()},pageNext:function(){this.pageNo=this.pageNo+1,this.getExchangeListAjax()},drawPie:function(){k.a.init(document.getElementById("aqPie")).setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"horizontal",x:"center",y:"bottom",data:["未回复","已回复","学员追问","已解决"]},color:["#F6B55A","#FC5A5F","#7BC16D","#3AA6FC"],series:[{name:"占比",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{normal:{show:!1},emphasis:{show:!0,textStyle:{fontSize:"10",fontWeight:"bold"}}},labelLine:{normal:{show:!0}},data:this.aqData}]})}}},Vt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"aqStatistics-wrap"},[a("div",{staticClass:"aq-title"},[t._v("\n    答疑数据统计\n  ")]),t._v(" "),a("div",{staticClass:"aq-content"},[t._m(0),t._v(" "),a("div",{staticClass:"content-right"},[a("div",{staticClass:"right-title"},[a("div",{staticClass:"r-t-left"},[a("ul",{staticClass:"type-ul"},t._l(t.allType,function(e,s){return a("li",{class:["type-li",e.value==t.type?"current":""],on:{click:function(a){return t.selectType(e)}}},[t._v(t._s(e.name))])}),0),t._v(" "),a("multipleSearchInput",{staticClass:"search-wrap",on:{search:t.search}}),t._v(" "),a("div",{staticClass:"date-wrap"},[a("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","range-separator":"至",size:"mini","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","picker-options":t.pickerOptions0,"end-placeholder":"结束日期"},on:{change:function(e){return t.changeAskTime()}},model:{value:t.askTime,callback:function(e){t.askTime=e},expression:"askTime"}})],1)],1),t._v(" "),a("div",{staticClass:"r-t-right"},[t.isWarning?a("i",{staticClass:"icon-yj"}):t._e(),a("span",{staticStyle:{cursor:"pointer"},on:{click:t.changeWarning}},[t._v("切换"+t._s(t.isWarning?"全部":"预警")+"问题")])])]),t._v(" "),a("div",{staticClass:"right-content"},[t.exchangeListData?[this.webApi.isEmpty(t.exchangeListData.data)?a("div",{staticClass:"no-data-wrap"},[t._m(1)]):a("iScroll",{attrs:{id:"exchangeManage","is-refresh":t.scrollRefresh}},[a("ul",{staticClass:"ac-list-ul"},[a("div",[t._l(t.exchangeListData.data,function(e,s){return a("li",{staticClass:"ac-list-li",class:[t.activeIndex==s?"active":""]},[a("div",{staticClass:"ac-list-a"},[a("a",{staticClass:"ac-list-li-content js-ac-list-active",attrs:{href:"javascript:;"},on:{click:function(a){return t.openDetail(e)}}},[a("div",{staticClass:"source-wrap"},[a("div",{staticClass:"source-wrap-small"},[a("div",{staticClass:"source-wrap-mini"},[t._v("\n                            源自：\n                            "),"chapter"==e.taskType?a("span",{attrs:{title:e.courseName+" + "+e.chapterName}},[t._v(t._s(e.courseName)+" + "+t._s(e.chapterName))]):t._e(),t._v(" "),"video"==e.taskType?a("span",{attrs:{title:e.courseName+" + "+e.chapterName}},[t._v(t._s(e.courseName)+" + "+t._s(e.chapterName))]):t._e(),t._v(" "),"course"==e.taskType||""==e.taskType?a("span",{attrs:{title:e.courseName}},[t._v(t._s(e.courseName))]):t._e(),t._v(" "),"exam"==e.taskType?[e.sourcePath?a("span",{attrs:{title:e.sourcePath}},[t._v(t._s(e.sourcePath))]):a("span",{attrs:{title:e.courseName+" + "+e.chapterName+(e.taskCurrent?" + 第"+e.taskCurrent+"题":"")}},[t._v(t._s(e.courseName)+" + "+t._s(e.chapterName)+t._s(e.taskCurrent?" + 第"+e.taskCurrent+"题":""))])]:t._e()],2),t._v(" "),"-1"!=e.taskprogress&&" "!=e.taskType&&"video"==e.taskType&&e.courseId&&" "!=e.courseId&&e.chapterId&&" "!=e.chapterId&&e.taskId&&" "!=e.taskId&&t.webApi.formatType(e.taskType,e.taskprogress)?a("div",{staticClass:"ac-list-info-div"},[a("a",{staticClass:"ac-list-info-span ac-list-info-video",attrs:{href:"javascript:;"},on:{click:function(a){return a.stopPropagation(),t.checkVideoSource(e)}}},[a("i",{staticClass:"icon-wrap icon-source-video"}),t._v(" "),a("span",{staticClass:"ac-desc-video-time"},[t._v(t._s("-1"!=e.taskprogress&&" "!=e.taskType&&"video"==e.taskType&&e.courseId&&" "!=e.courseId&&e.chapterId&&" "!=e.chapterId&&e.taskId&&" "!=e.taskId?t.webApi.formatType(e.taskType,e.taskprogress):"")+" ")])])]):t._e(),t._v(" "),"exam"==e.taskType?a("div",{staticClass:"ac-list-info-div"},[a("div",{staticClass:"exam-wrap",on:{click:function(a){return a.stopPropagation(),t.checkExamSource(e)}}},[a("i",{staticClass:"icon-wrap icon-source-exam"}),a("span",{staticClass:"text-wrap"},[t._v("题目")])])]):t._e()])]),t._v(" "),a("div",{staticClass:"ac-list-title"},[a("div",{staticClass:"flex-l"},[a("div",{staticClass:"iconWrap"},["1"==e.isProcessing?a("div",{staticClass:"chulizhong"}):["1"==e.solve?a("div",{staticClass:"hasResolve usual-style"},[a("i",[t._v("✓")]),t._v("已解决\n                              ")]):"0"==e.solve?a("div",{staticClass:"noAnswer usual-style"},[a("i",[t._v("?")]),t._v("未回复\n                              ")]):"2"==e.solve?a("div",{staticClass:"noResolve usual-style"},[a("i",[t._v("!")]),t._v("已回复\n                              ")]):"3"==e.solve?a("div",{staticClass:"question-closely usual-style"},[a("i",[t._v("⇧")]),t._v("学员追问\n                              ")]):t._e()]],2),t._v(" "),a("span",{staticClass:"ac-list-title-span"},[t._v(t._s(e.title))])]),t._v(" "),a("div",{staticClass:"flex-r"},[a("div",{staticClass:"post-time-wrap"},[t._v(t._s(t.webApi.formatDate(e.updateTime,"ALL"))),t.currentTime-e.updateTime>43200&&("0"==e.solve||"3"==e.solve)?a("div",{staticClass:"yujing-icon-wrap"},[a("i",{staticClass:"yujing-icon"})]):t._e()])])]),t._v(" "),a("p",{staticClass:"ac-list-desc"},[t._v(t._s(e.contentSummary))])]),t._v(" "),a("div",{staticClass:"ac-list-info"},[a("p",{staticClass:"ac-list-info-user"},[a("img",{staticClass:"avatar",attrs:{src:t.host.img+e.headImg}}),a("span",{staticClass:"ac-list-info-span user-name"},[t._v(t._s(e.nikeName))])]),t._v(" "),a("ul",{staticClass:"ac-list-info-ul"},[a("li",{staticClass:"ac-list-info-li"},[a("span",{staticClass:"ac-list-info-span"},[a("i",{staticClass:"iconfont icon-duihua"}),a("span",{staticClass:"ac-list-info-discuss-num"},[t._v(t._s(e.replyCount?e.replyCount:0)+"条评论")])])])])])])])}),t._v(" "),a("div",{staticClass:"text-count"},[t._v("\n                  ∗当页查询到"+t._s(t.exchangeListData.data.length)+"个问题，共查询到"+t._s(t.exchangeListData.totalCount)+"个问题\n                ")]),t._v(" "),a("iPagination",{attrs:{isRefresh:t.scrollRefresh1,pageNo:t.pageNo,pageSize:t.pageSize,totalCount:t.exchangeListData.totalCount?t.exchangeListData.totalCount:0},on:{pageChange:t.jumpPage,pagePrev:t.prevPage,pageNext:t.pageNext}})],2)])])]:a("div",{staticStyle:{"margin-top":"50px"}},[a("iLoading")],1)],2)])]),t._v(" "),t.showExamDeatailModal?a("div",{staticClass:"modal-wrap"},[a("div",{staticClass:"content-wrap"},[a("i",{staticClass:"close-btn",on:{click:t.close}}),t._v(" "),a("div",{staticClass:"content"},[a("exchangeDeatail",{attrs:{exchangeData:t.exchangeData,canClick:!0}})],1)])]):t._e(),t._v(" "),t.showVideoSource?a("div",{staticClass:"video-player-wrap"},[a("div",{staticClass:"v-p-w-content"},[a("div",{staticClass:"video-title"},[t._v("问题来源\n        "),a("i",{staticClass:"close-btn",on:{click:t.closeVideo}})]),t._v(" "),a("div",{staticClass:"video-wrap"},[a("videoPlayer",{attrs:{videoParams:t.sourceParams}})],1)])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-left"},[e("div",{staticClass:"aqPie",attrs:{id:"aqPie"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"no-data"},[e("div",{staticClass:"img-wrap"},[e("img",{staticClass:"img-no",attrs:{src:a("a4/I"),alt:"暂无内容"}})]),this._v(" "),e("p",{staticClass:"no-text"},[this._v("暂无答疑")])])}]};var Gt=a("C7Lr")(Wt,Vt,!1,function(t){a("d+eV")},null,null).exports,Ht={name:"dataStatisticsAq",components:{classCenterHeader:Ut,aqStatistics:Gt},mounted:function(){this.drawPie()},data:function(){return{str:"",current:3,selectMonth:3,showEchart:!0,yearList:[{month:1,year:2019},{month:2,year:2019},{month:3,year:2019},{month:4,year:2019},{month:5,year:2019}]}},methods:{changeMonth:function(t,e){if(e>this.current)return!1;this.selectMonth=e},changeShowEchart:function(){var t=this;this.showEchart=!this.showEchart,this.showEchart&&setTimeout(function(){t.drawPie()},100)},drawPie:function(){this.chartPie=k.a.init(document.getElementById("pieId")),this.chartPie.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},grid:{bottom:"20%"},legend:{},dataset:{dimensions:["product","已解决","已追问","未回复","已回复"],source:[["product","已解决","已追问","未回复","已回复"],["第一周",43.3,85.8,93.7,10],["第二周",83.1,73.4,55.1,20],["第三周",72.4,53.9,39.1,40],["第四周",72.4,53.9,39.1,40]]},xAxis:{type:"category",axisPointer:{type:"shadow"}},yAxis:{},series:[{type:"bar",color:"#729CD6"},{type:"bar",color:"#5BBF48"},{type:"bar",color:"#F29754"},{type:"bar",color:"#A2E4B4"}]})}}},Zt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dataStatisticsAq-wrap"},[e("div",{staticClass:"dataStatisticsAq-wrap-s"},[e("classCenterHeader",{staticStyle:{overflow:"unset"},attrs:{classId:this.$route.params.classId}}),this._v(" "),e("div",{staticClass:"content"},[e("aqStatistics")],1)],1)])},staticRenderFns:[]};var Qt=a("C7Lr")(Ht,Zt,!1,function(t){a("wyLI")},null,null).exports,Yt={name:"studentDetails",props:{studentInfo:{type:Object,default:function(){}}},computed:{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}},data:function(){return{filterData:{plan:"",studentName:"",loginName:""},pageNo:1,pageSize:20,loading:!0,envType:parseInt(this.cookie.get("envType")),planList:[],tableData:[],totalCount:0}},mounted:function(){console.log("1111"),this.getStudentInfo(),this.getClassPlanDetail()},methods:{returnBack:function(){this.$emit("returnBack")},exportTable:function(){this.webApi.postExcelFile({classId:this.studentInfo.classId,courseId:this.studentInfo.courseId,weekNum:this.filterData.plan,studentName:this.filterData.studentName,loginName:this.filterData.loginName,token:this.techLoginInfo.token,versionId:this.studentInfo.courseVersionId},("1"==this.envType?"https://apidemo.zbgedu.com":"https://api.zbgedu.com")+"/api/edu/userAction/classes/yb/studentLearnProgress/export")},getStudentInfo:function(){var t=this;this.loading=!0,y.a.ajax("findStudentLearnProgress",{classId:this.studentInfo.classId,courseId:this.studentInfo.courseId,weekNum:this.filterData.plan,currentPage:this.pageNo,studentName:this.filterData.studentName,loginName:this.filterData.loginName,pageSize:this.pageSize,token:this.techLoginInfo.token,versionId:this.studentInfo.courseVersionId}).then(function(e){t.loading=!1,e&&"success"==e.state?(t.tableData=e.data.studentList,t.totalCount=e.data.totalRecord):t.webApi.alert(e.msg)})},getClassPlanDetail:function(){var t=this;y.a.ajax("getClassPlanDetail",{classId:this.studentInfo.classId,courseId:this.studentInfo.courseVersionId,token:this.techLoginInfo.token,planType:"1"}).then(function(e){e&&"success"==e.state?t.planList=e.data:t.webApi.alert(e.msg)})},handleCurrentChange:function(t){this.pageNo=t,this.getStudentInfo()},handleSizeChange:function(t){this.pageNo=1,this.pageSize=t,this.getStudentInfo()},searchList:function(){this.pageNo=1,this.getStudentInfo()}}},Kt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"studentDetails-wrap"},[a("div",{staticClass:"return-wrap"},[a("span",{staticClass:"return-span",on:{click:t.returnBack}},[a("i",{staticClass:"el-icon-back icon-usual"}),t._v("返回")])]),t._v(" "),a("div",{staticClass:"filter-wrap"},[a("div",{staticClass:"filter"},[a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"教学计划"}},[a("el-select",{attrs:{placeholder:"教学计划"},model:{value:t.filterData.plan,callback:function(e){t.$set(t.filterData,"plan",e)},expression:"filterData.plan"}},[a("el-option",{attrs:{value:"",label:"全部计划"}}),t._v(" "),t._l(t.planList,function(t,e){return a("el-option",{key:e,attrs:{value:t.plan_order,label:t.planTitle}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:t.filterData.studentName,callback:function(e){t.$set(t.filterData,"studentName",e)},expression:"filterData.studentName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:t.filterData.loginName,callback:function(e){t.$set(t.filterData,"loginName",e)},expression:"filterData.loginName"}})],1)],1),t._v(" "),a("div",{staticClass:"btn-wrap"},[a("a",{staticClass:"search-btn",attrs:{href:"javascript:;"},on:{click:t.searchList}},[a("i",{staticClass:"el-icon-search"}),t._v("搜索")]),t._v(" "),a("a",{staticClass:"search-btn",attrs:{href:"javascript:;"},on:{click:t.exportTable}},[a("i",{staticClass:"el-icon-printer"}),t._v("导出")])])],1)]),t._v(" "),a("div",{staticClass:"table-wrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark",stripe:!0,height:"100%",size:"mini"}},[a("el-table-column",{attrs:{prop:"studentName",fixed:"",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"loginName",fixed:"",label:"用户名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"completed",label:"已完成任务"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalNum",label:"任务总数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"videoCompleted",label:"已完成视频"}}),t._v(" "),a("el-table-column",{attrs:{prop:"videoOngoing",label:"学习中视频"}}),t._v(" "),a("el-table-column",{attrs:{label:"未完成视频"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.videoTotal-e.row.videoCompleted-e.row.videoOngoing)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"videoTotal",label:"视频总数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"appraisalCompleted",label:"已完成测评"}}),t._v(" "),a("el-table-column",{attrs:{prop:"appraisalTotal",label:"测评总数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"practiceCompleted",label:"已完成练习"}}),t._v(" "),a("el-table-column",{attrs:{prop:"practiceTotal",label:"练习总数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"openCourseCompleted",label:"已完成直播"}}),t._v(" "),a("el-table-column",{attrs:{prop:"openCourseTotal",label:"直播总数"}}),t._v(" "),a("el-table-column",{attrs:{label:"总进度"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.totalNum>0?Math.floor(e.row.completed/e.row.totalNum*1e4)/100+"%":"--")+"\n        ")]}}])})],1)],1),t._v(" "),a("div",{staticStyle:{height:"40px","text-align":"center"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next,sizes,total",pageSize:t.pageSize,"current-page":t.pageNo,total:t.totalCount},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)])},staticRenderFns:[]};var Jt=a("C7Lr")(Yt,Kt,!1,function(t){a("Fv36")},null,null).exports,Xt={name:"classGather",computed:{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}},props:{classInfo:{type:Object,default:function(){}}},mounted:function(){console.log(this.classInfo),this.findClassProgressCount()},data:function(){return{filterData:{plan:"",studentName:"",userName:""},loading:!0,pageNo:1,totalCount:0,tableData:[]}},methods:{returnBack:function(){this.$emit("returnBack")},findClassProgressCount:function(){var t=this;y.a.ajax("findClassProgressCount",{token:this.techLoginInfo.token,classId:this.classInfo.classId,courseId:this.classInfo.courseVersionId,pageSize:20,currentPage:this.pageNo}).then(function(e){t.loading=!1,e&&"success"==e.state?t.tableData=e.data.rowList:t.webApi.alert(e.msg)})},getWeekName:function(t){return"-1"==t?"全部":"第"+this.webApi.toZhDigit(t+1)+"周"}}},te={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"classGather-wrap"},[a("div",{staticClass:"return-wrap"},[a("span",{staticClass:"return-span",on:{click:t.returnBack}},[a("i",{staticClass:"el-icon-back icon-usual"}),t._v("返回")])]),t._v(" "),a("div",{staticClass:"filter-wrap"},[a("div",{staticClass:"filter"},[a("div",{staticClass:"main-text"},[a("span",{staticClass:"item-span"},[t._v("班级："+t._s(t.classInfo.className))]),t._v(" "),a("span",{staticClass:"item-span"},[t._v("项目："+t._s(t.classInfo.itemName))]),t._v(" "),a("span",{staticClass:"item-span"},[t._v("科目："+t._s(t.classInfo.courseCategoryName))]),t._v(" "),a("span",{staticClass:"item-span"},[t._v("批次："+t._s(t.classInfo.classBatchName))]),t._v(" "),a("span",{staticClass:"item-span"},[t._v("学员数："+t._s(t.classInfo.studentNum))])]),t._v(" "),a("div",{staticClass:"btn-wrap"})])]),t._v(" "),a("div",{staticClass:"table-wrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark",stripe:!0,size:"mini",height:"100%"}},[a("el-table-column",{attrs:{label:"学习周"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.getWeekName(e.row.weekindex))+" ("+t._s(e.row.startDate.replace(new RegExp("-","g"),"/"))+"-"+t._s(e.row.endDate.replace(new RegExp("-","g"),"/"))+")\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"平均学习进度"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("-1"==e.row.averageLearnProgress?"--":e.row.averageLearnProgress+"%"))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"视频完成率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("-1"==e.row.videoCompletionRate?"--":e.row.videoCompletionRate+"%"))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"作业完成率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("-1"==e.row.examCompletionRate?"--":e.row.examCompletionRate+"%"))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"直播参与率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("-1"==e.row.openCourseCompletionRate?"--":e.row.openCourseCompletionRate+"%"))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"直播回放参与率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("-1"==e.row.openCoursePlaybackCompletionRate?"--":e.row.openCoursePlaybackCompletionRate+"%"))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"文档参与率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("-1"==e.row.pdfreadCompletionRate?"--":e.row.pdfreadCompletionRate+"%"))]}}])})],1)],1)])},staticRenderFns:[]};var ee={name:"youboStudyAction",components:{studentDetails:Jt,classGather:a("C7Lr")(Xt,te,!1,function(t){a("fq9S")},null,null).exports},computed:{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}},mounted:function(){this.getClassList(),this.findItemCategoryList()},data:function(){return{filterData:{item:"",subject:"",status:"2",className:""},showMainView:!0,showStudentDetails:!1,showClassGather:!1,studentInfo:"",classInfo:"",totalCount:0,pageSize:20,loading:!0,pageNo:1,tableData:[],options1:[],options2:[],ItemCategoryList:""}},methods:{toStudent:function(t){this.studentInfo=t,this.showMainView=!1,this.showStudentDetails=!0},toClass:function(t){this.classInfo=t,this.showMainView=!1,this.showClassGather=!0},returnBack:function(){this.showStudentDetails=!1,this.showClassGather=!1,this.showMainView=!0},getClassList:function(){var t=this;this.loading=!0,y.a.ajax("getClassStatistics",{token:this.techLoginInfo.token,itemId:this.filterData.item,courseCategoryId:this.filterData.subject,classStatus:this.filterData.status,pageSize:this.pageSize,className:this.filterData.className,currentPage:this.pageNo,classBatchId:""}).then(function(e){t.loading=!1,e&&"success"==e.state?(t.tableData=e.data.result,t.totalCount=e.data.total):t.webApi.alert(e.msg)})},findItemCategoryList:function(){var t=this;y.a.ajax("getItemCategory",{token:this.techLoginInfo.token}).then(function(e){e&&"success"==e.state?(t.ItemCategoryList=e.data,t.options1=e.data):t.webApi.alert(e.msg)})},changeItem:function(t){this.options2=this.options1.filter(function(e){return t==e.itemId})[0].courseCategoryList,this.filterData.subject=""},filterCascaderData:function(t){if(t){var e=t,a=[];for(var s in a.push({title:"全部项目",id:""}),e)for(var i in a.push(e[s]),e[i]);return a}return[]},copyData:function(t){var e=Array.isArray(t)?[]:{};for(var a in t)"object"===L()(t[a])?("child"==a&&t[a].unshift({title:"全部科目",id:""}),e[a]=this.copyData(t[a])):e[a]=t[a];return e},getKnowledgeCategory:function(){var t=this;y.a.ajax("getKnowledgeCategory",{token:this.techLoginInfo.token}).then(function(e){if(e&&"success"==e.state){var a=t.copyData(e.data);t.options1=t.filterCascaderData(a)}else t.webApi.alert(e.msg)})},searchClassList:function(){this.pageNo=1,this.getClassList()},handleCurrentChange:function(t){this.pageNo=t,this.getClassList()},handleSizeChange:function(t){this.pageSize=t,this.pageNo=1,this.getClassList()}}},ae={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"youboStudyAction-wrap"},[t.showMainView?a("div",{staticClass:"mainview-wrap"},[a("div",{staticClass:"filter-wrap"},[a("div",{staticClass:"filter"},[a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"项目"}},[a("el-select",{attrs:{placeholder:"项目"},on:{change:t.changeItem},model:{value:t.filterData.item,callback:function(e){t.$set(t.filterData,"item",e)},expression:"filterData.item"}},[a("el-option",{attrs:{value:"",label:"全部项目"}}),t._v(" "),t._l(t.options1,function(t,e){return a("el-option",{key:e,attrs:{value:t.itemId,label:t.itemName}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"科目"}},[a("el-select",{attrs:{placeholder:"科目"},model:{value:t.filterData.subject,callback:function(e){t.$set(t.filterData,"subject",e)},expression:"filterData.subject"}},[a("el-option",{attrs:{value:"",label:"全部科目"}}),t._v(" "),t._l(t.options2,function(t,e){return a("el-option",{key:e,attrs:{value:t.courseCategoryId,label:t.courseCategoryName}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"状态"},model:{value:t.filterData.status,callback:function(e){t.$set(t.filterData,"status",e)},expression:"filterData.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),a("el-option",{attrs:{label:"未开始",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"进行中",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"已结束",value:"3"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"班级名称"}},[a("el-input",{attrs:{placeholder:"请输入班级名称"},model:{value:t.filterData.className,callback:function(e){t.$set(t.filterData,"className",e)},expression:"filterData.className"}})],1)],1),t._v(" "),a("div",{staticClass:"btn-wrap"},[a("a",{staticClass:"search-btn",attrs:{href:"javascript:;"},on:{click:t.searchClassList}},[a("i",{staticClass:"el-icon-search"}),t._v("搜索")])])],1)]),t._v(" "),a("div",{staticClass:"table-wrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark",stripe:!0,size:"mini"}},[a("el-table-column",{attrs:{prop:"className",label:"班级名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"courseName",label:"课程名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"courseVersionName",label:"教学版本"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.versionName?e.row.versionName:"一"))]}}],null,!1,4230816536)}),t._v(" "),a("el-table-column",{attrs:{prop:"itemName",label:"项目"}}),t._v(" "),a("el-table-column",{attrs:{prop:"courseCategoryName",label:"科目"}}),t._v(" "),a("el-table-column",{attrs:{prop:"classBatchName",label:"批次"}}),t._v(" "),a("el-table-column",{attrs:{prop:"timeLine",label:"有效期"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.webApi.formatDate(e.row.startTime/1e3,"YMD"))+"至"+t._s(t.webApi.formatDate(e.row.endTime/1e3,"YMD")))]}}],null,!1,988737196)}),t._v(" "),a("el-table-column",{attrs:{prop:"classStatus",width:"80",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.classStatus?a("span",[t._v("未开始")]):t._e(),2==e.row.classStatus?a("span",[t._v("进行中")]):t._e(),3==e.row.classStatus?a("span",[t._v("已结束")]):t._e()]}}],null,!1,3123113115)}),t._v(" "),a("el-table-column",{attrs:{prop:"studentNum",width:"80",label:"学员数"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.toStudent(e.row)}}},[t._v("学员明细")]),t._v(" "),a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.toClass(e.row)}}},[t._v("班级汇总")])]}}],null,!1,1474263767)})],1)],1),t._v(" "),a("div",{staticStyle:{height:"50px","text-align":"center"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next,sizes,total","current-page":t.pageNo,pageSize:t.pageSize,total:t.totalCount},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)]):t._e(),t._v(" "),!t.showMainView&&t.showStudentDetails?[a("studentDetails",{attrs:{studentInfo:t.studentInfo},on:{returnBack:t.returnBack}})]:t._e(),t._v(" "),!t.showMainView&&t.showClassGather?[a("classGather",{attrs:{classInfo:t.classInfo},on:{returnBack:t.returnBack}})]:t._e()],2)},staticRenderFns:[]};var se=a("C7Lr")(ee,ae,!1,function(t){a("TNe5")},null,null).exports,ie={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]};var ne=a("C7Lr")({name:"dataStatistics"},ie,!1,function(t){a("VMJf")},"data-v-6b0c3320",null).exports,oe=a("lC5x"),re=a.n(oe),le=a("J0Oq"),ce=a.n(le),ue={name:"chapterSource",components:{iScroll:f},computed:{defaultCheckedKeys:function(){var t=[];return t.push(this.chapterParams.chapterId),t}},data:function(){return{scrollRefresh:!1,defaultProps:{children:"children",label:"chapterTitle"},chapterData:[]}},props:{chapterParams:{type:Object}},mounted:function(){this.getChapterData()},methods:{close:function(){this.$emit("closeChapter")},changeScroll:function(){var t=this;setTimeout(function(){t.scrollRefresh=!t.scrollRefresh},500)},getChapterData:function(){var t=this;y.a.ajax("courseDetail",{courseId:this.chapterParams.courseId}).then(function(e){if(!e||"success"!=e.state)return t.webApi.alert("查询失败"),!1;t.chapterData=e.data[0].chapters,t.scrollRefresh=!t.scrollRefresh})}}},pe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chapterSource-wrap"},[a("div",{staticClass:"chapterSourceW"},[a("el-container",[a("el-header",{attrs:{height:"50px"}},[t._v("问题来源\n        "),a("i",{staticClass:"close-btn",on:{click:t.close}})]),t._v(" "),a("el-main",[a("div",{staticClass:"iscroll-wrap"},[a("iScroll",{attrs:{id:"videoSourceChapterId","is-refresh":t.scrollRefresh}},[a("p",{staticClass:"courseName"},[t._v(t._s(t.chapterParams.courseName))]),t._v(" "),a("el-tree",{attrs:{data:t.chapterData,"default-expand-all":!0,props:t.defaultProps,"node-key":"chapterId","check-strictly":"","default-checked-keys":t.defaultCheckedKeys},on:{"node-expand":t.changeScroll,"node-collapse":t.changeScroll}})],1)],1)])],1)],1)])},staticRenderFns:[]};var de={name:"teacherDetails",components:{exchangeDeatail:lt,videoPlayer:$,chapterSource:a("C7Lr")(ue,pe,!1,function(t){a("9Y2X")},null,null).exports,examSource:U},computed:{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}},props:{teacherInfo:{type:Object,default:function(){}},dateInfo:{default:null}},mounted:function(){new Date;console.log(this.teacherInfo),this.filterData.askTime.push(this.dateInfo?this.dateInfo[0]:""),this.filterData.askTime.push(this.dateInfo?this.dateInfo[1]:""),this.getList(),this.getCourseType(),this.getExportExcelUrl()},data:function(){return{filterData:{classType:"",studentName:"",askTime:[],userName:""},sourceParams:"",showVideoSource:!1,showExamSource:!1,showChapterSource:!1,loading:!1,totalCount:0,pageNo:1,pageSize:20,urlStr:"",envType:parseInt(this.cookie.get("envType")),classSelectList:[],pickerOptions0:{disabledDate:function(t){return t.getTime()>Date.now()}},showExamDeatailModal:!1,exchangeData:{},tableData:[]}},methods:{returnBack:function(){this.$emit("returnBack")},close:function(){this.showExamDeatailModal=!1},selectList:function(){this.pageNo=1,this.getExportExcelUrl(),this.getList()},getCourseType:function(){var t=this;y.a.ajax("getCourseTeacheringType",{token:this.techLoginInfo.token}).then(function(e){e&&"success"==e.state&&(t.classSelectList=e.data)})},checkExamSource:function(t){this.showExamSource=!0,this.sourceParams=t;this.envType},getExportExcelUrl:function(){var t="";t="1"==this.envType?"https://apidemo.zbgedu.com":"https://api.zbgedu.com";var e=this.filterData.askTime?this.filterData.askTime[0]:"",a=this.filterData.askTime?this.filterData.askTime[1]:"";this.urlStr=t+"/api/userAction/php/bbs/exportBbsStatisticalInfo?verTT="+(new Date).getTime()+"&token="+this.techLoginInfo.token+"&knowledgeItem="+this.teacherInfo.knowledgeItemId+"&knowledgeCategory="+this.teacherInfo.knowledgeCategoryId+"&courseType="+this.filterData.classType+"&teacherId="+this.teacherInfo.teacherId+"&title="+this.filterData.userName+"&startDate="+e+"&endDate="+a},checkChapterSource:function(t){this.showChapterSource=!0,this.sourceParams=t},checkVideoSource:function(t){this.showVideoSource=!0,this.sourceParams=t},closeExamPop:function(){this.showExamSource=!1},closeVideo:function(){this.showVideoSource=!1},closeChapterPop:function(){this.showChapterSource=!1},getList:function(){var t=this;this.loading=!0,y.a.ajax("bbsStatisticalInfo",{knowledgeItem:this.teacherInfo.knowledgeItemId,knowledgeCategory:this.teacherInfo.knowledgeCategoryId,courseType:this.filterData.classType,token:this.techLoginInfo.token,teacherId:this.teacherInfo.teacherId,startDate:this.filterData.askTime?this.filterData.askTime[0]:"",endDate:this.filterData.askTime?this.filterData.askTime[1]:"",title:this.filterData.userName,pageNo:this.pageNo,pageSize:this.pageSize}).then(function(e){t.loading=!1,e&&"success"==e.state?(t.tableData=e.data,t.totalCount=e.total):t.webApi.alert(e.msg)})},getClassTextFromType:function(t){console.log(t),console.log(this.classSelectList);for(var e=0;e<this.classSelectList.length;e++)if(this.classSelectList[e].value==t)return this.classSelectList[e].title;return t},handleCurrentChange:function(t){this.pageNo=t,this.getList()},handleSizeChange:function(t){this.pageSize=t,this.pageNo=1,this.getList()},showExamDeatail:function(t){this.exchangeData.id=t.id,this.showExamDeatailModal=!0}}},he={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"teacherDetails-wrap"},[a("div",{staticClass:"return-wrap"},[a("span",{staticClass:"return-span",on:{click:t.returnBack}},[a("i",{staticClass:"el-icon-back icon-usual"}),t._v("返回")])]),t._v(" "),a("div",{staticClass:"filter-wrap"},[a("div",{staticClass:"filter"},[a("div",{staticClass:"title-wrap"},[a("span",{staticClass:"name-span"},[t._v(t._s(t.teacherInfo.teacherName))]),t._v("答疑明细\n      ")]),t._v(" "),a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"项目："}},[t._v("\n          "+t._s(t.teacherInfo.knowledgeItem)+"\n        ")]),t._v(" "),a("el-form-item",{attrs:{label:"科目："}},[t._v("\n          "+t._s(t.teacherInfo.knowledgeCategory)+"\n        ")]),t._v(" "),a("el-form-item",{attrs:{label:"课程选择"}},[a("el-select",{attrs:{placeholder:""},model:{value:t.filterData.classType,callback:function(e){t.$set(t.filterData,"classType",e)},expression:"filterData.classType"}},[a("el-option",{attrs:{label:"全部课程",value:""}}),t._v(" "),t._l(t.classSelectList,function(t,e){return a("el-option",{key:e,attrs:{value:t.value,label:t.title}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"提问时间"}},[a("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","picker-options":t.pickerOptions0,"end-placeholder":"结束日期"},model:{value:t.filterData.askTime,callback:function(e){t.$set(t.filterData,"askTime",e)},expression:"filterData.askTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"标题"},model:{value:t.filterData.userName,callback:function(e){t.$set(t.filterData,"userName",e)},expression:"filterData.userName"}})],1)],1),t._v(" "),a("div",{staticClass:"btn-wrap"},[a("a",{staticClass:"search-btn",attrs:{href:"javascript:;"},on:{click:t.selectList}},[a("i",{staticClass:"el-icon-search"}),t._v("搜索")]),t._v(" "),a("a",{staticClass:"search-btn",attrs:{href:t.urlStr,download:"教学中心"}},[a("i",{staticClass:"el-icon-printer"}),t._v("导出")])])],1)]),t._v(" "),a("div",{staticClass:"table-wrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark",stripe:!0,size:"mini",height:"100%"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{class:["title-a",1==e.row.isdelete?"isDetele-a":""],attrs:{href:"javascript:;"},on:{click:function(a){return t.showExamDeatail(e.row)}}},["1"==e.row.isdelete?a("span",[t._v("（已删除）")]):t._e(),t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"grad",width:"120",label:"学生评分"}}),t._v(" "),a("el-table-column",{attrs:{label:"项目"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.teacherInfo.knowledgeItem)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"科目"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.teacherInfo.knowledgeCategory)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"courseName",label:"课程"}}),t._v(" "),a("el-table-column",{attrs:{width:"120",prop:"courseType",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.getClassTextFromType(e.row.courseType))+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"tasktype",width:"120",label:"来源"},scopedSlots:t._u([{key:"default",fn:function(e){return["video"==e.row.tasktype?a("div",{staticClass:"ac-list-info-li"},[a("a",{staticClass:"ac-list-info-span ac-list-info-video",attrs:{link:"#video/ff8080814f607c24014f68797ae11714/ff8080814f607c24014f687e0b72171b/8a22ecb55fb31e2a015ffb59e84a0298/30?return_link=myAc&return_render=on&return_hash=on",href:"javascript:;"},on:{click:function(a){return t.checkVideoSource(e.row)}}},[a("i",{staticClass:"icon icon-ac-time"}),a("span",{staticClass:"ac-desc-video-time"},[t._v(t._s(t.webApi.formatType(e.row.tasktype,e.row.taskprogress))+" ")])])]):t._e(),t._v(" "),"chapter"==e.row.tasktype?a("div",{staticClass:"ac-list-info-li"},[a("div",{staticClass:"exam-wrap",on:{click:function(a){return t.checkChapterSource(e.row)}}},[a("i",{staticClass:"icon-wrap"}),a("span",{staticClass:"text-wrap"},[t._v("章节")])])]):t._e(),t._v(" "),"exam"==e.row.tasktype?a("div",{staticClass:"ac-list-info-li"},[a("div",{staticClass:"exam-wrap",on:{click:function(a){return t.checkExamSource(e.row)}}},[a("i",{staticClass:"icon-wrap"}),a("span",{staticClass:"text-wrap"},[t._v("题目")])])]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"createDate",label:"提问时间"}})],1)],1),t._v(" "),a("div",{staticStyle:{height:"40px","padding-top":"10px","text-align":"center"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, sizes, total",pageSize:t.pageSize,total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),t.showExamDeatailModal?a("div",{staticClass:"modal-wrap"},[a("div",{staticClass:"content-wrap"},[a("i",{staticClass:"close-btn",on:{click:t.close}}),t._v(" "),a("div",{staticClass:"content"},[a("exchangeDeatail",{attrs:{exchangeData:t.exchangeData,canClick:!0}})],1)])]):t._e(),t._v(" "),t.showVideoSource?a("div",{staticClass:"video-player-wrap"},[a("div",{staticClass:"v-p-w-content"},[a("div",{staticClass:"video-title"},[t._v("问题来源\n        "),a("i",{staticClass:"close-btn",on:{click:t.closeVideo}})]),t._v(" "),a("div",{staticClass:"video-wrap"},[a("videoPlayer",{attrs:{videoParams:t.sourceParams}})],1)])]):t._e(),t._v(" "),t.showExamSource?a("examSource",{attrs:{examParams:t.sourceParams},on:{closeExam:t.closeExamPop}}):t._e(),t._v(" "),t.showChapterSource?a("chapterSource",{attrs:{chapterParams:t.sourceParams},on:{closeChapter:t.closeChapterPop}}):t._e()],1)},staticRenderFns:[]};var me={name:"teacherAQStatistics",components:{teacherDetails:a("C7Lr")(de,he,!1,function(t){a("6YHl")},null,null).exports},computed:{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}},mounted:function(){var t=this;return ce()(re.a.mark(function e(){var a,s,i,n,o;return re.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$message({message:"请先选择筛选条件，然后点击搜索按钮查询数据",type:"info"}),a=new Date,s=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())).toISOString().slice(0,10),i=t.webApi.getLastMonthToday(),t.filterData.askTime.push(i),t.filterData.askTime.push(s),e.next=8,t.getKnowledgeCategory();case 8:n=e.sent,(o=n.data).length>1&&t.changeItem(o[1].id),t.getExportExcelUrl();case 12:case"end":return e.stop()}},e,t)}))()},data:function(){return{filterData:{item:"",subject:"",name:"",askTime:[]},pickerOptions0:{disabledDate:function(t){return t.getTime()>Date.now()}},teacherInfo:{},showMainView:!0,showStudentDetails:!1,showClassGather:!1,gradeSort:"",urlStr:"",answerSort:"",totalCount:0,envType:parseInt(this.cookie.get("envType")),pageNo:1,pageSize:20,tableData:[],loading:!1,options1:[],options2:[]}},methods:{toStudent:function(t){this.showMainView=!1,this.teacherInfo=t},sortByGrade:function(t,e){},getExportExcelUrl:function(){var t="";t="1"==this.envType?"https://apidemo.zbgedu.com":"https://api.zbgedu.com";var e=this.filterData.askTime?this.filterData.askTime[0]:"",a=this.filterData.askTime?this.filterData.askTime[1]:"";this.urlStr=t+"/api/userAction/php/bbs/exportBbsStatisticalData?verTT="+(new Date).getTime()+"&token="+this.techLoginInfo.token+"&knowledgeItem="+this.filterData.item+"&knowledgeCategory="+this.filterData.subject+"&teacherName="+this.filterData.name+"&gradeSort="+this.gradeSort+"&answerSort="+this.answerSort+"&startDate="+e+"&endDate="+a+"&pageSize=1000&pageNum=1"},sortChange:function(t,e,a){t.column?"gardCount"==t.prop?(this.answerSort="","ascending"==t.order?this.gradeSort="asc":this.gradeSort="desc"):(this.gradeSort="","ascending"==t.order?this.answerSort="asc":this.answerSort="desc"):(this.gradeSort="",this.answerSort=""),this.pageNo=1,this.getList()},searchList:function(){this.getExportExcelUrl(),this.getList()},getList:function(){var t=this;this.loading=!0,this.tableData=[],y.a.ajax("bbsStatisticalData",{knowledgeItem:this.filterData.item,knowledgeCategory:this.filterData.subject,teacherName:this.filterData.name,pageNo:this.pageNo,pageSize:this.pageSize,token:this.techLoginInfo.token,gradeSort:this.gradeSort,answerSort:this.answerSort,startDate:this.filterData.askTime?this.filterData.askTime[0]:"",endDate:this.filterData.askTime?this.filterData.askTime[1]:""}).then(function(e){t.loading=!1,e&&"success"==e.state?(t.tableData=e.data,t.totalCount=e.total):t.webApi.alert(e.msg)})},changeItem:function(t){var e=this;this.filterData.subject="",this.filterData.item=t,this.options1.forEach(function(a,s){a.id==t&&(a.child?e.options2=a.child:e.options2=[{title:"全部科目",id:""}])})},filterCascaderData:function(t){if(t){var e=t,a=[];for(var s in a.push({title:"全部项目",id:""}),e)for(var i in a.push(e[s]),e[i]);return a}return[]},copyData:function(t){var e=Array.isArray(t)?[]:{};for(var a in t)"object"===L()(t[a])?("child"==a&&t[a].unshift({title:"全部科目",id:""}),e[a]=this.copyData(t[a])):e[a]=t[a];return e},getKnowledgeCategory:function(){var t=this;return y.a.ajax("getKnowledgeCategory",{token:this.techLoginInfo.token}).then(function(e){if(e&&"success"==e.state){var a=t.copyData(e.data);return t.options1=t.filterCascaderData(a),{data:t.options1}}t.webApi.alert(e.msg)})},returnBack:function(){this.showMainView=!0},handleCurrentChange:function(t){this.pageNo=t,this.getList()},handleSizeChange:function(t){this.pageSize=t,this.pageNo=1,this.getList()}}},fe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"teacherAQStatistics-wrap"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMainView,expression:"showMainView"}],staticClass:"mainview-wrap"},[a("div",{staticClass:"filter-wrap"},[a("div",{staticClass:"filter"},[a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"项目"}},[a("el-select",{attrs:{placeholder:"项目"},on:{change:t.changeItem},model:{value:t.filterData.item,callback:function(e){t.$set(t.filterData,"item",e)},expression:"filterData.item"}},t._l(t.options1,function(t,e){return a("el-option",{key:e,attrs:{value:t.id,label:t.title}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"科目"}},[a("el-select",{attrs:{placeholder:"科目"},model:{value:t.filterData.subject,callback:function(e){t.$set(t.filterData,"subject",e)},expression:"filterData.subject"}},t._l(t.options2,function(t,e){return a("el-option",{key:e,attrs:{value:t.id,label:t.title}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"教师用户名"}},[a("el-input",{attrs:{placeholder:"请输入教师用户名"},model:{value:t.filterData.name,callback:function(e){t.$set(t.filterData,"name",e)},expression:"filterData.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"提问时间"}},[a("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions0,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.filterData.askTime,callback:function(e){t.$set(t.filterData,"askTime",e)},expression:"filterData.askTime"}})],1)],1),t._v(" "),a("div",{staticClass:"btn-wrap"},[a("a",{staticClass:"search-btn mr20",attrs:{href:"javascript:;"},on:{click:t.searchList}},[a("i",{staticClass:"el-icon-search"}),t._v("搜索")]),t._v(" "),a("a",{staticClass:"search-btn",attrs:{href:t.urlStr,download:"教学中心"}},[a("i",{staticClass:"el-icon-printer"}),t._v("导出")])])],1)]),t._v(" "),a("div",{staticClass:"table-wrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark",stripe:!0,size:"mini"},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"teacherName",label:"教师姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gardCount",sortable:"custom","sort-method":t.sortByGrade,label:"获星数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"answerCount",sortable:"custom",label:"答疑数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"knowledgeItem",label:"项目"}}),t._v(" "),a("el-table-column",{attrs:{prop:"knowledgeCategory",label:"科目"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"color-a",attrs:{href:"javascript:;"},on:{click:function(a){return t.toStudent(e.row)}}},[t._v("明细")])]}}])})],1)],1),t._v(" "),a("div",{staticStyle:{height:"40px","text-align":"center"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, sizes, total",pageSize:t.pageSize,total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),t._v(" "),t.showMainView?t._e():[a("teacherDetails",{attrs:{dateInfo:t.filterData.askTime,teacherInfo:t.teacherInfo},on:{returnBack:t.returnBack}})]],2)},staticRenderFns:[]};var ve=a("C7Lr")(me,fe,!1,function(t){a("/Imm")},null,null).exports,ge={name:"selectWeek",props:["weekList"],data:function(){return{selectList:[]}},methods:{select:function(t){"all"==t?this.selectList.indexOf("all")>-1?this.selectList=[]:(this.selectList=[],this.selectList.push("all")):(this.selectList.remove("all"),this.selectList.indexOf(t)>-1?this.selectList.remove(t):(console.log(this.selectList),this.selectList.push(t)))},confirm:function(){0!=this.selectList.length?this.$emit("confirmSelectWeek",this.selectList):this.webApi.alert("请至少选择一项~")},cancel:function(){this.$emit("cancelSelectWeek")}}},Ce={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select-week-wrap"},[a("div",{staticClass:"s-w-content"},[a("div",{staticClass:"content-title"},[t._v("选择导出周数")]),t._v(" "),a("ul",{staticClass:"list-ul"},[a("li",{class:["list-li",t.selectList.indexOf("all")>-1?"active":""],on:{click:function(e){return t.select("all")}}},[t._v("全部")]),t._v(" "),t._l(t.weekList,function(e,s){return a("li",{key:s,class:["list-li",t.selectList.indexOf(e.selectWeekId)>-1?"active":""],on:{click:function(a){return t.select(e.selectWeekId)}}},[t._v("第"+t._s(t.webApi.toZhDigit(s+1))+"周")])})],2),t._v(" "),a("div",{staticClass:"content-bottom"},[a("span",{staticClass:"cancel-text",on:{click:t.cancel}},[t._v("取消")]),t._v(" "),a("span",{staticClass:"confirm-text",on:{click:t.confirm}},[t._v("确定")])])])])},staticRenderFns:[]};var be=a("C7Lr")(ge,Ce,!1,function(t){a("Wd7m")},null,null).exports,_e={name:"practiceStatistics",components:{iScroll:f,examSource:U,selectWeek:be,classCenterHeader:Ut,iLoading:_},mounted:function(){this.getExamenTaskList()},computed:u()({},Object(x.d)({envType:function(t){return t.global.envType}}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}}),data:function(){return{showEcharts:!1,showExamList:!1,scrollRefresh:!1,scrollRefresh1:!1,str:"",showSelectWeek:!1,xData:[],ySeris:[],legendData:[],examParams:"",showExamSource:!1,examData:"",checkedExam:[],rankData:"",status:"",weekList:"",selectWeekList:"",classCourseInfo:"",examList:[],tableData:[],statusList:[{label:"全部状态",value:""},{label:"未提交",value:"0"},{label:"已提交",value:"1"}],typeList:[{label:"全部类型",value:""},{label:"测评试卷",value:"appraisal"},{label:"练习试卷",value:"practice"}],examType:"",rankList:"",currentExam:""}},methods:u()({},Object(x.c)("classManage",["updateSelectExam"]),{exportTable:function(){this.webApi.postExcelFile({token:this.techLoginInfo.token,classId:this.$route.params.classId,taskLevel:"",isSubmit:this.status},("1"==this.envType?"https://apidemo.zbgedu.com":"https://zbapi.zbgedu.com")+"/api/study/userAction/statistics/faceCoursePaper/exportStatisticsFaceCoursePaper")},returnDetailInfo:function(t){this.classCourseInfo=t},showExamListBtn:function(){var t=this;this.showExamList=!0,setTimeout(function(){t.scrollRefresh1=!t.scrollRefresh1},500)},confirmSelectWeek:function(t){console.log(t),t.indexOf("all")>-1&&(t=[]),this.webApi.postExcelFile({token:this.techLoginInfo.token,classId:this.$route.params.classId,courseId:this.classCourseInfo.courseId,courseTeachingType:"flipped",studyPlanExtendIndexList:t.join(","),taskLevel:"",isSubmit:this.status},("1"==this.envType?"https://apidemo.zbgedu.com":"https://zbapi.zbgedu.com")+"/api/study/userAction/statistics/exportStatisticsCoursePaper"),this.showSelectWeek=!1},cancelSelectWeek:function(){this.showSelectWeek=!1},checkExamSource:function(t){var e=this,a=(new Date).getTime()+18e5,s=(new Date(a),window.location.hostname);/\.zbgedu\.com/.test(s)&&(s="zbgedu.com"),this.cookie.remove("zbgeduId");var i="mstiku";"1"==this.envType&&(i="mstikudemo"),y.a.ajax("getTaskInfoAndProgress",{token:this.techLoginInfo.token,taskId:t.taskId}).then(function(t){"success"==t.state?(e.frameUrl="https://"+i+".zbgedu.com/preview?question=paperInfoPreview&type="+(1==t.data.itemId?"acca":"cma")+"&value="+t.data.examenId+"&id="+e.techLoginInfo.token+"&agent=0",window.open(e.frameUrl)):e.$api.alert("服务器异常，请重试~")})},closeExamPop:function(){this.showExamSource=!1},hideExamlist:function(){this.showExamList=!1},handleCheckedExamsChange:function(){this.xData=[],this.ySeris=[],this.legendData=[],this.showEcharts?this.getEchartData():this.getExamenTaskList()},changeStatus:function(t){this.status=t,this.getExamenTaskList()},changeType:function(t){this.examType=t,this.getExamenTaskList()},clickSelectExam:function(t,e,a){this.currentExam=t,this.getRankData(t.taskId)},changeTableEcharts:function(){var t=this;this.showEcharts=!this.showEcharts,this.showEcharts?setTimeout(function(){t.getEchartData()},100):this.getExamenTaskList()},toTestpaper:function(t){this.updateSelectExam({selectExam:t}),window.open("/#/faceTestpaperAnalysis/"+this.$route.params.classId+"/"+t.taskId+"/"+this.classCourseInfo.courseplanName,"_blank")},toCompletion:function(t){this.updateSelectExam({selectExam:t}),window.open("/#/faceCompletion/"+this.$route.params.classId+"/"+t.taskId+"/"+this.classCourseInfo.courseplanName,"_blank")},getEchartData:function(){var t=this;this.xData=[],this.ySeris=[],this.legendData=[],y.a.ajax("getStatisticsFaceCoursePaperByChart",{token:this.techLoginInfo.token,classId:this.$route.params.classId}).then(function(e){if(e&&"success"==e.state){if(e.data){for(var a=0;a<e.data.studentList.length;a++)t.xData.push(e.data.studentList[a].name||"无姓名");for(var s=0;s<e.data.examList.length;s++){var i={name:s+1+"."+e.data.examList[s].name,type:"line",data:e.data.examList[s].data,id:e.data.examList[s].weekIndex+"/"+s};t.ySeris.push(i),t.legendData.push(s+1+"."+e.data.examList[s].name)}}t.drawPie()}else t.webApi.alert("服务器异常，请重试～")})},getRankData:function(t){var e=this;this.rankList="",y.a.ajax("getFaceStatisticsCoursePaperByLeader",{token:this.techLoginInfo.token,classId:this.$route.params.classId,taskId:t}).then(function(t){t&&"success"==t.state?(e.rankData=t.data,e.rankList=t.data.memberList,e.scrollRefresh=!e.scrollRefresh):e.webApi.alert("服务器异常，请重试～")})},getExamenTaskList:function(){var t=this;y.a.ajax("getStatisticsFaceCoursePaperList",{token:this.techLoginInfo.token,classId:this.$route.params.classId,taskLevel:this.examType,isSubmit:this.status}).then(function(e){e&&"success"==e.state?(t.tableData=e.data,t.tableData.length>0?(t.$refs.multipleTable.setCurrentRow(t.tableData[0]),t.currentExam=t.tableData[0],t.getRankData(t.tableData[0].taskId)):t.currentExam=""):t.webApi.alert("服务器异常，请重试～")})},getWeekList:function(){var t=this;y.a.ajax("getStatisticsFaceCoursePaperList",{token:this.techLoginInfo.token,classId:this.$route.params.classId}).then(function(e){e&&"success"==e.state?(e.data.length>0&&(e.data=e.data.sort(t.$api.compare("weekIndex"))),t.weekList=e.data,t.weekList.forEach(function(e,a){e.selectWeekId=e.weekIndex,t.checkedExam.push(a+1)}),e.data.length>0&&t.getExamenTaskList()):t.webApi.alert("服务器异常，请重试～")})},drawPie:function(){this.chartPie=k.a.init(document.getElementById("completionEchart")),this.chartPie.setOption({tooltip:{formatter:function(t,e,a){return t.seriesId.split("/")[0]+" "+t.seriesName+" "+t.name+" 正确率"+t.value+"% 当前排名"+t.data.rank},position:function(t,e,a,s,i){return[t[0],t[1]]}},legend:{data:this.legendData},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},toolbox:{feature:{}},xAxis:{type:"category",name:"姓名",data:this.xData},yAxis:{name:"正确率",type:"value"},dataZoom:[{type:"slider",start:0,end:50}],series:this.ySeris})}})},xe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"practiceStatistics-wrap"},[a("div",{staticClass:"dataStatisticsExam-wrap-s"},[a("classCenterHeader",{staticStyle:{overflow:"unset"},attrs:{classId:t.$route.params.classId},on:{returnDetailInfo:t.returnDetailInfo}}),t._v(" "),a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("div",{staticClass:"content-content"},[a("div",{staticClass:"content-left"},[a("div",{staticClass:"content-left-main"},[t.showEcharts?a("div",{staticClass:"echart-wrap-big"},[a("div",{staticClass:"echart-wrap-title"},[a("div",{staticClass:"title-right"},[a("a",{staticClass:"title-a-usual check-echarts-a",attrs:{href:"javascript:;"},on:{click:t.changeTableEcharts}},[a("i",{staticClass:"icon-check-echarts"}),t._v("查看表格")]),t._v(" "),a("a",{staticClass:"title-a-usual export-table-a",attrs:{href:"javascript:;"},on:{click:t.exportTable}},[t._v("导出表格")])])]),t._v(" "),t._m(1)]):t._e(),t._v(" "),t.showEcharts?t._e():a("div",{staticClass:"table-wrap-big"},[a("div",{staticClass:"table-wrap-title"},[a("div",{staticClass:"title-left"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeType},model:{value:t.examType,callback:function(e){t.examType=e},expression:"examType"}},t._l(t.typeList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeStatus},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.statusList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"title-right"},[a("a",{staticClass:"title-a-usual check-echarts-a",attrs:{href:"javascript:;"},on:{click:t.changeTableEcharts}},[a("i",{staticClass:"icon-check-echarts"}),t._v("查看图表")]),t._v(" "),a("a",{staticClass:"title-a-usual export-table-a",attrs:{href:"javascript:;"},on:{click:t.exportTable}},[t._v("导出表格")])])]),t._v(" "),a("div",{staticClass:"table-wrap"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"highlight-current-row":!0,"tooltip-effect":"dark"},on:{"row-click":t.clickSelectExam}},[a("el-table-column",{attrs:{label:"是否提交"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("1"==e.row.isSubmit?"已提交":"未提交"))]}}],null,!1,2576280319)}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"作业名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{class:["table-usual-icon",e.row.taskLevel+"-icon"]}),t._v(t._s(e.row.taskName)+"\n                    ")]}}],null,!1,4056467487)}),t._v(" "),a("el-table-column",{attrs:{prop:"isFinishName",label:"完成情况（完成/未完成/未学习）"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.finishedNum+"/"+e.row.unfinishedNum+"/"+e.row.notstartNum))]}}],null,!1,2140071717)}),t._v(" "),a("el-table-column",{attrs:{prop:"avgScore",width:"150",label:"平均分"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("-1"==e.row.avgScore?"--":e.row.avgScore))]}}],null,!1,672805700)}),t._v(" "),a("el-table-column",{attrs:{prop:"trueRate",width:"150",label:"正确率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("-1"==e.row.trueRate?"--":e.row.trueRate+"%"))]}}],null,!1,1510586539)}),t._v(" "),a("el-table-column",{attrs:{width:"240",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"mr20 table-a",staticStyle:{color:"#ff366d"},attrs:{href:"javascript:;"},on:{click:function(a){return t.checkExamSource(e.row)}}},[t._v("预览")]),t._v(" "),a("a",{staticClass:"mr20 table-a",attrs:{href:"javascript:;"},on:{click:function(a){return t.toTestpaper(e.row)}}},[t._v("卷面分析")]),t._v(" "),a("a",{staticClass:"table-a",attrs:{href:"javascript:;"},on:{click:function(a){return t.toCompletion(e.row)}}},[t._v("完成情况")])]}}],null,!1,3485963967)})],1)],1)])])]),t._v(" "),t.showEcharts?t._e():a("div",{staticClass:"content-right"},[a("div",{staticClass:"content-right-content"},[t.currentExam?[t.rankList?[a("div",{staticClass:"content-right-title"},[t._v("\n                  "+t._s(t.currentExam.taskName)+"\n                  ")]),t._v(" "),a("div",{staticClass:"content-right-main"},[a("ul",{staticClass:"rank-ul"},t._l(t.rankList,function(e,s){return a("li",{staticClass:"rank-li"},[a("div",{staticClass:"left"},[a("div",{staticClass:"avater-wrap"},[a("img",{staticClass:"avater-img",attrs:{src:"http://eximg.zbgedu.com"+e.memberAvatar,alt:"default"}})]),t._v("\n                        "+t._s(e.name)+"\n                      ")]),t._v(" "),a("div",{staticClass:"right"},[s>2?[t._v(t._s(s+1))]:[a("div",{staticClass:"jiangbei",class:[{first:0==s},{second:1==s},{third:2==s}]})]],2)])}),0)]),t._v(" "),a("div",{staticClass:"student-num-wrap"},[t._v("共"+t._s(t.rankData.totalCount)+"位学员，还有"+t._s(t.rankData.unansweredCount)+"位学员未开启学习进程！")])]:[a("div",{staticClass:"loading-wrap"},[a("iLoading")],1)]]:[a("div",{staticClass:"no-data"},[t._v("暂无数据")])]],2)])])]),t._v(" "),t.showExamSource?a("examSource",{attrs:{examParams:t.examParams},on:{closeExam:t.closeExamPop}}):t._e(),t._v(" "),t.showSelectWeek?a("selectWeek",{attrs:{weekList:t.weekList},on:{confirmSelectWeek:t.confirmSelectWeek,cancelSelectWeek:t.cancelSelectWeek}}):t._e()],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-title"},[e("span",{staticClass:"title-p"},[this._v("作业数据统计")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"echart-wrap"},[e("p",{staticClass:"name-p"},[this._v("完成情况示例图")]),this._v(" "),e("div",{staticClass:"completionEchart",attrs:{id:"completionEchart"}})])}]};var ye=a("C7Lr")(_e,xe,!1,function(t){a("VZCH")},null,null).exports,we=a("rVsN"),ke=a.n(we),Ie=a("T71r"),Se={name:"classCenterIndex",components:{iScroll:f,classCenterHeader:Ut,Calendar:a.n(Ie).a,iLoading:_},mounted:function(){this.getClassDetail(),this.getTimetableList()},computed:u()({},Object(x.d)({host:function(t){return t.global.host},envType:function(t){return t.global.envType}}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))},courseArrangeList1:function(){var t=this.courseArrangeList;return console.log(t),t.forEach(function(e,a,s){void 0==t[a].isShow&&(t[a].isShow=!1,t[a].isFirstShow=!1)}),t}}),data:function(){return{textTop:["日","一","二","三","四","五","六"],scrollRefresh:!1,courseArrangeList:[],curDate:"",courseId:"",examList:[],markDate:[],showAddExamPopup:!1,data3:[],defaultProps:{children:"children",label:"name"},ids:[],data4:[],classDetailInfo:"",selectExamInfo:{params:{},index:""}}},methods:{getClassDetail:function(){var t=this;y.a.ajax("queryCourseDetail",{token:this.techLoginInfo.token,courseArrangeId:this.$route.params.classId}).then(function(e){e&&"success"==e.state?t.classDetailInfo=e.data:(t.classDetailInfo={},t.webApi.alert(e.msg||"服务器异常，请稍后重试～"))})},toTestpaper:function(t){window.open("#/testpaperAnalysis/"+t.classId+"/"+t.courseResourseId+"/"+encodeURIComponent(this.classDetailInfo.courseplanName))},toExam:function(t){var e=encodeURIComponent(this.classDetailInfo.courseplanName);console.log(e),window.open("#/faceCompletion/"+t.classId+"/"+t.courseResourseId+"/"+e)},toPreview:function(t){var e=this,a=(new Date).getTime()+18e5,s=(new Date(a),window.location.hostname);/\.zbgedu\.com/.test(s)&&(s="zbgedu.com"),this.cookie.remove("zbgeduId");var i="mstiku";"1"==this.envType&&(i="mstikudemo"),y.a.ajax("getTaskInfoAndProgress",{token:this.techLoginInfo.token,taskId:t.courseResourseId}).then(function(t){"success"==t.state?(e.frameUrl="https://"+i+".zbgedu.com/preview?question=paperInfoPreview&type="+(1==t.data.itemId?"acca":"cma")+"&value="+t.data.examenId+"&id="+e.techLoginInfo.token+"&agent=0",window.open(e.frameUrl)):e.$api.alert("服务器异常，请重试~")})},confimAddExam:function(){var t=this.$refs.tree.getCheckedNodes();0==t.length?this.webApi.alert("请至少选择一个作业！"):this.saveClassExamen(t)},cancelAddExam:function(){this.showAddExamPopup=!1},showMore:function(t,e){var a=this;t.isShow=!t.isShow,this.selectExamInfo.params=t,this.selectExamInfo.index=e,t.isFirstShow||(t.isFirstShow=!0,this.getExamList(t).then(function(s){t.classExamenRespList=s.data,a.$set(a.courseArrangeList1,e,t)})),this.$nextTick(function(){a.scrollRefresh=!a.scrollRefresh})},saveClassExamen:function(t){for(var e=this,a=[],s=0;s<t.length;s++){var i=t[s],n={classId:this.$route.params.classId,courseArrangeDetailId:this.selectExamInfo.params.courseArrangeDetailId,chapterId:i.lessonCategoryId,examenId:i.examenId,examenName:i.name,courseId:this.courseId,courseResourseId:i.id};a.push(n)}var o=l()(a);y.a.ajax("saveClassExamen",{classExamenDate:o}).then(function(t){t&&"success"==t.state?e.getExamList(e.selectExamInfo.params).then(function(t){e.selectExamInfo.params.classExamenRespList=t.data,e.$set(e.courseArrangeList1,e.selectExamInfo.index,e.selectExamInfo.params),e.showAddExamPopup=!1,e.$nextTick(function(){e.scrollRefresh=!e.scrollRefresh})}):e.webApi.alert(t.msg),console.log(t)})},clickDay:function(t){this.curDate=this.Toyyyy_MM_dd(this.webApi.dateAddZero(t)),console.log(this.curDate),this.getTimetableList("fromDate")},Toyyyy_MM_dd:function(t){return t.substring(0,4)+"-"+t.substring(4,6)+"-"+t.substring(6,8)},changeDate:function(t){console.log(t)},closeAddExamPopup:function(){this.showAddExamPopup=!1},addExam:function(t,e){this.data3="",this.searchCourseAppraisalTaskBySubjectId(),this.selectExamInfo.params=t,this.selectExamInfo.index=e,this.showAddExamPopup=!0},getTreeData:function(){var t=this;setTimeout(function(){t.data4=t.filterTreeData(t.data3,t.ids)},1e3)},getTimetableList:function(t){var e=this;this.courseArrangeList="",y.a.ajax("queryCourseArrayDetailList",{token:this.techLoginInfo.token,courseArrangeId:this.$route.params.classId,courseDate:this.curDate}).then(function(a){a&&"success"==a.state?("fromDate"==t&&a.data.detailRowDMOList.forEach(function(t,a,s){t.isShow=!1,e.showMore(t,a)}),e.courseArrangeList=a.data.detailRowDMOList,e.courseArrangeList.forEach(function(t){e.markDate.push(t.courseDate)})):(e.courseArrangeList=[],e.webApi.alert("获取课表失败，请重试～"))})},changeObjKey:function(t){for(var e={chapters:"children",examens:"children",alias:"name"},a=0;a<t.length;a++){var s=t[a];for(var i in s){var n=e[i];n&&(this.webApi.isEmpty(s[i])||(s[n]=s[i],delete s[i]))}t[a].children&&t[a].children.length>0&&this.changeObjKey(t[a].children)}},checkAllList:function(){this.curDate="",this.getTimetableList()},getExamList:function(t){var e=this;return new ke.a(function(a,s){y.a.ajax("queryClassExamen",{courseArrangeDetailId:t.courseArrangeDetailId}).then(function(t){console.log(t),t&&"success"==t.state?a(t):e.webApi.alert(t.msg||"服务器异常，请稍后重试～")})})},searchCourseAppraisalTaskBySubjectId:function(){var t=this;y.a.ajax("searchCourseTaskBySubjectId",{subjectId:this.classDetailInfo.courseCategoryId,courseArrangeId:this.$route.params.classId,token:this.techLoginInfo.token}).then(function(e){t.data3=e.data,t.courseId=e.data[0].id,t.changeObjKey(t.data3),console.log(t.data3)})},filterTreeData:function(t,e){if(!Array.isArray(e))return t;var a=l()(t,function(t,a){return"object"===(void 0===a?"undefined":L()(a))&&(console.log(a.id),-1!==e.indexOf(a.id)&&(a.disabled=!0)),a},2);return JSON.parse(a)},deleteExam:function(t,e,a){var s=this;this.$confirm("确定要删除测评吗?","删除测评",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(a),s.selectExamInfo.params=t,s.selectExamInfo.index=e,y.a.ajax("deleteClassExamen",{courseArrangeDetailId:a.courseArrangeDetailId,examenId:a.examenId,classId:a.classId}).then(function(t){t&&"success"==t.state&&(s.getExamList(s.selectExamInfo.params).then(function(t){s.selectExamInfo.params.classExamenRespList=t.data,s.$set(s.courseArrangeList1,s.selectExamInfo.index,s.selectExamInfo.params)}),s.$nextTick(function(){s.scrollRefresh=!s.scrollRefresh}),s.$message({type:"success",message:"删除成功!"}))})}).catch(function(){s.$message({type:"info",message:"已取消删除"})})}}},Te={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"classCenterIndex-wrap"},[a("div",{staticClass:"classCenterIndex-wrap-z"},[a("classCenterHeader",{attrs:{classId:t.$route.params.classId}}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"content-left"},[a("div",{staticClass:"left-wrap"},[t.courseArrangeList?[t.courseArrangeList&&t.courseArrangeList.length>0?[a("iScroll",{attrs:{id:"leftWrap","is-refresh":t.scrollRefresh,toTop:!1}},[a("ul",{staticClass:"ul-wrap"},t._l(t.courseArrangeList1,function(e,s){return a("li",{staticClass:"li-wrap"},[a("div",{staticClass:"title-wrap"},[a("div",{staticClass:"title-wrap-left"},[a("span",{staticClass:"span-usual ml0"},[t._v("上课日期："+t._s(e.courseDate))]),t._v(" "),a("span",{staticClass:"span-usual"},[t._v("上课时段："+t._s(e.coursePeriod))]),t._v(" "),a("span",{staticClass:"span-usual"},[t._v("讲师："+t._s(e.realName))]),t._v(" "),a("span",{staticClass:"span-usual"},[t._v("教学点："+t._s(e.universityName))])]),t._v(" "),a("div",{staticClass:"title-wrap-right"},[a("span",{staticClass:"span-usual"},[t._v("试卷任务：共"+t._s(e.classExamenRespList?e.classExamenRespList.length:0)+"个试卷任务")]),t._v(" "),a("span",{staticClass:"showMore-wrap",domProps:{innerHTML:t._s(e.isShow?"收起更多":"展开更多")},on:{click:function(a){return t.showMore(e,s)}}})])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],staticClass:"more-wrap"},[a("div",{staticClass:"addExam-wrap"},[a("div",{staticClass:"exam-wrap"},[e.classExamenRespList&&e.classExamenRespList.length>0?a("ul",{staticClass:"ul-wrap1"},t._l(e.classExamenRespList,function(i,n){return a("li",{staticClass:"li-wrap1",class:[n%2==0?"leaf":"",0==n?"first-li":""]},[a("div",{staticClass:"title-exam"},[t._v(t._s(i.examenName))]),t._v(" "),a("div",{staticClass:"operating-wrap"},[a("a",{staticClass:"operating-a mr25",attrs:{href:"javascript:;"},on:{click:function(e){return t.toPreview(i)}}},[a("i",{staticClass:"yulan-icon icon-wrap"}),t._v("预览")]),t._v(" "),a("a",{staticClass:"operating-a mr25",attrs:{href:"javascript:;"},on:{click:function(e){return t.toTestpaper(i)}}},[a("i",{staticClass:"fenxi-icon icon-wrap"}),t._v("卷面分析")]),t._v(" "),a("a",{staticClass:"operating-a mr25",attrs:{href:"javascript:;"},on:{click:function(e){return t.toExam(i)}}},[a("i",{staticClass:"tongji-icon icon-wrap"}),t._v("完成情况")]),t._v(" "),a("a",{staticClass:"operating-a",attrs:{href:"javascript:;"},on:{click:function(a){return t.deleteExam(e,s,i)}}},[a("i",{staticClass:"shanchu-icon icon-wrap"}),t._v("删除")])])])}),0):t._e()]),t._v(" "),a("div",{staticClass:"button-wrap"},[a("a",{staticClass:"button-a",attrs:{href:"javascript:;"},on:{click:function(a){return t.addExam(e,s)}}},[t._v("添加试卷")])])])])])}),0)])]:[t._m(0)]]:[a("iLoading")]],2)]),t._v(" "),a("div",{staticClass:"content-right"},[a("div",{staticClass:"right-wrap"},[a("Calendar",{attrs:{sundayStart:!0,markDate:t.markDate,textTop:t.textTop},on:{choseDay:t.clickDay,changeMonth:t.changeDate}}),t._v(" "),a("div",{staticClass:"all-wrap"},[a("el-button",{attrs:{type:"primary"},on:{click:t.checkAllList}},[t._v("查看全部课表")])],1)],1)])])],1),t._v(" "),t.showAddExamPopup?a("div",{staticClass:"addExam-popup"},[a("div",{staticClass:"popup-box"},[a("div",{staticClass:"popup-content-wrap"},[a("div",{staticClass:"title-wrap"},[t._v("\n          添加测评\n        ")]),t._v(" "),[t.data3?a("div",{staticClass:"el-tree-wrap"},[a("el-tree",{ref:"tree",attrs:{data:t.data3,"check-strictly":"","node-key":"id",props:t.defaultProps,"default-expand-all":!0},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.node,i=e.data;return a("span",{staticClass:"custom-tree-node"},["exam"==i.taskType||"appraisal"==i.taskType?a("span",[a("el-checkbox",{staticStyle:{"margin-right":"5px"},attrs:{disabled:i.isHas},model:{value:s.checked,callback:function(e){t.$set(s,"checked",e)},expression:"node.checked"}},[a("span",{staticClass:"node-label-text"},[t._v(t._s(s.label))])])],1):a("span",{staticClass:"node-label-text"},[t._v(t._s(s.label))])])}}],null,!1,266359912)})],1):a("div",[a("iLoading")],1)],t._v(" "),a("div",{staticClass:"button-wrap"},[a("el-button",{attrs:{size:"small",type:"info",plain:""},on:{click:t.cancelAddExam}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.confimAddExam}},[t._v("确定")])],1)],2),t._v(" "),a("div",{staticClass:"close-btn",on:{click:t.closeAddExamPopup}},[a("i",{staticClass:"el-icon-close"})])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"has-no-data-wrap"},[e("div",{staticClass:"has-no-data"},[e("div",{staticClass:"img-wrap"},[e("img",{staticClass:"img-no",attrs:{src:a("a4/I"),alt:"暂无内容"}})]),this._v(" "),e("p",{staticClass:"no-text"},[this._v("暂无内容，点击其他日期试试吧～")])])])}]};var De=a("C7Lr")(Se,Te,!1,function(t){a("kRW6")},null,null).exports,Pe={name:"youboCenter",components:{iHeader:Ct.a,iLoading:_},mounted:function(){this.getClassDetail()},computed:u()({},Object(x.d)({selectClassInfo:function(t){return t.classManage.selectClassInfo},host:function(t){return t.global.host}}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}}),data:function(){return{classDetailInfo:""}},methods:{getRouter:function(){var t,e=this.$route.path;return e=(t=e.split("/")).length>2?"/"+t[1]+"/"+t[2]:"/"+t[1]},changeRouter:function(t){this.$router.push({path:t+this.$route.params.classId})},getClassDetail:function(){var t=this;y.a.ajax("getClassInfo",{token:this.techLoginInfo.token,classId:this.$route.params.classId}).then(function(e){e&&"success"==e.state?t.classDetailInfo=e.data:(t.classDetailInfo={},t.webApi.alert(e.msg||"服务器异常，请稍后重试～"))})}}},Ee={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app youboCenter-wrap",attrs:{id:"app"}},[a("el-container",{staticClass:"youboCenter-wrap-container-wrap"},[a("el-header",[a("iHeader")],1),t._v(" "),a("el-container",{staticClass:"youboCenter-wrap-container"},[a("el-aside",{staticClass:"youboCenter-wrap-aside",attrs:{width:"160px"}},[a("ul",{staticClass:"menu-wrap-ul"},[a("li",{staticClass:"menu-wrap-li"},[a("div",{staticClass:"menu-title"},[t._v("教学任务")]),t._v(" "),a("ul",{staticClass:"menu-ul"},[a("li",{staticClass:"menu-li",class:["/youboCenter/youboCenterIndex"==t.getRouter()?"active":""],on:{click:function(e){return t.changeRouter("/youboCenter/youboCenterIndex/")}}},[t._v("任务预览")])])]),t._v(" "),a("li",{staticClass:"menu-wrap-li"},[a("div",{staticClass:"menu-title"},[t._v("数据统计")]),t._v(" "),a("ul",{staticClass:"menu-ul"},[a("li",{staticClass:"menu-li",class:["/youboCenter/taskStatistics"==t.getRouter()?"active":""],on:{click:function(e){return t.changeRouter("/youboCenter/taskStatistics/")}}},[t._v("任务统计")]),t._v(" "),a("li",{staticClass:"menu-li",class:["/youboCenter/practiceStatistics"==t.getRouter()?"active":""],on:{click:function(e){return t.changeRouter("/youboCenter/practiceStatistics/")}}},[t._v("作业统计")]),t._v(" "),a("li",{staticClass:"menu-li",class:["/youboCenter/liveStatistics"==t.getRouter()?"active":""],on:{click:function(e){return t.changeRouter("/youboCenter/liveStatistics/")}}},[t._v("直播统计")]),t._v(" "),a("li",{staticClass:"menu-li",class:["/youboCenter/aqStatistics"==t.getRouter()?"active":""],on:{click:function(e){return t.changeRouter("/youboCenter/aqStatistics/")}}},[t._v("答疑辅导统计")])])])])]),t._v(" "),a("el-main",{staticClass:"youboCenter-el-main"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.$route.meta.hideHeader,expression:"!$route.meta.hideHeader"}],staticClass:"class-usual-info-wrap"},[t.classDetailInfo?[a("div",{staticClass:"img-wrap"},[a("img",{staticClass:"course-img",attrs:{src:t.classDetailInfo.bigCoverPath?t.host.img+t.classDetailInfo.bigCoverPath:"/static/flippedClassBg.png",alt:"课程封面图片"}})]),t._v(" "),a("div",{staticClass:"title-middle"},[a("p",{staticClass:"course-p"},[t._v(t._s(t.classDetailInfo.className))]),t._v(" "),a("p",{staticClass:"subject-name-p"},[a("span",{staticClass:"mr10"},[t._v("课程："+t._s(t.classDetailInfo.courseName))]),a("span",{staticClass:"mr10"},[t._v("项目-科目："+t._s(t.classDetailInfo.categoryName+"-"+t.classDetailInfo.subjectName))]),a("span",{staticClass:"mr10"},[t._v("学员数："+t._s(t.classDetailInfo.studentNum))])])]),t._v(" "),a("div",{staticClass:"title-right"},[a("ul",{staticClass:"title-right-ul"},[a("li",{staticClass:"title-right-li mr15"},[a("el-tooltip",{attrs:{placement:"bottom"}},[a("div",{staticStyle:{"font-size":"12px","line-height":"18px",padding:"10px"},attrs:{slot:"content"},slot:"content"},[t.classDetailInfo.lecturerName?[t._v("讲师："+t._s(t.classDetailInfo.lecturerName))]:t._e(),t._v(" "),t.classDetailInfo.teacherName?[a("br"),t._v("班主任："+t._s(t.classDetailInfo.teacherName))]:t._e()],2),t._v(" "),a("div",[a("i",{staticClass:"title-i teacher-info-i"}),a("br"),t._v("教师信息")])])],1),t._v(" "),a("li",{staticClass:"title-right-li"},[a("el-tooltip",{attrs:{placement:"bottom"}},[a("div",{staticStyle:{"font-size":"12px","line-height":"18px",padding:"10px"},attrs:{slot:"content"},slot:"content"},[t._v("\n                      视频数："+t._s(t.classDetailInfo.videoNum)+"个"),a("br"),t._v("\n                      作业："+t._s(t.classDetailInfo.examNum)+"个"),a("br"),t._v("\n                      文档："+t._s(t.classDetailInfo.pdfreadNum)+"个"),a("br"),t._v("\n                      直播数："+t._s(t.classDetailInfo.openCourseNum)+"个"),a("br"),t._v("\n                      视频时长："+t._s(t.$api.formatSeconds(t.classDetailInfo.videoTime))+"\n                    ")]),t._v(" "),a("div",[a("i",{staticClass:"title-i study-action-i"}),a("br"),t._v("学习活动")])])],1)])])]:[a("iLoading")]],2),t._v(" "),[t.classDetailInfo?a("div",{staticClass:"router-view-wrap"},[a("router-view",{attrs:{classCourseInfo:t.classDetailInfo}})],1):a("div",{staticStyle:{"margin-top":"40px"}},[a("iLoading")],1)]],2)],1)],1)],1)},staticRenderFns:[]};var Ae=a("C7Lr")(Pe,Ee,!1,function(t){a("oznC")},null,null).exports,Le={name:"taskLi",props:["taskInfo"],components:{videoPlayer:$},methods:{preview:function(){}}},Ne={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-li-wrap",on:{click:t.preview}},[a("i",{class:["icon-usual",t.taskInfo.taskType]}),t._v(t._s(t.taskInfo.title)+"\n  "),"exam"==t.taskInfo.taskType?a("span",{staticStyle:{"margin-left":"30px"}},[t._v("作业类型："+t._s("appraisal"==t.taskInfo.taskLevel?"测评":"练习"))]):t._e(),t._v(" "),"openCourse"==t.taskInfo.taskType?a("span",{staticStyle:{"margin-left":"30px"}},[t._v("开始时间："+t._s(t.webApi.formatDate(t.taskInfo.openCourseStartTime,"ALL"))+"      结束时间："+t._s(t.webApi.formatDate(t.taskInfo.openCourseEndTime,"ALL"))+"       "),a("span",{staticStyle:{color:"#ff366d"}},[t._v("直播状态："+t._s("0"==t.taskInfo.openCourseState?"直播未开始":"1"==t.taskInfo.openCourseState?"正在直播":"直播已结束"))])]):t._e()])},staticRenderFns:[]};var Re=a("C7Lr")(Le,Ne,!1,function(t){a("m+OD")},null,null).exports,ze={name:"examenSource",components:{iLoading:_},props:["examenInfo"],computed:u()({},Object(x.d)({envType:function(t){return t.global.envType}}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}}),data:function(){return{showIframe:!1,frameUrl:""}},mounted:function(){this.getFrameUrl()},methods:{close:function(){this.$emit("closeExamen")},getFrameUrl:function(){var t=this,e=(new Date).getTime()+18e5,a=(new Date(e),window.location.hostname);/\.zbgedu\.com/.test(a)&&(a="zbgedu.com"),this.cookie.remove("zbgeduId");var s="mstiku";"1"==this.envType&&(s="mstikudemo"),y.a.ajax("getTaskInfoAndProgress",{token:this.techLoginInfo.token,taskId:this.examenInfo.taskId}).then(function(e){"success"==e.state?(t.frameUrl="https://"+s+".zbgedu.com/preview?question=paperInfoPreview&type="+(1==e.data.itemId?"acca":"cma")+"&value="+e.data.examenId+"&id="+t.techLoginInfo.token+"&agent=0",setTimeout(function(){t.showIframe=!0},2e3)):t.$api.alert("服务器异常，请重试~")})}}},Oe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"examenSource-wrap"},[a("div",{staticClass:"examSource-w"},[a("el-container",[a("el-header",{attrs:{height:"50px"}},[t._v("试卷预览\n        "),a("i",{staticClass:"close-btn",on:{click:t.close}})]),t._v(" "),a("el-container",[a("el-main",[a("div",{staticClass:"model-wrap-fix"}),t._v(" "),a("iframe",{directives:[{name:"show",rawName:"v-show",value:t.showIframe,expression:"showIframe"}],staticStyle:{width:"100%",height:"100%"},attrs:{src:t.frameUrl,frameborder:"0"}}),t._v(" "),t.showIframe?t._e():a("iLoading")],1)],1)],1)],1)])},staticRenderFns:[]};var je=a("C7Lr")(ze,Oe,!1,function(t){a("kl9r")},null,null).exports,Fe=a("rrQB");if("server"!==Object({NODE_ENV:"production"}).VUE_ENV){var Me=a("yPc9").default,$e=a("fuJa");if("undefined"!=typeof window&&"Worker"in window&&-1===navigator.appVersion.indexOf("MSIE 10")){var qe=a("iWIB");$e.GlobalWorkerOptions.workerPort=new qe}var Be=Object(Fe.a)(Me($e))}else Be=Object(Fe.a)({});var Ue=Be;var We=a("C7Lr")(Ue,null,!1,function(t){a("/pdO")},null,null).exports,Ve={name:"pdfPreview.vue",props:["taskInfo"],components:{pdf:We},data:function(){return{src:"",numPages:void 0}},mounted:function(){var t=this,e=We.createLoadingTask("https://exstatic.zbgedu.com/upload/admin/201906/d92a9c2d69129f66f1fdbe755591d582.pdf");this.src=e,this.src.then(function(e){t.numPages=e.numPages})}},Ge={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pdfPreview-wrap"},[a("div",{staticClass:"error-wrap"},[t._v("无法获取有效文件，请联系网站管理员~")]),t._v(" "),t._l(t.numPages,function(e){return a("pdf",{key:e,staticStyle:{display:"inline-block",width:"99%",border:"1px solid #eee"},attrs:{src:t.src,page:e}})})],2)},staticRenderFns:[]};var He={name:"youboCenterIndex",components:{iLoading:_,iScroll:f,taskLi:Re,videoPlayer:$,pdfPreview:a("C7Lr")(Ve,Ge,!1,function(t){a("IEd0")},null,null).exports,examenSource:je},props:{test:String},computed:u()({},Object(x.d)({host:function(t){return t.global.host}}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}}),data:function(){return{classDetailInfo:"",scrollRefresh:!1,showPreview:!1,showVideoPlayer:!1,showPdfPreview:!1,taskInfo:""}},mounted:function(){this.getClassDetail()},methods:{getClassDetail:function(){var t=this;y.a.ajax("queryStudyPlanDetail",{classId:this.$route.params.classId,token:this.techLoginInfo.token}).then(function(e){e&&"success"==e.state&&(e.data.forEach(function(t,e){t.showDetail=!1,t.isCurrentWeek&&(t.showDetail=!0)}),t.classDetailInfo=e.data,t.scrollRefresh=!t.scrollRefresh)})},close:function(){this.showPreview=!1},closeExamen:function(){this.showPreview=!1},toggleWeek:function(t,e){this.classDetailInfo.forEach(function(t,a){e==a&&(t.showDetail=!t.showDetail)}),this.scrollRefresh=!this.scrollRefresh},previewTask:function(t){if("openCourse"==t.taskType){if(!t.openCourseSiteId&&!t.openCourseCcid)return void this.webApi.alert("暂不支持预览该类型任务~");t.taskType="video"}this.taskInfo=t,this.showPreview=!0}}},Ze={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"youboCenterIndex-wrap"},[t.classDetailInfo?a("div",{staticClass:"youboCenterIndex-content"},[a("iScroll",{attrs:{id:"youboCenterIndexContent","is-refresh":t.scrollRefresh,toTop:!1}},t._l(t.classDetailInfo,function(e,s){return a("div",{key:s,staticClass:"week-wrap"},[a("div",{staticClass:"week-title",on:{click:function(a){return t.toggleWeek(e,s)}}},[a("div",{staticClass:"week-title-left"},[t._v("第"+t._s(s+1)+"周计划："+t._s(t.webApi.formatDate(e.classStartDate,"YMD"))+"至"+t._s(t.webApi.formatDate(e.classEndDate,"YMD")))]),t._v(" "),a("div",{staticClass:"week-title-right"},[t._v("任务总数："+t._s(e.taskNum?e.taskNum:0)+"个      视频总时长："+t._s(e.videoTime?t.webApi.formatSeconds(e.videoTime):"0h0m0s"))])]),t._v(" "),e.showDetail?t._l(e.chapters,function(e,s){return a("div",{key:s,staticClass:"week-content"},[e.isTasks?a("div",[a("div",{staticClass:"chapter-node-title"},[t._v(t._s(e.title))]),t._v(" "),a("ul",{staticClass:"node-ul"},t._l(e.tasks,function(e,s){return a("li",{key:s,staticClass:"node-li",on:{click:function(a){return t.previewTask(e)}}},[a("taskLi",{attrs:{taskInfo:e}})],1)}),0)]):a("div",{staticClass:"chapter-wrap"},[a("div",{class:["chapter-title","chapter-title"+e.level]},[t._v(t._s(e.chapterTitle))]),t._v(" "),e.tasks&&e.tasks.length>0?a("div",[a("ul",{staticClass:"node-ul"},t._l(e.tasks,function(e,s){return a("li",{key:s,staticClass:"node-li",on:{click:function(a){return t.previewTask(e)}}},[a("taskLi",{attrs:{taskInfo:e}})],1)}),0)]):t._e()])])}):t._e()],2)}),0)],1):a("div",[a("iLoading")],1),t._v(" "),t.showPreview?a("div",{staticClass:"videoPlayer-wrap"},["exam"==t.taskInfo.taskType?a("examenSource",{attrs:{examenInfo:t.taskInfo},on:{closeExamen:t.closeExamen}}):a("div",{staticClass:"videoPlayer-wrap-content"},["video"==t.taskInfo.taskType?a("videoPlayer",{attrs:{videoParams:t.taskInfo}}):t._e(),t._v(" "),"pdfread"==t.taskInfo.taskType?a("pdfPreview",{attrs:{taskInfo:t.taskInfo}}):t._e(),t._v(" "),a("i",{staticClass:"close-btn",on:{click:t.close}})],1)],1):t._e()])},staticRenderFns:[]};var Qe=a("C7Lr")(He,Ze,!1,function(t){a("LudB")},null,null).exports,Ye={name:"studentReport",components:{iScroll:f},data:function(){return{showM:!1,scrollRefresh:!1,tableData:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}]}},mounted:function(){this.drawPie(),this.drawPie1()},methods:{drawPie:function(){this.chartPie=k.a.init(document.getElementById("taskEcharts")),this.chartPie.setOption({title:{text:"任务完成情况",textAlign:"left"},tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{show:!0}}},toolbox:{show:!0,feature:{mark:{show:!0}}},calculable:!0,legend:{data:["Growth","未开始","进行中","已完成"],itemGap:5},grid:{top:"12%",left:"1%",right:"10%",containLabel:!0},xAxis:[{type:"category",data:["di","yi","zhou"]}],yAxis:[{type:"value",name:"学员人数"}],dataZoom:[{show:!0,start:0,end:50}],series:[{name:"未开始",type:"bar",data:[10,20,30],color:"#DB8E92"},{name:"进行中",type:"bar",data:[20,30,40],color:"#D7DD9A"},{name:"已完成",type:"bar",data:[20,30,40],color:"#FCE58D"}]})},drawPie1:function(){k.a.init(document.getElementById("timeEcharts")).setOption({tooltip:{},legend:{data:["实际开销（Actual Spending）"]},radar:{name:{textStyle:{color:"#666",fontSize:"12px",borderRadius:3,padding:[3,5]}},indicator:[{name:"已解决",max:100},{name:"已回复",max:100},{name:"未回复",max:100},{name:"学员追问",max:100}],radius:80},series:[{type:"radar",data:[{value:[10,50,30,90],name:"实际开销（Actual Spending）",areaStyle:{normal:{opacity:.2,color:new k.a.graphic.RadialGradient(.5,.5,1,[{color:"#ff366d",offset:0},{color:"#ff366d",offset:1}])}}}]}]})}}},Ke={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("iScroll",{attrs:{id:"studentReport","is-refresh":t.scrollRefresh}},[a("div",{staticClass:"studentReport-wrap"},[a("div",{staticClass:"s-r-title"},[a("div",{staticClass:"title-left"},[t._v("总体完成情况")]),t._v(" "),a("div",{staticClass:"title-right"})]),t._v(" "),a("div",{staticClass:"student-table-wrap"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"",border:"",height:"340"}},[a("el-table-column",{attrs:{prop:"date",label:"日期",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址"}})],1)],1),t._v(" "),a("div",{staticClass:"single-student-wrap"},[a("div",{staticClass:"s-t-title"},[a("img",{attrs:{src:"",alt:"",width:"32",height:"32"}}),a("span",{staticClass:"name-span"},[t._v("路费")])]),t._v(" "),a("div",{staticClass:"s-t-content"},[a("div",{staticClass:"content-left"},[a("div",{staticClass:"taskEcharts",attrs:{id:"taskEcharts"}})]),t._v(" "),a("div",{staticClass:"content-right"},[a("div",{staticClass:"timeEcharts",attrs:{id:"timeEcharts"}})])])])])])},staticRenderFns:[]};var Je=a("C7Lr")(Ye,Ke,!1,function(t){a("msH7")},null,null).exports,Xe={name:"overallReport",components:{iScroll:f},data:function(){return{showCompeletChart:!0,scrollRefresh:!0,practiceType:"1",rankList:[{name:"小二黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"},{name:"小三黑"}]}}},ta={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"overallReport-wrap"},[a("div",{staticClass:"overallReport-left"},[t._m(0),t._v(" "),a("div",{staticClass:"left-bottom"},[t.showCompeletChart?a("div",{staticClass:"l-b-content"},[t._m(1),t._v(" "),t._m(2)]):a("div",{staticClass:"l-b-content"})])]),t._v(" "),a("div",{staticClass:"overallReport-right"},[a("div",{staticClass:"content-right-content"},[a("div",{staticClass:"content-right-title"},[t._m(3),t._v(" "),a("div",{staticClass:"title-right"},[a("el-select",{attrs:{size:"small"},model:{value:t.practiceType,callback:function(e){t.practiceType=e},expression:"practiceType"}},[a("el-option",{attrs:{value:"1",label:"全部练习"}}),t._v(" "),a("el-option",{attrs:{value:"2",label:"已学习"}}),t._v(" "),a("el-option",{attrs:{value:"3",label:"未学习"}})],1)],1)]),t._v(" "),a("div",{staticClass:"content-right-main"},[a("iScroll",{attrs:{"is-refresh":t.scrollRefresh}},[a("ul",{staticClass:"rank-ul"},t._l(t.rankList,function(e,s){return a("li",{staticClass:"rank-li"},[a("div",{staticClass:"left"},[a("div",{staticClass:"avater-wrap"},[a("img",{staticClass:"avater-img",attrs:{src:"http://eximg.zbgedu.com/upload/avatar/big_0.png",alt:"default"}})]),t._v("\n                "+t._s(e.name)+"\n              ")]),t._v(" "),a("div",{staticClass:"right"},[s>2?[t._v(t._s(s+1))]:[a("div",{staticClass:"jiangbei",class:[{first:0==s},{second:1==s},{third:2==s}]})]],2)])}),0)])],1),t._v(" "),a("div",{staticClass:"student-num-wrap"},[t._v("共120位学员，还有20位学员未开启学习进程！")])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"left-top"},[a("div",{staticClass:"usual-compeleted"},[a("div",{staticClass:"u-c-title-wrap"},[a("div",{staticClass:"u-c-title"},[t._v("总体完成情况")])]),t._v(" "),a("p",{staticClass:"text-p"},[t._v("学员总人数：42人")]),t._v(" "),a("div",{staticClass:"u-c-left"},[a("p",{staticClass:"text-p"},[t._v("课程任务数：共17个视频任务")]),t._v(" "),a("p",{staticClass:"text-p"},[t._v("测评任务数：共8套测评任务")]),t._v(" "),a("p",{staticClass:"text-p"},[t._v("练习任务数：共8套练习任务")]),t._v(" "),a("p",{staticClass:"text-p"},[t._v("直播任务数：共3场直播任务")])]),t._v(" "),a("div",{staticClass:"u-c-right"},[a("p",{staticClass:"text-p"},[t._v("观看视频总用时：24h12m9s")]),t._v(" "),a("p",{staticClass:"text-p"},[t._v("测评总用时：24h12m9s")]),t._v(" "),a("p",{staticClass:"text-p"},[t._v("练习总用时：24h12m9s")]),t._v(" "),a("p",{staticClass:"text-p"},[t._v("本周学习总用时：24h12m9s")])])]),t._v(" "),a("div",{staticClass:"usual-compeleted fr"},[a("div",{staticClass:"u-c-title-wrap"},[a("div",{staticClass:"u-c-title"},[t._v("平均完成情况")])]),t._v(" "),a("p",{staticClass:"text-p"},[t._v("平均完成率：20%")]),t._v(" "),a("div",{staticClass:"u-c-left"},[a("p",{staticClass:"text-p"},[t._v("课程任务：平均完成11个任务")]),t._v(" "),a("p",{staticClass:"text-p"},[t._v("测评任务：平均完成2套测评任务")]),a("p",{staticClass:"text-p"},[t._v("练习任务：平均完成3套练习任务")]),t._v(" "),a("p",{staticClass:"text-p"},[t._v("直播任务：平均观看2场直播")])]),t._v(" "),a("div",{staticClass:"u-c-right"},[a("p",{staticClass:"text-p"},[t._v("观看视频平均用时：24h12m9s")]),t._v(" "),a("p",{staticClass:"text-p"},[t._v("测评平均用时：24h12m9s")]),t._v(" "),a("p",{staticClass:"text-p"},[t._v("练习平均用时：24h12m9s")]),t._v(" "),a("p",{staticClass:"text-p"},[t._v("本周学习平均用时：24h12m9s")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"l-b-title"},[e("div",{staticClass:"title-left"},[this._v("任务用时图表")]),this._v(" "),e("div",{staticClass:"title-right"},[this._v("任务完成图表")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"chart-wrap"},[e("div",{staticClass:"time-chart",attrs:{id:"time-chart"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title-left"},[e("i",{staticClass:"icon-zhuangyuan"}),this._v("状元榜")])}]};var ea=a("C7Lr")(Xe,ta,!1,function(t){a("2fcg")},null,null).exports,aa={name:"practiceStatistics",components:{iScroll:f,examSource:U,selectWeek:be,iLoading:_},props:["classCourseInfo"],mounted:function(){this.getWeekList()},computed:u()({},Object(x.d)({envType:function(t){return t.global.envType}}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}}),data:function(){return{showEcharts:!1,showExamList:!1,scrollRefresh:!1,scrollRefresh1:!1,str:"",showSelectWeek:!1,xData:[],ySeris:[],legendData:[],examParams:"",showExamSource:!1,examData:"",checkedExam:[],rankData:"",status:"",weekList:"",selectWeekList:"",examList:[],tableData:[],statusList:[{label:"全部状态",value:""},{label:"未提交",value:"0"},{label:"已提交",value:"1"}],typeList:[{label:"全部类型",value:""},{label:"测评试卷",value:"appraisal"},{label:"练习试卷",value:"practice"}],examType:"",rankList:"",currentExam:""}},methods:u()({},Object(x.c)("classManage",["updateSelectExam"]),{exportTable:function(){this.showSelectWeek=!0},showExamListBtn:function(){var t=this;this.showExamList=!0,setTimeout(function(){t.scrollRefresh1=!t.scrollRefresh1},500)},confirmSelectWeek:function(t){console.log(t),t.indexOf("all")>-1&&(t=[]),this.webApi.postExcelFile({token:this.techLoginInfo.token,classId:this.$route.params.classId,courseId:this.classCourseInfo.courseId,courseTeachingType:"flipped",studyPlanExtendIndexList:t.join(","),taskLevel:"",isSubmit:this.status},("1"==this.envType?"https://apidemo.zbgedu.com":"https://zbapi.zbgedu.com")+"/api/study/userAction/statistics/exportStatisticsCoursePaper"),this.showSelectWeek=!1},cancelSelectWeek:function(){this.showSelectWeek=!1},checkExamSource:function(t){var e=this,a=(new Date).getTime()+18e5,s=(new Date(a),window.location.hostname);/\.zbgedu\.com/.test(s)&&(s="zbgedu.com"),this.cookie.remove("zbgeduId");var i="mstiku";"1"==this.envType&&(i="mstikudemo"),y.a.ajax("getTaskInfoAndProgress",{token:this.techLoginInfo.token,taskId:t.taskId}).then(function(t){"success"==t.state?(e.frameUrl="https://"+i+".zbgedu.com/preview?question=paperInfoPreview&type="+(1==t.data.itemId?"acca":"cma")+"&value="+t.data.examenId+"&id="+e.techLoginInfo.token+"&agent=0",window.open(e.frameUrl)):e.$api.alert("服务器异常，请重试~")})},closeExamPop:function(){this.showExamSource=!1},hideExamlist:function(){this.showExamList=!1},handleCheckedExamsChange:function(){this.xData=[],this.ySeris=[],this.legendData=[],this.showEcharts?this.getEchartData():this.getExamenTaskList()},changeStatus:function(t){this.status=t,this.getExamenTaskList()},changeType:function(t){this.examType=t,this.getExamenTaskList()},clickSelectExam:function(t,e,a){this.currentExam=t,this.getRankData(t.taskId)},changeTableEcharts:function(){var t=this;this.showEcharts=!this.showEcharts,this.showEcharts?setTimeout(function(){t.getEchartData()},100):this.getExamenTaskList()},toTestpaper:function(t){this.updateSelectExam({selectExam:t}),window.open("/#"+this.$route.path+"/youboTestpaperAnalysis/"+t.taskId,"_blank")},toCompletion:function(t){this.updateSelectExam({selectExam:t}),window.open("/#"+this.$route.path+"/youboCompletion/"+t.taskId,"_blank")},getEchartData:function(){var t=this;this.xData=[],this.ySeris=[],this.legendData=[],y.a.ajax("getStatisticsCoursePaperByChart",{token:this.techLoginInfo.token,classId:this.$route.params.classId,courseId:this.classCourseInfo.courseId,courseTeachingType:"flipped",studyPlanExtendIndexList:this.checkedExam.join(",")}).then(function(e){if(e&&"success"==e.state){if(e.data){for(var a=0;a<e.data.studentList.length;a++)t.xData.push(e.data.studentList[a].name||"无姓名");for(var s=0;s<e.data.examList.length;s++){var i={name:s+1+"."+e.data.examList[s].name,type:"line",data:e.data.examList[s].data,id:e.data.examList[s].weekIndex+"/"+s};t.ySeris.push(i),t.legendData.push(s+1+"."+e.data.examList[s].name)}}t.drawPie()}else t.webApi.alert("服务器异常，请重试～")})},getRankData:function(t){var e=this;this.rankList="",y.a.ajax("getStatisticsCoursePaperByLeader",{token:this.techLoginInfo.token,classId:this.$route.params.classId,courseId:this.classCourseInfo.courseId,courseTeachingType:"flipped",taskId:t}).then(function(t){t&&"success"==t.state?(e.rankData=t.data,e.rankList=t.data.memberList,e.scrollRefresh=!e.scrollRefresh):e.webApi.alert("服务器异常，请重试～")})},getExamenTaskList:function(){var t=this;y.a.ajax("getExamenTaskList",{token:this.techLoginInfo.token,classId:this.$route.params.classId,courseId:this.classCourseInfo.courseId,courseTeachingType:"flipped",studyPlanExtendIndexList:this.checkedExam.join(","),taskLevel:this.examType,isSubmit:this.status}).then(function(e){e&&"success"==e.state?(t.tableData=e.data,t.tableData.length>0&&(t.$refs.multipleTable.setCurrentRow(t.tableData[0]),t.currentExam=t.tableData[0],t.getRankData(t.tableData[0].taskId))):t.webApi.alert("服务器异常，请重试～")})},getWeekList:function(){var t=this;y.a.ajax("queryStudyPlanExtendSelect",{token:this.techLoginInfo.token,classId:this.$route.params.classId}).then(function(e){e&&"success"==e.state?(e.data.length>0&&(e.data=e.data.sort(t.$api.compare("weekIndex"))),t.weekList=e.data,t.weekList.forEach(function(e,a){e.selectWeekId=e.weekIndex,t.checkedExam.push(a+1)}),e.data.length>0&&t.getExamenTaskList()):t.webApi.alert("服务器异常，请重试～")})},drawPie:function(){this.chartPie=k.a.init(document.getElementById("completionEchart")),this.chartPie.setOption({tooltip:{formatter:function(t,e,a){return t.seriesId.split("/")[0]+" "+t.seriesName+" "+t.name+" 正确率"+t.value+"% 当前排名"+t.data.rank},position:function(t,e,a,s,i){return[t[0],t[1]]}},legend:{data:this.legendData},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},toolbox:{feature:{}},xAxis:{type:"category",name:"姓名",data:this.xData},yAxis:{name:"正确率",type:"value"},dataZoom:[{type:"slider",start:0,end:50}],series:this.ySeris})}})},sa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"practiceStatistics-wrap"},[a("div",{staticClass:"content"},[a("div",{staticClass:"content-title"},[a("span",{staticClass:"title-p"},[t._v("作业数据统计")]),t._v(" "),a("div",{staticClass:"title-left"},[a("i",{staticClass:"select-exam-i",on:{click:t.showExamListBtn}}),t._v(" "),t.showExamList?a("div",{staticClass:"exam-list-wrap",on:{mouseleave:t.hideExamlist}},[a("div",{staticClass:"dialog-border"}),t._v(" "),a("div",{staticClass:"ul-wrap"},[a("iScroll",{attrs:{"is-refresh":t.scrollRefresh1}},[a("el-checkbox-group",{on:{change:t.handleCheckedExamsChange},model:{value:t.checkedExam,callback:function(e){t.checkedExam=e},expression:"checkedExam"}},[a("ul",{staticClass:"exam-list-ul"},t._l(t.weekList,function(e,s){return a("li",{staticClass:"exam-list-li"},[a("el-checkbox",{key:e.weekIndex,attrs:{label:e.weekIndex}},[t._v(t._s(e.title)+"（"+t._s(t.webApi.formatDate(e.startDate,"YMD"))+"至"+t._s(t.webApi.formatDate(e.endDate,"YMD"))+"）")])],1)}),0)])],1)],1)]):t._e()])]),t._v(" "),a("div",{staticClass:"content-content"},[a("div",{staticClass:"content-left"},[a("div",{staticClass:"content-left-main"},[t.showEcharts?a("div",{staticClass:"echart-wrap-big"},[a("div",{staticClass:"echart-wrap-title"},[a("div",{staticClass:"title-right"},[a("a",{staticClass:"title-a-usual check-echarts-a",attrs:{href:"javascript:;"},on:{click:t.changeTableEcharts}},[a("i",{staticClass:"icon-check-echarts"}),t._v("查看表格")]),t._v(" "),a("a",{staticClass:"title-a-usual export-table-a",attrs:{href:"javascript:;"},on:{click:t.exportTable}},[t._v("导出表格")])])]),t._v(" "),t._m(0)]):t._e(),t._v(" "),t.showEcharts?t._e():a("div",{staticClass:"table-wrap-big"},[a("div",{staticClass:"table-wrap-title"},[a("div",{staticClass:"title-left"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeType},model:{value:t.examType,callback:function(e){t.examType=e},expression:"examType"}},t._l(t.typeList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeStatus},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.statusList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"title-right"},[a("a",{staticClass:"title-a-usual check-echarts-a",attrs:{href:"javascript:;"},on:{click:t.changeTableEcharts}},[a("i",{staticClass:"icon-check-echarts"}),t._v("查看图表")]),t._v(" "),a("a",{staticClass:"title-a-usual export-table-a",attrs:{href:"javascript:;"},on:{click:t.exportTable}},[t._v("导出表格")])])]),t._v(" "),a("div",{staticClass:"table-wrap"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"highlight-current-row":!0,"tooltip-effect":"dark"},on:{"row-click":t.clickSelectExam}},[a("el-table-column",{attrs:{width:"250",label:"学习周"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    第"+t._s(e.row.studyPlanExtendIndex)+"周("+t._s(t.webApi.formatDate(e.row.startDate,"YMD"))+"至"+t._s(t.webApi.formatDate(e.row.endDate,"YMD"))+")\n                  ")]}}],null,!1,1203940320)}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"作业名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{class:["table-usual-icon",e.row.taskLevel+"-icon"]}),t._v(t._s(e.row.taskName)+"\n                  ")]}}],null,!1,3435993887)}),t._v(" "),a("el-table-column",{attrs:{prop:"isFinishName",label:"完成情况（完成/未完成/未学习）"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.finishedNum+"/"+e.row.unfinishedNum+"/"+e.row.notstartNum))]}}],null,!1,2140071717)}),t._v(" "),a("el-table-column",{attrs:{prop:"avgScore",width:"150",label:"平均分"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("-1"==e.row.avgScore?"--":e.row.avgScore))]}}],null,!1,672805700)}),t._v(" "),a("el-table-column",{attrs:{prop:"trueRate",width:"150",label:"正确率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("-1"==e.row.trueRate?"--":e.row.trueRate+"%"))]}}],null,!1,1510586539)}),t._v(" "),a("el-table-column",{attrs:{label:"是否提交"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("1"==e.row.isSubmit?"已提交":"未提交"))]}}],null,!1,2576280319)}),t._v(" "),a("el-table-column",{attrs:{width:"240",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"mr20 table-a",staticStyle:{color:"#ff366d"},attrs:{href:"javascript:;"},on:{click:function(a){return t.checkExamSource(e.row)}}},[t._v("预览")]),t._v(" "),a("a",{staticClass:"mr20 table-a",attrs:{href:"javascript:;"},on:{click:function(a){return t.toTestpaper(e.row)}}},[t._v("卷面分析")]),t._v(" "),a("a",{staticClass:"table-a",attrs:{href:"javascript:;"},on:{click:function(a){return t.toCompletion(e.row)}}},[t._v("完成情况")])]}}],null,!1,3485963967)})],1)],1)])])]),t._v(" "),t.showEcharts?t._e():a("div",{staticClass:"content-right"},[a("div",{staticClass:"content-right-content"},[t.currentExam?[t.rankList?[a("div",{staticClass:"content-right-title"},[t._v("\n                "+t._s(t.currentExam.taskName)+"\n                ")]),t._v(" "),a("div",{staticClass:"content-right-main"},[a("ul",{staticClass:"rank-ul"},t._l(t.rankList,function(e,s){return a("li",{staticClass:"rank-li"},[a("div",{staticClass:"left"},[a("div",{staticClass:"avater-wrap"},[a("img",{staticClass:"avater-img",attrs:{src:"http://eximg.zbgedu.com"+e.memberAvatar,alt:"default"}})]),t._v("\n                      "+t._s(e.name)+"\n                    ")]),t._v(" "),a("div",{staticClass:"right"},[s>2?[t._v(t._s(s+1))]:[a("div",{staticClass:"jiangbei",class:[{first:0==s},{second:1==s},{third:2==s}]})]],2)])}),0)]),t._v(" "),a("div",{staticClass:"student-num-wrap"},[t._v("共"+t._s(t.rankData.totalCount)+"位学员，还有"+t._s(t.rankData.unansweredCount)+"位学员未开启学习进程！")])]:[a("div",{staticClass:"loading-wrap"},[a("iLoading")],1)]]:[a("div",{staticClass:"no-data"},[t._v("暂无数据")])]],2)])])]),t._v(" "),t.showExamSource?a("examSource",{attrs:{examParams:t.examParams},on:{closeExam:t.closeExamPop}}):t._e(),t._v(" "),t.showSelectWeek?a("selectWeek",{attrs:{weekList:t.weekList},on:{confirmSelectWeek:t.confirmSelectWeek,cancelSelectWeek:t.cancelSelectWeek}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"echart-wrap"},[e("p",{staticClass:"name-p"},[this._v("完成情况示例图")]),this._v(" "),e("div",{staticClass:"completionEchart",attrs:{id:"completionEchart"}})])}]};var ia=a("C7Lr")(aa,sa,!1,function(t){a("JGnb")},null,null).exports,na={name:"youboTestpaperAnalysis",components:{iHeader:Ct.a,iLoading:_,examSource:U,iScroll:f},computed:u()({},Object(x.d)({examInfo:function(t){return t.classManage.selectExam}}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}}),data:function(){return{className:"",studentName:"",allChecked:!1,dialogVisible:!1,scrollRefresh:!1,examParams:"",taskInfo:"",urlStr:"",loading:!1,totalRecord:0,currentPage:1,pageSize:20,classCourseInfo:"",envType:parseInt(this.cookie.get("envType")),routeParams:this.$route.params,tableData:[],showExamSource:!1}},mounted:function(){this.getTaskInfo(),this.getClassDetail(),this.getExportExcelUrl()},methods:{handleIconClick:function(){console.log("111")},goBack:function(){this.$router.back(-1)},exportTable:function(){this.webApi.postExcelFile({token:this.techLoginInfo.token,classId:this.$route.params.classId,courseId:this.classCourseInfo.courseId,taskId:this.taskInfo.taskId,orderByClause:""},("1"==this.envType?"https://apidemo.zbgedu.com":"https://zbapi.zbgedu.com")+"/api/study/userAction/statistics/exportStatisticsQuestion")},cheakExam:function(t){console.log("11111"),this.examParams=t,this.showExamSource=!0},sizeChange:function(t){this.currentPage=t,this.getTestList()},handleSizeChange:function(t){this.currentPage=1,this.pageSize=t,this.getTestList()},prevSize:function(){this.currentPage--,this.getTestList()},nextSize:function(){this.currentPage++,this.getTestList()},handleSelectionChange:function(t){},closeExamPop:function(){this.showExamSource=!1},getExportExcelUrl:function(){var t="";t="1"==this.envType?"https://apidemo.zbgedu.com":"https://api.zbgedu.com",console.log(t),this.urlStr=t+"/api/edu/userAction/examen/exportUserExerciseAllRecord?verTT="+(new Date).getTime()+"&token="+this.techLoginInfo.token+"&classId="+this.routeParams.classId+"&examId="+this.routeParams.examenId+"&pageSize=1000&pageNum=1"},getTaskInfo:function(){var t=this;y.a.ajax("getTaskInfoAndProgress",{token:this.techLoginInfo.token,taskId:this.$route.params.examId}).then(function(e){e&&"success"==e.state?t.taskInfo=e.data:t.webApi.alert(e.msg||"服务器异常，请稍后重试～")})},getClassDetail:function(){var t=this;y.a.ajax("getClassInfo",{token:this.techLoginInfo.token,classId:this.$route.params.classId}).then(function(e){e&&"success"==e.state?(console.log(e),t.classCourseInfo=e.data,t.getTestList()):(t.classCourseInfo={},t.webApi.alert(e.msg||"服务器异常，请稍后重试～"))})},getTestList:function(){var t=this;this.loading=!0,y.a.ajax("getStatisticsQuestionPageByTask",{token:this.techLoginInfo.token,classId:this.$route.params.classId,courseId:this.classCourseInfo.courseId,taskId:this.$route.params.examId,orderByClause:"",pageSize:this.pageSize,pageIndex:this.currentPage}).then(function(e){e&&"success"==e.state?(t.loading=!1,t.tableData=e.data.result,t.totalRecord=e.data.total,t.scrollRefresh=!t.scrollRefresh):(t.loading=!1,t.webApi.alert(e.msg||"服务器异常，请稍后重试～"))})},allCheck:function(t){this.toggleSelection(this.tableData)},toggleSelection:function(t){var e=this;t?(t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t,!e.allSelect)}),this.allSelect=!this.allSelect):this.$refs.multipleTable.clearSelection()},sendMessage:function(){this.dialogVisible=!0},replay:function(){}}},oa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"youboTestpaperAnalysis-wrap"},[a("div",{staticClass:"testpaperAnalysis-content"},[a("div",{staticClass:"title-wrap"},[a("div",{staticClass:"title-left"},[t._v("当前位置：数据统计>"),a("span",{staticClass:"goBack",on:{click:t.goBack}},[t._v("作业数据统计")]),t._v(">卷面分析")]),t._v(" "),a("div",{staticClass:"title-right"},[a("a",{staticClass:"button-a",on:{click:t.exportTable}},[t._v("导出表格")])])]),t._v(" "),t.examInfo?a("div",{staticClass:"examInfoWrap"},[a("div",{staticClass:"name-wrap"},[a("span",{staticClass:"name-content"},[t._v("测评名称："+t._s(t.taskInfo.taskName))]),t._v(" "),a("span",{staticClass:"span1"},[t._v("题目数量：共"+t._s(t.taskInfo.questionNum)+"题")]),t._v(" "),a("span",{staticClass:"span1"},[t._v("测评时间："+t._s(t.taskInfo.requireTime)+"分钟")])]),t._v(" "),a("div",{staticClass:"table-wrap"},[a("div",{staticClass:"table-content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark",height:"100%"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"questionSn",label:"题目编号"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"题目标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{height:"22px",cursor:"pointer",color:"#ff366d"},domProps:{innerHTML:t._s(e.row.questionTitle)},on:{click:function(a){return t.cheakExam(e.row)}}})]}}],null,!1,129936200)}),t._v(" "),a("el-table-column",{attrs:{label:"完成情况"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.finishedNum)+"/"+t._s(e.row.totalNum)+"人数")]}}],null,!1,1686250798)}),t._v(" "),a("el-table-column",{attrs:{label:"完成率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.finishedRate)+"%")]}}],null,!1,1075928771)}),t._v(" "),a("el-table-column",{attrs:{label:"答错/答对人数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.falseNum)+"/"+t._s(e.row.trueNum)+"人数")]}}],null,!1,2463453781)}),t._v(" "),a("el-table-column",{attrs:{label:"正确率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.trueRate)+"%")]}}],null,!1,1330979239)})],1)],1),t._v(" "),a("div",{staticClass:"pagination-wrap"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next,sizes,total","current-page":t.currentPage,pageSize:t.pageSize,total:t.totalRecord},on:{"current-change":t.sizeChange,"size-change":t.handleSizeChange,"prev-click":t.prevSize,"next-click":t.nextSize}})],1)])]):a("div",[a("iLoading")],1),t._v(" "),t.showExamSource?a("examSource",{attrs:{examParams:t.examParams},on:{closeExam:t.closeExamPop}}):t._e()],1)])},staticRenderFns:[]};var ra=a("C7Lr")(na,oa,!1,function(t){a("VEuD")},null,null).exports,la={name:"youboCompletion",components:{studyExamReport:jt},computed:u()({},Object(x.d)({envType:function(t){return t.global.envType}}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}}),mounted:function(){this.getTaskInfo(),this.getClassDetail()},data:function(){return{searchText:"",minPercent:"",maxPercent:"",isLoading:!1,selectNameType:"1",classCourseInfo:"",dialogHistory:!1,dialogReport:!1,historyData:[],taskInfo:"",totalRecord:0,receiveIds:"",status:"",selectStudent:"",historyStudent:"",clickStudent:"",currentPage:1,pageSize:20,tableData:[],message:"",typeOptions:[{name:"全部",value:""},{name:"已完成",value:"1"},{name:"未完成",value:"0"},{name:"未开始",value:"-1"}],allChecked:!1,dialogVisible:!1}},methods:{changeType:function(){this.getTableData()},handleSelectionChange:function(t){this.selectStudent=t},getClassDetail:function(){var t=this;y.a.ajax("getClassInfo",{token:this.techLoginInfo.token,classId:this.$route.params.classId}).then(function(e){e&&"success"==e.state?(t.classCourseInfo=e.data,t.getTableData()):(t.classCourseInfo={},t.webApi.alert(e.msg||"服务器异常，请稍后重试～"))})},getHistoryData:function(){var t=this;V.a.post("https://"+("1"==this.envType?"apitikudemo":"apitiku")+".zbgedu.com/manager/managerInterface/v1/studentTestPaperAnswerHistory",{teacherToken:this.techLoginInfo.token,studentId:this.historyStudent.memberId,testPaperId:this.historyStudent.testPaperId}).then(function(e){e&&"success"==e.state?t.historyData=e.data:t.webApi.alert("服务器异常，请稍后重试~")})},checkHistory:function(t){this.historyStudent=t,this.dialogHistory=!0,this.getHistoryData()},checkReport:function(t){this.clickStudent=t,this.dialogReport=!0},exportTable:function(){this.webApi.postExcelFile({token:this.techLoginInfo.token,classId:this.$route.params.classId,courseId:this.classCourseInfo.courseId,courseTeachingType:"flipped",taskId:this.taskInfo.taskId},("1"==this.envType?"https://apidemo.zbgedu.com":"https://zbapi.zbgedu.com")+"/api/study/userAction/statistics/exportStatisticsMemberPaper")},goBack:function(){this.$router.back(-1)},sortChange:function(t){this.currentPage=1},getTableData:function(){var t=this;this.isLoading=!0;var e={token:this.techLoginInfo.token,courseTeachingType:"flipped",classId:this.$route.params.classId,courseId:this.classCourseInfo.courseId,taskId:this.$route.params.examId,taskState:this.status,trueRateBegin:this.minPercent,trueRateEnd:this.maxPercent,pageIndex:this.currentPage,pageSize:this.pageSize};"1"==this.selectNameType?e.memberNameLike=this.searchText:e.memberNicknameLike=this.searchText,y.a.ajax("getStatisticsMemberPaperPage",e).then(function(e){"success"==e.state?(e.data.result.forEach(function(t){t.hasChildren=!0}),t.tableData=e.data.result,t.totalRecord=e.data.total):t.webApi.alert(e.msg||"服务器异常，请稍后重试～"),t.isLoading=!1})},replay:function(){var t=this,e=this.$refs.replayContent.value;e?y.a.ajax("insertMessage",{sendId:this.techLoginInfo.id,textTitle:"通知",text:e,type:0,author:this.techLoginInfo.nickName,receiveIds:this.receiveIds}).then(function(e){e&&"success"==e.state?(t.webApi.alert("发送成功～"),t.dialogVisible=!1):t.webApi.alert(e.msg)}):this.webApi.alert("请输入通知内容！")},sizeChange:function(t){this.currentPage=t,this.getTableData()},handleSizeChange:function(t){this.pageSize=t,this.currentPage=1,this.getTableData()},prevSize:function(){this.currentPage--,this.getTableData()},nextSize:function(){this.currentPage++,this.getTableData()},getTaskInfo:function(){var t=this;y.a.ajax("getTaskInfoAndProgress",{token:this.techLoginInfo.token,taskId:this.$route.params.examId}).then(function(e){e&&"success"==e.state?t.taskInfo=e.data:t.webApi.alert(e.msg||"服务器异常，请稍后重试～")})},search:function(){this.currentPage=1,this.minPercent&&this.maxPercent&&Number(this.minPercent)>Number(this.maxPercent)?this.webApi.alert("正确率范围开始值不能大于结束值~"):this.getTableData()},allCheck:function(t){this.toggleSelection(this.tableData)},toggleSelection:function(t){var e=this;t?(t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t,!e.allSelect)}),this.allSelect=!this.allSelect):this.$refs.multipleTable.clearSelection()},sendMessage:function(){if(0!=this.selectStudent.length){var t=[];this.selectStudent.forEach(function(e){t.push(e.memberId)}),this.receiveIds=t.join(","),this.message='同学您好！您的"'+this.classCourseInfo.className+'"的"'+this.taskInfo.taskName+'"任务尚未完成！请尽快完成哦！',this.dialogVisible=!0}else this.webApi.alert("请至少选中一个学生～")}}},ca={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"youboCompletion-wrap"},[a("div",{staticClass:"youboCompletion-title"},[a("span",{staticClass:"goBack"},[t._v("当前位置：数据统计>"),a("span",{on:{click:t.goBack}},[t._v("作业数据统计")]),t._v(">完成情况")]),t._v(" "),a("span",{staticClass:"export-btn",on:{click:t.exportTable}},[t._v("导出表格")])]),t._v(" "),a("div",{staticClass:"ybc-content"},[a("div",{staticClass:"exam-title"},[t._v(t._s(t.taskInfo.taskName))]),t._v(" "),a("div",{staticClass:"filter-wrap"},[a("div",{staticClass:"fw-left"},[a("span",{staticClass:"mr20"},[t._v("题目数量：共"+t._s(t.taskInfo.questionNum)+"题")]),0!=t.taskInfo.examenStartDate&&""!=t.taskInfo.examenStartDate?a("span",{staticClass:"mr20"},[t._v("发布时间："+t._s(t.webApi.formatDate(t.taskInfo.examenStartDate,"YMD")))]):t._e()]),t._v(" "),a("div",{staticClass:"fw-right"},[a("div",{staticClass:"name-input"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入"+("1"==t.selectNameType?"姓名":"用户名")},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择姓名/用户名"},slot:"prepend",model:{value:t.selectNameType,callback:function(e){t.selectNameType=e},expression:"selectNameType"}},[a("el-option",{attrs:{label:"姓名",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"用户名",value:"2"}})],1),t._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.search},slot:"append"})],1)],1),t._v(" "),a("div",{staticClass:"type-select"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeType},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.typeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}),1)],1),t._v(" "),a("el-input",{attrs:{placeholder:"正确率"},model:{value:t.minPercent,callback:function(e){t.minPercent=e},expression:"minPercent"}},[a("template",{slot:"append"},[t._v("%")])],2),t._v("至\n        "),a("el-input",{attrs:{placeholder:"正确率"},model:{value:t.maxPercent,callback:function(e){t.maxPercent=e},expression:"maxPercent"}},[a("template",{slot:"append"},[t._v("%")])],2),t._v(" "),a("span",{staticClass:"clear-button",on:{click:t.search}},[t._v("搜索")])],1)]),t._v(" "),a("div",{staticClass:"table-wrap"},[a("div",{staticClass:"table-content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tree-props":{children:"children",hasChildren:"hasChildren"},stripe:"",height:"100%",lazy:""},on:{"selection-change":t.handleSelectionChange,"sort-change":t.sortChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"用户名",prop:"memberNickname"}}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"memberName"}}),t._v(" "),a("el-table-column",{attrs:{label:"提交时间",prop:"submitDate"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.submitDate?t.webApi.formatDate(e.row.submitDate,"ALL"):"--"))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"完成情况",prop:"taskState"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("-1"==e.row.taskState?"未开始":"0"==e.row.taskState?"未完成":"已完成"))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"答对题数/总题数",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.trueNum+"/"+e.row.totalNum))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"正确率",prop:"trueRate"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("-1"==e.row.trueRate?"--":e.row.trueRate+"%"))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.taskState?[a("span",{staticClass:"button-b",on:{click:function(a){return t.checkReport(e.row)}}},[t._v("查看报告")]),t._v(" "),a("span",{staticClass:"button-b",on:{click:function(a){return t.checkHistory(e.row)}}},[t._v("做题记录")])]:[t._v("\n                ----\n              ")]]}}])})],1)],1),t._v(" "),a("div",{staticClass:"table-bottom"},[a("div",{staticStyle:{"margin-top":"20px"}},[a("el-checkbox",{on:{change:function(e){return t.allCheck()}},model:{value:t.allChecked,callback:function(e){t.allChecked=e},expression:"allChecked"}},[t._v("全选")]),t._v(" "),a("span",{staticClass:"send-msg",on:{click:t.sendMessage}},[t._v("发送通知")])],1),t._v(" "),a("div",{staticClass:"pagination-wrap"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, sizes, total","current-page":t.currentPage,pageSize:t.pageSize,total:t.totalRecord},on:{"current-change":t.sizeChange,"size-change":t.handleSizeChange,"prev-click":t.prevSize,"next-click":t.nextSize}})],1)]),t._v(" "),a("el-dialog",{attrs:{title:"发送通知",visible:t.dialogVisible,width:"40%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],ref:"replayContent",staticClass:"replay-content",domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.replay()}}},[t._v("发送")])],1)]),t._v(" "),a("el-dialog",{staticClass:"history-dialog",attrs:{title:"做题记录",visible:t.dialogHistory,width:"80%",center:""},on:{"update:visible":function(e){t.dialogHistory=e}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],ref:"historyTable",attrs:{data:t.historyData,height:"80%",stripe:""}},[a("el-table-column",{attrs:{label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"用户名"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.historyStudent.memberNickname))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.historyStudent.memberName))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"提交时间",prop:"submitDate"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.answerTime?t.webApi.formatDate(e.row.answerTime,"ALL"):"--"))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"完成情况",prop:"taskState"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("-1"==e.row.taskState?"未开始":"0"==e.row.taskState?"未完成":"已完成"))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"答对题数/总题数",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.questionCount-e.row.misCount+"/"+e.row.questionCount))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"正确率",prop:"trueRate"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(Math.round((e.row.questionCount-e.row.misCount)/e.row.questionCount*1e4)/100+"%"))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"button-b",on:{click:function(a){return t.checkReport(e.row)}}},[t._v("查看报告")])]}}])})],1)],1),t._v(" "),t.dialogReport?a("div",[a("el-dialog",{attrs:{title:"学习报告",visible:t.dialogReport,width:"80%",center:""},on:{"update:visible":function(e){t.dialogReport=e}}},[a("studyExamReport",{attrs:{studentInfo:t.clickStudent}})],1)],1):t._e()],1)])])},staticRenderFns:[]};var ua=a("C7Lr")(la,ca,!1,function(t){a("7QC7")},null,null).exports,pa={name:"taskStatistics",props:["classCourseInfo"],computed:u()({techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}},Object(x.d)({envType:function(t){return t.global.envType}})),components:{iScroll:f,selectWeek:be},data:function(){return{scrollRefresh:!1,name:"",selectWeek:"",searchText:"",showSelectWeek:!1,selectNameType:"1",tableData:[],weekList:[],xAxisData:"",notStartedList:"",goingList:"",doneList:""}},mounted:function(){this.getWeekList()},methods:{exportTable:function(){this.showSelectWeek=!0},confirmSelectWeek:function(t){console.log(t),t.indexOf("all")>-1&&(t=[]),this.webApi.postExcelFile({token:this.techLoginInfo.token,classId:this.$route.params.classId,courseId:this.classCourseInfo.courseId,studyPlanExtendIds:t.join(",")},("1"==this.envType?"https://apidemo.zbgedu.com":"https://zbapi.zbgedu.com")+"/api/study/userAction/statistics/task/exportMemberTaskList"),this.showSelectWeek=!1},cancelSelectWeek:function(){this.showSelectWeek=!1},kankan:function(t){console.log(t)},changeWeek:function(){this.getTaskList(),this.getPieData()},getWeekList:function(){var t=this;y.a.ajax("queryStudyPlanExtendSelect",{token:this.techLoginInfo.token,classId:this.$route.params.classId}).then(function(e){e&&"success"==e.state?(e.data.length>0&&(e.data=e.data.sort(t.$api.compare("planOrder"))),t.weekList=e.data,t.weekList.forEach(function(t){t.selectWeekId=t.studyPlanExtendId}),t.selectWeek=t.weekList[0].studyPlanExtendId,t.getTaskList(),t.getPieData()):t.webApi.alert("服务器异常，请重试～")})},getPieData:function(){var t=this;y.a.ajax("getMemberTaskStatistics",{token:this.techLoginInfo.token,classId:this.$route.params.classId,courseId:this.classCourseInfo.courseId,studyPlanExtendId:this.selectWeek}).then(function(e){if(e&&"success"==e.state){t.xAxisData=[],t.notStartedList=[],t.goingList=[],t.doneList=[];for(var a=0;a<e.data.length;a++)t.xAxisData.push(e.data[a].name),t.notStartedList.push(e.data[a].notStarted),t.goingList.push(e.data[a].going),t.doneList.push(e.data[a].done);setTimeout(function(){t.drawPie()},200)}else t.webApi.alert("服务器异常，请重试～")})},search:function(){this.getTaskList()},getTaskList:function(){var t=this;y.a.ajax("getMemberTaskList",{token:this.techLoginInfo.token,classId:this.$route.params.classId,courseId:this.classCourseInfo.courseId,studyPlanExtendId:this.selectWeek,keyword:this.searchText,searchType:this.selectNameType}).then(function(e){"success"==e.state?(t.tableData=e.data,setTimeout(function(){t.scrollRefresh=!t.scrollRefresh},1e3)):t.webApi.alert("服务器异常，请重试～")})},drawPie:function(){this.chartPie=k.a.init(document.getElementById("videoTaskPie")),this.chartPie.setOption({title:{text:"学生任务完成情况统计图表",textAlign:"left"},tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{show:!0}}},toolbox:{show:!0,feature:{mark:{show:!0}}},calculable:!0,legend:{data:["Growth","未开始","进行中","已完成"],itemGap:5},grid:{top:"12%",left:"1%",right:"10%",containLabel:!0},xAxis:[{type:"category",data:this.xAxisData,axisLabel:{interval:0,rotate:45,formatter:function(t){return t.length>6?t.slice(0,6)+"...":t}}}],yAxis:[{type:"value",name:"学员人数"}],dataZoom:[{show:!0,start:0,end:50}],series:[{name:"未开始",type:"bar",data:this.notStartedList,color:"#DB8E92",label:{show:!0,position:"top"}},{name:"进行中",type:"bar",data:this.goingList,color:"#D7DD9A",label:{show:!0,position:"top"}},{name:"已完成",type:"bar",data:this.doneList,color:"#FCE58D",label:{show:!0,position:"top"}}]})}}},da={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"taskStatistics-wrap"},[a("div",{staticClass:"taskStatistics-title-wrap"},[a("div",{staticClass:"title-name"},[t._v("学习任务数据统计")]),t._v(" "),a("div",{staticClass:"changeWeek-wrap"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeWeek},model:{value:t.selectWeek,callback:function(e){t.selectWeek=e},expression:"selectWeek"}},t._l(t.weekList,function(e){return a("el-option",{key:e.studyPlanExtendId,attrs:{label:e.title+"（"+t.webApi.formatDate(e.startDate,"YMD")+"至"+t.webApi.formatDate(e.endDate,"YMD")+"）",value:e.studyPlanExtendId}})}),1)],1)]),t._v(" "),a("div",{staticClass:"taskStatistics-content"},[t._m(0),t._v(" "),a("div",{staticClass:"student-task-wrap"},[a("div",{staticClass:"student-tast-title"},[t._v("\n        学生任务完成情况统计图表\n        "),a("div",{staticClass:"title-right"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入"+("1"==t.selectNameType?"用户名":"姓名")},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择姓名/用户名"},slot:"prepend",model:{value:t.selectNameType,callback:function(e){t.selectNameType=e},expression:"selectNameType"}},[a("el-option",{attrs:{label:"用户名",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"姓名",value:"2"}})],1),t._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.search},slot:"append"})],1),t._v(" "),a("span",{staticClass:"export-btn",on:{click:t.exportTable}},[t._v("导出表格")])],1)]),t._v(" "),a("div",{staticClass:"table-wrap"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{stripe:"","max-height":"800",data:t.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"memberNickname",fixed:"",width:"120",label:"用户名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"memberName",fixed:"",label:"姓名"}}),t._v(" "),t.tableData&&t.tableData.length>0?t._l(t.tableData[0].taskList,function(e,s){return a("el-table-column",{key:s,attrs:{width:"130",label:e.taskName.slice(0,6)+"..."},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s("-1"==e.row.taskList[s].value?"未开始":"exam"==e.row.taskList[s].taskType&&0==e.row.taskList[s].value?"进行中":e.row.taskList[s].value+"%")+"\n              ")]}}],null,!0)})}):t._e()],2)],1)])]),t._v(" "),t.showSelectWeek?a("selectWeek",{attrs:{weekList:t.weekList},on:{confirmSelectWeek:t.confirmSelectWeek,cancelSelectWeek:t.cancelSelectWeek}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"video-task-wrap"},[e("div",{staticClass:"videoTaskPie",attrs:{id:"videoTaskPie"}})])}]};var ha=a("C7Lr")(pa,da,!1,function(t){a("Pm+h")},null,null).exports,ma={name:"liveStatistics",mounted:function(){this.getMouthList(),this.getOpenCourseList()},props:["classCourseInfo"],computed:{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}},data:function(){return{str:"",current:"",selectMonth:"",showEchart:!0,envType:parseInt(this.cookie.get("envType")),yearList:"",isExporting:!1,tableListData:"",echartData:""}},methods:{changeMonth:function(t,e){if(e>this.current)return!1;this.selectMonth=t,this.getEchartData()},exportTable:function(){var t=this;this.isExporting||(this.isExporting=!0,setTimeout(function(){t.isExporting=!1},3e3),this.webApi.postExcelFile({token:this.techLoginInfo.token,classId:this.$route.params.classId,courseId:this.classCourseInfo.courseId},("1"==this.envType?"https://apidemo.zbgedu.com":"https://zbapi.zbgedu.com")+"/api/study/userAction/statistics/openCourse/export"))},getMouthList:function(){var t=this;y.a.ajax("queryStudyPlanMonth",{token:this.techLoginInfo.token,classId:this.$route.params.classId}).then(function(e){if(e&&"success"==e.state){var a=!1;e.data.forEach(function(e,s){e.index=s,2==e.isCurr&&(t.selectMonth=e,t.current=s,a=!0)}),a||(t.selectMonth=e.data[0]),t.yearList=e.data,t.getEchartData()}else t.webApi.alert("服务器异常，请重试～")})},getOpenCourseList:function(){var t=this;y.a.ajax("getOpenCourseList",{token:this.techLoginInfo.token,classId:this.$route.params.classId,courseId:this.classCourseInfo.courseId}).then(function(e){e&&"success"==e.state?t.tableListData=e.data:t.webApi.alert("服务器异常，请重试～")})},getEchartData:function(){var t=this,e=this.selectMonth.year+""+this.webApi.extra(this.selectMonth.month);y.a.ajax("selectLiveListChart",{token:this.techLoginInfo.token,classId:this.$route.params.classId,courseId:this.classCourseInfo.courseId,date:e}).then(function(e){e&&"success"==e.state&&(t.echartData=e.data,t.drawPie())})},changeShowEchart:function(){var t=this;this.showEchart=!this.showEchart,this.showEchart&&setTimeout(function(){t.drawPie()},100)},drawPie:function(){this.chartPie=k.a.init(document.getElementById("pieId")),this.chartPie.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},grid:{bottom:"20%"},legend:{data:["直播参与人数","录播参与人数"]},xAxis:{type:"category",data:this.echartData.nameList,tooltip:{show:!1},axisLabel:{formatter:function(t){console.log(t);var e=t.split("@@");return["{a|"+e[0]+"}","{b|"+e[1]+"}"].join("\n")},rich:{a:{color:"#333",lineHeight:10},b:{color:"#666",height:20}}}},yAxis:{type:"value",name:"学员人数(人)",nameTextStyle:{color:"#666"}},series:[{name:"直播参与人数",type:"bar",color:"#DA9E77",data:this.echartData.liveList},{name:"录播参与人数",type:"bar",color:"#D8CB89",data:this.echartData.reviewList}]})}}},fa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"liveStatistics-wrap"},[a("div",{staticClass:"content"},[a("div",{staticClass:"content-title"},[a("span",{staticClass:"title-p"},[t._v("参与直播录播数据统计")]),t._v(" "),a("a",{staticClass:"check-table-a",attrs:{href:"javascript:;"},on:{click:t.changeShowEchart}},[a("i",{staticClass:"icon-table"}),t._v("查看"+t._s(t.showEchart?"表格":"图表"))]),t._v(" "),a("a",{staticClass:"button-a",on:{click:t.exportTable}},[t._v(t._s(t.isExporting?"正在导出...":"导出表格"))])]),t._v(" "),a("div",{staticClass:"content-content"},[a("div",{staticClass:"content-middle"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showEchart,expression:"showEchart"}],staticClass:"example-map-wrap"},[a("div",{staticClass:"text-p"},[t._v("\n            本月度直播参与统计：本月直播场次  "+t._s(t.echartData.taskTotal)+"场 "),a("span",{staticClass:"live-span"},[t._v("观看直播人数   "+t._s(t.echartData.inSceneNum)+"人")]),t._v(" "),a("span",{staticClass:"video-span"},[t._v("观看录播人数   "+t._s(t.echartData.notInSceneNum)+"人")])]),t._v(" "),a("div",{staticClass:"echart-wrap",attrs:{id:"pieId"}}),t._v(" "),a("p",{staticClass:"echart-name-p"})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showEchart,expression:"!showEchart"}],staticClass:"example-table-wrap"},[a("div",{staticClass:"text-p"},[t._v("\n            直播场次："+t._s(t.tableListData.openCourseTotal)+"场 "),a("span",{staticClass:"live-span"},[t._v("观看直播人数"+t._s(t.tableListData.inSceneNum)+"人")]),t._v(" "),a("span",{staticClass:"video-span"},[t._v("观看录播人数"+t._s(t.tableListData.notInSceneTotal)+"人")])]),t._v(" "),a("div",{staticClass:"table-wrap"},[a("table",{staticClass:"table-wrap-s"},[t._m(0),t._v(" "),t.tableListData?t._e():a("tr",{staticClass:"tr-th"},[a("td",{attrs:{colspan:"5"}},[t._v("暂无数据")])]),t._v(" "),t.tableListData?t._l(t.tableListData.openCourseStatisticsList,function(e,s){return a("tr",{key:s},[a("td",{staticClass:"first-td"},[t._v(t._s(e.title))]),t._v(" "),a("td",[t._v(t._s("第"+t.webApi.toZhDigit(e.weekIndex)+"周学习计划")+"（"+t._s(t.webApi.formatDate(e.startDate,"YMD"))+"至"+t._s(t.webApi.formatDate(e.endDate,"YMD"))+"）")]),t._v(" "),a("td",[t._v(t._s(e.inSceneNum))]),t._v(" "),a("td",[t._v(t._s(e.notInSceneNum))]),t._v(" "),a("td",[t._v(t._s(e.sum))])])}):t._e()],2)]),t._v(" "),a("p",{staticClass:"table-name-p"})])]),t._v(" "),t.showEchart?a("div",{staticClass:"content-bottom"},[a("ul",{staticClass:"c-b-ul"},t._l(t.yearList,function(e,s){return a("li",{staticClass:"c-b-li",class:[s==t.selectMonth.index?"active":"",s>t.current?"noTime":""]},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"此月份尚未开始，请选择其他月份~",placement:"bottom-start",disabled:3!=e.isCurr}},[a("div",{staticClass:"li-main",on:{click:function(a){return t.changeMonth(e,s)}}},[a("span",{staticClass:"month-span"},[t._v(t._s(e.month)+"月")]),a("br"),a("span",{staticClass:"year-span"},[t._v(t._s(e.year))])])]),t._v(" "),s==t.current?a("div",{staticClass:"current-month"},[a("span",{staticClass:"current-month-span"},[t._v("当前月")])]):t._e(),t._v(" "),s!=t.yearList.length-1?a("div",{staticClass:"line"}):t._e()],1)}),0)]):t._e()])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"tr-th"},[a("td",{staticClass:"first",attrs:{colspan:"1"}},[a("span",{staticClass:"title1"},[t._v("参与方式")]),a("br"),a("span",{staticClass:"title2"},[t._v("直播场次")])]),t._v(" "),a("td",[t._v("周计划数")]),t._v(" "),a("td",[t._v("参与直播人数")]),t._v(" "),a("td",[t._v("参与录播人数")]),t._v(" "),a("td",[t._v("小计")])])}]};var va=a("C7Lr")(ma,fa,!1,function(t){a("bS5z")},null,null).exports,ga={name:"login",data:function(){return{username:"",password:"",isDisabled:!1,loginBtnText:"",placeholderText:"请输入",usernameText:"用户名",passwordText:"密码",loginBtnDefault:"登录",loginBtnLoading:"正在登录...",loginBtnError:"登录失败",token:"",eduUserId:"",step:0,i:1}},mounted:function(){this.loginBtnText=this.loginBtnDefault,this.getToken()},methods:u()({},Object(x.c)([]),Object(x.b)(["teacherLogin","teacherLoginDev","getTechMenu"]),{getToken:function(){var t=this;y.a.ajax("token").then(function(e){e&&e.state?t.token=e.data.token:t.webApi.alert("系统异常，请稍后重试～")})},beforeSubmit:function(){this.isDisabled=!0,this.loginBtnText=this.loginBtnLoading},onSuccess:function(){var t=this.$route.query,e="/tmIndex/classManage";t&&t.fromPath&&(e=-1!==t.fromPath.indexOf("login")?t.fromPath.replace("/login?link=",""):t.fromPath),this.$router.push(e)},onError:function(t){this.webApi.alert(t.msg||"Sorry~ 登录失败，"),this.loginBtnText=this.loginBtnDefault,this.isDisabled=!1},onSubmit:function(){var t=this;this.beforeSubmit(),this.teacherLoginDev({token:this.token,username:this.username,password:this.password}).then(function(e){if(e&&"success"==e.state){t.getTechMenu(t.token).then(function(e){t.onSuccess()});var a=e.data;a.token=t.token,t.cookie.set("techLoginInfo",a,{path:""})}else t.onError(e)}).catch(function(e){t.onError(e)})},draw:function(t){this.i=t;var e="canvas"+t;console.log(e);var a=document.getElementById("canvas1").getContext("2d"),s=1200,i=130;a.clearRect(0,0,s,i),a.globalAlpha=.17,this.step++;var n=this.step*Math.PI/180,o=20*Math.sin(n),r=20*Math.cos(n);a.fillStyle="green",a.globalAlpha=.18,a.beginPath(),a.moveTo(0,i/2+o-10),a.bezierCurveTo(s/4,o,s/4*3,i+o,s,i/2+r),a.lineTo(s,i),a.lineTo(0,i),a.closePath(),a.fill(),a.fillStyle="blue",a.globalAlpha=.17,a.beginPath(),a.moveTo(0,i/2+o),a.bezierCurveTo(s/4,i/2+o+50,s/4*3,i/2-o-50,s,i/2+r-20),a.lineTo(s,i),a.lineTo(0,i),a.closePath(),a.fill(),a.fillStyle="red",a.globalAlpha=1,a.beginPath(),a.moveTo(0,i/2+o+30),a.bezierCurveTo(s/4,i/2+o-5,s/4*3,i+o-5,s,i/2+r+30),a.lineTo(s,i),a.lineTo(0,i),a.closePath(),a.fill(),setTimeout(this.draw,1e3/60,t)}})},Ca={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-login"},[a("div",{staticClass:"form-wrap"},[a("form",{staticClass:"form-login",attrs:{action:"get"},on:{submit:function(e){return e.preventDefault(),t.onSubmit()}}},[a("h4",{staticClass:"title"},[t._v("教学中心系统登录")]),t._v(" "),a("div",{staticClass:"form-block"},[a("el-input",{attrs:{placeholder:"请输入账号"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}},[a("i",{staticClass:"el-input__icon el-icon-user-solid",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),a("div",{staticClass:"form-block form-block1"},[a("el-input",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[a("i",{staticClass:"el-input__icon el-icon-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),a("div",{staticClass:"form-block"},[a("button",{staticClass:"form-button",class:{disabled:t.isDisabled},attrs:{type:"submit",id:"login",disabled:t.isDisabled}},[t._v(t._s(t.loginBtnText))])])])]),t._v(" "),a("canvas",{style:{width:"100%",height:"130px"},attrs:{id:"canvas1"}})])},staticRenderFns:[]};var ba=a("C7Lr")(ga,Ca,!1,function(t){a("sgld")},null,null).exports,_a=a("xst1"),xa=a("IcnI");s.default.use(i.a),console.log(xa.a.state);var ya=new i.a({routes:[{path:"/",redirect:"/tmIndex"},{path:"/tmIndex",name:"tmIndex",component:yt.a,children:[{path:"systemManage",name:"systemManage",component:function(){return a.e(2).then(a.bind(null,"SfOp"))},redirect:"/tmIndex/systemManage/roleManage",children:[{path:"roleManage",name:"roleManage",component:function(){return Promise.all([a.e(0),a.e(4)]).then(a.bind(null,"y9Pd"))},redirect:"/tmIndex/systemManage/roleManage/index",children:[{path:"index",name:"index",component:function(){return Promise.all([a.e(0),a.e(6)]).then(a.bind(null,"Wzz0"))}},{path:"addRole",name:"addRole",component:function(){return a.e(3).then(a.bind(null,"dshE"))}}]},{path:"userManage",name:"userManage",component:function(){return Promise.all([a.e(0),a.e(10)]).then(a.bind(null,"TMdl"))},redirect:"/tmIndex/systemManage/userManage/index",children:[{path:"index",name:"index",component:function(){return Promise.all([a.e(0),a.e(7)]).then(a.bind(null,"ufos"))}},{path:"addUser",name:"addUser",component:function(){return a.e(5).then(a.bind(null,"z8jK"))}},{path:"detail",name:"detail",component:function(){return a.e(8).then(a.bind(null,"76Xi"))}}]}]},{path:"exchangeManage",name:"exchangeManage",component:o,children:[{path:"answerQuestion",name:"answerQuestion",component:gt}]},{path:"classManage/:type",name:"classManage",component:E},{path:"dataStatistics",name:"dataStatistics",component:ne,children:[{path:"youboStudyAction",name:"youboStudyAction",component:se},{path:"teacherAQStatistics",name:"teacherAQStatistics",component:ve},{path:"onlineClassLearnSituation",name:"onlineClassLearnSituation",component:function(){return Promise.all([a.e(0),a.e(9)]).then(a.bind(null,"rqv7"))}}]},{path:"teachService",name:"teachService",component:function(){return a.e(11).then(a.bind(null,"YJrI"))},children:[{path:"courseQRCode",name:"courseQRCode",component:function(){return a.e(1).then(a.bind(null,"To5E"))}}]}]},{path:"/login",name:"login",component:ba},{path:"/classCenter",component:It,redirect:"/classCenter/classCenterIndex",children:[{path:"classCenterIndex/:classId",name:"classCenterIndex",component:De},{path:"dataStatisticsAq/:classId",name:"dataStatisticsAq",component:Qt},{path:"dataStatisticsExam/:classId",name:"dataStatisticsExam",component:ye}]},{path:"/youboCenter",component:Ae,redirect:"/youboCenter/youboCenterIndex",children:[{path:"youboCenterIndex/:classId",name:"youboCenterIndex",component:Qe},{path:"overallReport/:classId",name:"overallReport",component:ea},{path:"studentReport/:classId",name:"studentReport",component:Je},{path:"practiceStatistics/:classId",name:"practiceStatistics",component:ia,meta:{keepAlive:!0}},{path:"practiceStatistics/:classId/youboTestpaperAnalysis/:examId",name:"youboTestpaperAnalysis",component:ra,meta:{hideHeader:!0}},{path:"practiceStatistics/:classId/youboCompletion/:examId",name:"youboCompletion",component:ua,meta:{hideHeader:!0}},{path:"taskStatistics/:classId",name:"taskStatistics",component:ha},{path:"liveStatistics/:classId",name:"liveStatistics",component:va},{path:"aqStatistics/:classId",name:"aqStatistics",component:Gt}]},{path:"/examStatistics/:classId/:courseArrangeId/:examenId/:className",name:"examStatistics",component:Dt},{path:"/testpaperAnalysis/:classId/:examenId/:className",name:"testpaperAnalysis",component:At},{path:"/faceTestpaperAnalysis/:classId/:examenId/:className",name:"faceTestpaperAnalysis",component:Rt},{path:"/faceCompletion/:classId/:examenId/:className",name:"faceCompletion",component:$t},{path:"/aqReportGather",name:"aqReportGather",component:xt},{path:"*",redirect:"/",meta:{}}]});ya.beforeResolve(function(t,e,a){var i=_a.a.getUrlKey("token");if(i){var n=null;y.a.ajax("member",{token:i}).then(function(t){t&&"success"==t.state&&((n=t.data).token=i,s.default.cookie.set("techLoginInfo",n),window.location.href="/")})}else"login"==t.name||s.default.cookie.get("techLoginInfo")?a():a({path:"/login"})});e.a=ya},YbYc:function(t,e){},Za0R:function(t,e,a){"use strict";var s={props:{initial:{type:Boolean,default:!1}},data:function(){return{size:{width:-1,height:-1}}},methods:{reset:function(){var t=this.$el.firstChild,e=this.$el.lastChild;t.scrollLeft=1e5,t.scrollTop=1e5,e.scrollLeft=1e5,e.scrollTop=1e5},update:function(){this.size.width=this.$el.offsetWidth,this.size.height=this.$el.offsetHeight}},watch:{size:{deep:!0,handler:function(t){this.reset(),this.$emit("resize",{width:this.size.width,height:this.size.height})}}},render:function(t){var e="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",a="position: absolute; left: 0; top: 0;";return t("div",{style:e+"animation-name: resizeSensorVisibility;",on:{"~animationstart":this.update}},[t("div",{style:e,on:{scroll:this.update}},[t("div",{style:a+"width: 100000px; height: 100000px;"})]),t("div",{style:e,on:{scroll:this.update}},[t("div",{style:a+"width: 200%; height: 200%;"})])])},beforeDestroy:function(){this.$emit("resize",{width:0,height:0}),this.$emit("resizeSensorBeforeDestroy")},mounted:function(){if(!0===this.initial&&this.$nextTick(this.update),this.$el.offsetParent!==this.$el.parentNode&&(this.$el.parentNode.style.position="relative"),"attachEvent"in this.$el&&!("AnimationEvent"in window)){var t=function(){this.update(),e()}.bind(this),e=function(){this.$el.detachEvent("onresize",t),this.$off("resizeSensorBeforeDestroy",e)}.bind(this);this.$el.attachEvent("onresize",t),this.$on("resizeSensorBeforeDestroy",e),this.reset()}}};var i=a("C7Lr")(s,null,!1,function(t){a("dQmp")},null,null);e.a=i.exports},"a4/I":function(t,e,a){t.exports=a.p+"static/img/class-nodata.ae31590.png"},bS5z:function(t,e){},"d+eV":function(t,e){},dQmp:function(t,e){},e6XZ:function(t,e){},eb7g:function(t,e){},fCST:function(t,e){},fad9:function(t,e){},fq9S:function(t,e){},gzDx:function(t,e){},iDk4:function(t,e,a){"use strict";var s=a("4YfN"),i=a.n(s),n=a("48sp"),o={name:"i-header",computed:i()({},Object(n.d)({host:function(t){return t.global.host}}),{techLoginInfo:function(){return JSON.parse(this.cookie.get("techLoginInfo"))}}),methods:{logout:function(){this.cookie.remove("techLoginInfo"),this.$router.push("/login")},toIndex:function(){this.$router.push("/")}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header-wrap"},[a("div",{staticClass:"header-left icon-layout",on:{click:t.toIndex}},[a("a",{staticClass:"header-link header-link-zbg",attrs:{href:"javascript:;"}}),t._v(" "),a("a",{staticClass:"header-link header-link-studycenter",attrs:{href:"javascript:;"}})]),t._v(" "),a("div",{staticClass:"header-right"},[a("a",{staticClass:"name-a",attrs:{href:"javascript:;"}},[a("img",{staticClass:"user-avatar",attrs:{src:t.host.img+t.techLoginInfo.avatar,alt:"我的头像"}}),t._v(" "),a("span",{staticClass:"user-name"},[t._v(t._s(t.techLoginInfo.nickName))])]),t._v(" "),a("a",{staticClass:"loginout-a",attrs:{href:"javascript:;"},on:{click:t.logout}},[a("i",{staticClass:"loginout-icon"}),t._v(" "),a("span",{staticClass:"loginout-text"},[t._v("退出")])])])])},staticRenderFns:[]};var l=a("C7Lr")(o,r,!1,function(t){a("rn2a")},null,null);e.a=l.exports},kRW6:function(t,e){},kl9r:function(t,e){},l7SY:function(t,e){},"m+OD":function(t,e){},m9jO:function(t,e){},msH7:function(t,e){},nIbs:function(t,e){},oSZX:function(t,e){},oznC:function(t,e){},reGN:function(t,e){},rn2a:function(t,e){},sgld:function(t,e){},wq5a:function(t,e,a){var s,i;
/*! PhotoSwipe Default UI - 4.1.2 - 2017-04-05
* http://photoswipe.com
* Copyright (c) 2017 Dmitry Semenov; */void 0===(i="function"==typeof(s=function(){"use strict";return function(t,e){var a,s,i,n,o,r,l,c,u,p,d,h,m,f,v,g,C,b,_=this,x=!1,y=!0,w=!0,k={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(t,e){return t.title?(e.children[0].innerHTML=t.title,!0):(e.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return t.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return t.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},I=function(t){if(g)return!0;t=t||window.event,v.timeToIdle&&v.mouseUsed&&!u&&R();for(var a,s,i=(t.target||t.srcElement).getAttribute("class")||"",n=0;n<F.length;n++)(a=F[n]).onTap&&i.indexOf("pswp__"+a.name)>-1&&(a.onTap(),s=!0);if(s){t.stopPropagation&&t.stopPropagation(),g=!0;var o=e.features.isOldAndroid?600:30;setTimeout(function(){g=!1},o)}},S=function(t,a,s){e[(s?"add":"remove")+"Class"](t,"pswp__"+a)},T=function(){var t=1===v.getNumItemsFn();t!==f&&(S(s,"ui--one-slide",t),f=t)},D=function(){S(l,"share-modal--hidden",w)},P=function(){return(w=!w)?(e.removeClass(l,"pswp__share-modal--fade-in"),setTimeout(function(){w&&D()},300)):(D(),setTimeout(function(){w||e.addClass(l,"pswp__share-modal--fade-in")},30)),w||A(),!1},E=function(e){var a=(e=e||window.event).target||e.srcElement;return t.shout("shareLinkClick",e,a),!(!a.href||!a.hasAttribute("download")&&(window.open(a.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),w||P(),1))},A=function(){for(var t,e,a,s,i="",n=0;n<v.shareButtons.length;n++)t=v.shareButtons[n],e=v.getImageURLForShare(t),a=v.getPageURLForShare(t),s=v.getTextForShare(t),i+='<a href="'+t.url.replace("{{url}}",encodeURIComponent(a)).replace("{{image_url}}",encodeURIComponent(e)).replace("{{raw_image_url}}",e).replace("{{text}}",encodeURIComponent(s))+'" target="_blank" class="pswp__share--'+t.id+'"'+(t.download?"download":"")+">"+t.label+"</a>",v.parseShareButtonOut&&(i=v.parseShareButtonOut(t,i));l.children[0].innerHTML=i,l.children[0].onclick=E},L=function(t){for(var a=0;a<v.closeElClasses.length;a++)if(e.hasClass(t,"pswp__"+v.closeElClasses[a]))return!0},N=0,R=function(){clearTimeout(b),N=0,u&&_.setIdle(!1)},z=function(t){var e=(t=t||window.event).relatedTarget||t.toElement;e&&"HTML"!==e.nodeName||(clearTimeout(b),b=setTimeout(function(){_.setIdle(!0)},v.timeToIdleOutside))},O=function(t){h!==t&&(S(d,"preloader--active",!t),h=t)},j=function(a){var o=a.vGap;if(!t.likelyTouchDevice||v.mouseUsed||screen.width>v.fitControlsWidth){var r=v.barsSize;if(v.captionEl&&"auto"===r.bottom)if(n||((n=e.createEl("pswp__caption pswp__caption--fake")).appendChild(e.createEl("pswp__caption__center")),s.insertBefore(n,i),e.addClass(s,"pswp__ui--fit")),v.addCaptionHTMLFn(a,n,!0)){var l=n.clientHeight;o.bottom=parseInt(l,10)||44}else o.bottom=r.top;else o.bottom="auto"===r.bottom?0:r.bottom;o.top=r.top}else o.top=o.bottom=0},F=[{name:"caption",option:"captionEl",onInit:function(t){i=t}},{name:"share-modal",option:"shareEl",onInit:function(t){l=t},onTap:function(){P()}},{name:"button--share",option:"shareEl",onInit:function(t){r=t},onTap:function(){P()}},{name:"button--zoom",option:"zoomEl",onTap:t.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(t){o=t}},{name:"button--close",option:"closeEl",onTap:t.close},{name:"button--arrow--left",option:"arrowEl",onTap:t.prev},{name:"button--arrow--right",option:"arrowEl",onTap:t.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){a.isFullscreen()?a.exit():a.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(t){d=t}}];_.init=function(){var o;e.extend(t.options,k,!0),v=t.options,s=e.getChildByClass(t.scrollWrap,"pswp__ui"),(p=t.listen)("onVerticalDrag",function(t){y&&t<.95?_.hideControls():!y&&t>=.95&&_.showControls()}),p("onPinchClose",function(t){y&&t<.9?(_.hideControls(),o=!0):o&&!y&&t>.9&&_.showControls()}),p("zoomGestureEnded",function(){(o=!1)&&!y&&_.showControls()}),p("beforeChange",_.update),p("doubleTap",function(e){var a=t.currItem.initialZoomLevel;t.getZoomLevel()!==a?t.zoomTo(a,e,333):t.zoomTo(v.getDoubleTapZoom(!1,t.currItem),e,333)}),p("preventDragEvent",function(t,e,a){var s=t.target||t.srcElement;s&&s.getAttribute("class")&&t.type.indexOf("mouse")>-1&&(s.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(s.tagName))&&(a.prevent=!1)}),p("bindEvents",function(){e.bind(s,"pswpTap click",I),e.bind(t.scrollWrap,"pswpTap",_.onGlobalTap),t.likelyTouchDevice||e.bind(t.scrollWrap,"mouseover",_.onMouseOver)}),p("unbindEvents",function(){w||P(),C&&clearInterval(C),e.unbind(document,"mouseout",z),e.unbind(document,"mousemove",R),e.unbind(s,"pswpTap click",I),e.unbind(t.scrollWrap,"pswpTap",_.onGlobalTap),e.unbind(t.scrollWrap,"mouseover",_.onMouseOver),a&&(e.unbind(document,a.eventK,_.updateFullscreen),a.isFullscreen()&&(v.hideAnimationDuration=0,a.exit()),a=null)}),p("destroy",function(){v.captionEl&&(n&&s.removeChild(n),e.removeClass(i,"pswp__caption--empty")),l&&(l.children[0].onclick=null),e.removeClass(s,"pswp__ui--over-close"),e.addClass(s,"pswp__ui--hidden"),_.setIdle(!1)}),v.showAnimationDuration||e.removeClass(s,"pswp__ui--hidden"),p("initialZoomIn",function(){v.showAnimationDuration&&e.removeClass(s,"pswp__ui--hidden")}),p("initialZoomOut",function(){e.addClass(s,"pswp__ui--hidden")}),p("parseVerticalMargin",j),function(){var t,a,i,n=function(s){if(s)for(var n=s.length,o=0;o<n;o++){t=s[o],a=t.className;for(var r=0;r<F.length;r++)i=F[r],a.indexOf("pswp__"+i.name)>-1&&(v[i.option]?(e.removeClass(t,"pswp__element--disabled"),i.onInit&&i.onInit(t)):e.addClass(t,"pswp__element--disabled"))}};n(s.children);var o=e.getChildByClass(s,"pswp__top-bar");o&&n(o.children)}(),v.shareEl&&r&&l&&(w=!0),T(),v.timeToIdle&&p("mouseUsed",function(){e.bind(document,"mousemove",R),e.bind(document,"mouseout",z),C=setInterval(function(){2==++N&&_.setIdle(!0)},v.timeToIdle/2)}),v.fullscreenEl&&!e.features.isOldAndroid&&(a||(a=_.getFullscreenAPI()),a?(e.bind(document,a.eventK,_.updateFullscreen),_.updateFullscreen(),e.addClass(t.template,"pswp--supports-fs")):e.removeClass(t.template,"pswp--supports-fs")),v.preloaderEl&&(O(!0),p("beforeChange",function(){clearTimeout(m),m=setTimeout(function(){t.currItem&&t.currItem.loading?(!t.allowProgressiveImg()||t.currItem.img&&!t.currItem.img.naturalWidth)&&O(!1):O(!0)},v.loadingIndicatorDelay)}),p("imageLoadComplete",function(e,a){t.currItem===a&&O(!0)}))},_.setIdle=function(t){u=t,S(s,"ui--idle",t)},_.update=function(){y&&t.currItem?(_.updateIndexIndicator(),v.captionEl&&(v.addCaptionHTMLFn(t.currItem,i),S(i,"caption--empty",!t.currItem.title)),x=!0):x=!1,w||P(),T()},_.updateFullscreen=function(s){s&&setTimeout(function(){t.setScrollOffset(0,e.getScrollY())},50),e[(a.isFullscreen()?"add":"remove")+"Class"](t.template,"pswp--fs")},_.updateIndexIndicator=function(){v.counterEl&&(o.innerHTML=t.getCurrentIndex()+1+v.indexIndicatorSep+v.getNumItemsFn())},_.onGlobalTap=function(a){var s=(a=a||window.event).target||a.srcElement;if(!g)if(a.detail&&"mouse"===a.detail.pointerType){if(L(s))return void t.close();e.hasClass(s,"pswp__img")&&(1===t.getZoomLevel()&&t.getZoomLevel()<=t.currItem.fitRatio?v.clickToCloseNonZoomable&&t.close():t.toggleDesktopZoom(a.detail.releasePoint))}else if(v.tapToToggleControls&&(y?_.hideControls():_.showControls()),v.tapToClose&&(e.hasClass(s,"pswp__img")||L(s)))return void t.close()},_.onMouseOver=function(t){var e=(t=t||window.event).target||t.srcElement;S(s,"ui--over-close",L(e))},_.hideControls=function(){e.addClass(s,"pswp__ui--hidden"),y=!1},_.showControls=function(){y=!0,x||_.update(),e.removeClass(s,"pswp__ui--hidden")},_.supportsFullscreen=function(){var t=document;return!!(t.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||t.msExitFullscreen)},_.getFullscreenAPI=function(){var e,a=document.documentElement,s="fullscreenchange";return a.requestFullscreen?e={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:s}:a.mozRequestFullScreen?e={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+s}:a.webkitRequestFullscreen?e={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+s}:a.msRequestFullscreen&&(e={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),e&&(e.enter=function(){if(c=v.closeOnScroll,v.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return t.template[this.enterK]();t.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},e.exit=function(){return v.closeOnScroll=c,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e}}})?s.call(e,a,e,t):s)||(t.exports=i)},wyLI:function(t,e){},xst1:function(t,e,a){"use strict";var s=a("3cXf"),i=a.n(s),n=a("lC5x"),o=a.n(n),r=a("J0Oq"),l=a.n(r),c=a("hRKE"),u=a.n(c),p=a("OOvn"),d=a("xd7I");e.a={formatDate:function(t,e){var a,s,i,n,o,r,l="";return a=(l=parseInt(t)<1e11?new Date(parseInt(1e3*t)):new Date(parseInt(t))).getFullYear(),s=l.getMonth()+1<10?"0"+(l.getMonth()+1):l.getMonth()+1,i=this.extra(l.getDate()),n=this.extra(l.getHours()),o=this.extra(l.getMinutes()),r=this.extra(l.getSeconds()),"Y"==e?a:"M"==e?s:"D"==e?i:"h"==e?n:"m"==e?o:"s"==e?r:"ALL"==e?a+"-"+s+"-"+i+"  "+n+":"+o+":"+r:"YMD"==e?a+"-"+s+"-"+i:void 0},getUrlKey:function(t){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null},extra:function(t){return parseInt(t)<10?"0"+parseInt(t):t},formatSeconds:function(t){var e=parseInt(t),a=0,s=0;e>60&&(a=parseInt(e/60),e=parseInt(e%60),a>60&&(s=parseInt(a/60),a=parseInt(a%60)));var i=parseInt(e)+"s";return a>0&&(i=parseInt(a)+"m"+i),s>0&&(i=parseInt(s)+"h"+i),i},unique:function(t){for(var e=[],a={},s=0;s<t.length;s++)a[t[s].id]||(e.push(t[s]),a[t[s].id]=1);return e},down:function(t,e){return t.subjectIndex>e.subjectIndex?1:-1},formatType:function(t,e){if("-1"==e)return"";if("video"==t){var a,s,i,n=parseInt(e),o=0,r=0;return n>=60&&(o=parseInt(n/60),n=parseInt(n%60),o>=60&&(r=parseInt(o/60),o=parseInt(o%60))),i=r>=10?r:"0"+r,a=o>=10?o:"0"+o,s=n>=10?n:"0"+n,i>0?parseInt(parseInt(a)+parseInt(60*i))+":"+s:a+":"+s}return"exam"==t||"knowledgePointExercise"==t?" 第"+e+"题":void 0},getLastMonthToday:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate();return parseInt(a)<10&&(a="0"+a),parseInt(s)<10&&(s="0"+s),t=e+"-"+a+"-"+s,1==parseInt(a)?parseInt(e)-1+"-12-"+s:new Date(e,parseInt(a)-1,0).getDate()<parseInt(s)?e+"-"+a+"-01":parseInt(a)<=10?e+"-0"+(parseInt(a)-1)+"-"+s:e+"-"+(parseInt(a)-1)+"-"+s},dateAddZero:function(t){var e=t.split("/");return e[0]+this.extra(e[1])+this.extra(e[2])},isEmpty:function(t){return!(!this.isEmpty1(t)&&!this.isEmpty2(t))},isEmpty1:function(t){return void 0==t||null==t||"null"==t||""==t||"NULL"==t||0==t||"False"==t||"false"==t||"NaN"==t||NaN==t},isEmpty2:function(t){switch(void 0===t?"undefined":u()(t)){case"undefined":return!0;case"string":if(0==this.trim(t).length)return!0;break;case"boolean":if(!t)return!0;break;case"number":if(0===t)return!0;break;case"object":if(null===t)return!0;if(void 0!==t.length&&0==t.length)return!0;for(var e in t)return!1;return!0}return!1},trim:function(t){return t.replace(/(^\s+)|(\s+$)/g,"")},unescapeHTML:function(t){return t.toString().replace(/&amp;|&lt;|&gt;|&#39;|&quot;/g,function(t){return{"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&quot;":'"'}[t]||t})},base64encode:function(t){var e,a,s,i,n,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="",l="",c="",u=0,p=this.utf16to8(t);do{s=(e=p.charCodeAt(u++))>>2,i=(3&e)<<4|(a=p.charCodeAt(u++))>>4,n=(15&a)<<2|(l=p.charCodeAt(u++))>>6,c=63&l,isNaN(a)?n=c=64:isNaN(l)&&(c=64),r=r+o.charAt(s)+o.charAt(i)+o.charAt(n)+o.charAt(c),e=a=l="",s=i=n=c=""}while(u<p.length);return r},utf16to8:function(t){var e,a,s,i;for(e="",s=t.length,a=0;a<s;a++)(i=t.charCodeAt(a))>=1&&i<=127?e+=t.charAt(a):i>2047?(e+=String.fromCharCode(224|i>>12&15),e+=String.fromCharCode(128|i>>6&63),e+=String.fromCharCode(128|i>>0&63)):(e+=String.fromCharCode(192|i>>6&31),e+=String.fromCharCode(128|i>>0&63));return e},recursiveParentNode:function(t,e){return t.nodeName.toLowerCase()==e?t:this.recursiveParentNode(t.parentNode,e)},goodTime:function(t){var e=(new Date).getTime()-new Date(1e3*t).getTime(),a=e/31104e6,s=e/2592e6,i=e/6048e5,n=e/864e5,o=e/36e5,r=e/6e4;return a>=1?~~a+" 年前":s>=1?~~s+" 个月前":i>=1?~~i+" 周前":n>=1?~~n+" 天前":o>=1?~~o+" 个小时前":r>=1?~~r+" 分钟前":"刚刚"},alert:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"网络异常，请稍后再试",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:999999,s=document.createElement("div");try{document.querySelectorAll(".g-small-alert")[0]&&document.body.removeChild(s)}catch(t){}s.className="g-small-alert",s.style.cssText="z-index:"+a+";",s.innerText=t,document.body.appendChild(s),"number"!=typeof e&&(e=Number(e)),setTimeout(function(){document.body.removeChild(s)},e)},pictureCompress:function(t,e){var a={mime:"image/jpeg",quality:.6,fileName:""};a.fileName=this.randomName(a.mime);var s=document.createElement("canvas"),i=s.getContext("2d"),n=new FileReader,o=void 0,r=void 0;n.onload=function(t){(o=new Image).onload=function(){s.width=o.width,s.height=o.height,i.drawImage(o,0,0),r=s.toDataURL(a.mime,a.quality),e(function(t){var e=t.split(","),a=e[0].match(/:(.*?);/)[1],s=atob(e[1]),i=s.length,n=new Uint8Array(i);for(;i--;)n[i]=s.charCodeAt(i);return new Blob([n],{type:a})}(r),a.fileName)},o.src=n.result},n.readAsDataURL(t)},randomName:function(t){return(new Date).getTime()+"."+t.replace(/^.+\/{1}(.+)$/g,"$1")},stringToEntity:function(t){var e={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"',"#39":"'"};return t.replace(/&(lt|gt|nbsp|amp|quot|#39);/gi,function(t,a){return e[a]})},outTitle:function(t){return t=t.replace(/\t|\n|<.*?>/gi,function(t){return 0===t.indexOf("<img ")?t:""})},compareDown:function(t){return function(t,e){var a=100*t.member_pre,s=100*e.member_pre;return s<a?-1:s>a?1:0}},compare:function(t,e){return function(a,s){var i=a[t],n=s[t];return e&&"desc"==e?n-i:i-n}},toZhDigit:function(t){t="number"==typeof t?String(t):t;for(var e=["零","一","二","三","四","五","六","七","八","九"],a=["千","百","十",""],s=["万","亿","兆","京","垓","秭","穰","沟","涧","正","载","极","恒河沙","阿僧祗","那由他","不可思议","无量","大数"],i=Math.ceil(t.length/4),n=t.length%4||4,o=void 0,r=[],l=[],c="";i>0;){if(c){o=t.slice(n,n+4),n+=4;for(var u=0;u<o.length;u++)0!=o[u]?(r.length>0?(c+=0===u?s[i-1]+e[o[u]]+a[u]:"零"+e[o[u]]+a[u],r.length=0):c+=e[o[u]]+a[u],u===o.length-1&&i>1&&(c+=s[i-2])):(0===u&&r.length>0&&0===l.length?(c+=s[i-1],r.length=0,r.push(o[u])):l.length>0?1==i?c+="":r.length=0:r.push(o[u]),u===o.length-1&&4===r.length&&1!==i&&(1===i?(l.length=0,r.length=0,c+=s[i-1]):l.push(o[u])));--i}else for(var p=(o=t.slice(0,n)).length,d=0;d<p;d++)if(0!=o[d])r.length>0?(c+="零"+e[o[d]]+a[4-p+d],d===p-1&&i>1&&(c+=s[i-2]),r.length=0):(c+=e[o[d]]+a[4-p+d],d===p-1&&i>1&&(c+=s[i-2]));else{if(1==p){c+=e[o[d]];break}r.push(o[d])}return c}},postExcelFile:function(t,e){var a=document.createElement("form");for(var s in a.style.display="none",a.action=e,a.method="post",document.body.appendChild(a),t){var i=document.createElement("input");i.type="hidden",i.name=s,i.value=t[s],a.appendChild(i)}a.submit(),a.remove()},setUrlPath:function(t){var e=window.location.origin,a="";return"tiku"==t?a=1==parseInt(d.default.cookie.get("envType"))?"http://tikudemo.zbgedu.com":"https://tiku.zbgedu.com":"learning"==t?a=e.match("ilearning.zbgedu.com")?"https://elearning.zbgedu.com/ilearning.cookie.html":"http://elearningdemo.zbgedu.com/ilearning.cookie.html":"web"==t&&(a=e.match("ilearning.zbgedu.com")?"https://www.zbgedu.com":"http://wwwdemo.zbgedu.com"),a},source:function(t,e){var a,s=this;if(console.log(e,1111111),"video"==t){var n=e.courseId,r=e.taskId,c=e.isSlider,u=void 0===c||c;router.push("/video?courseId="+n+"&taskId="+r+"&isSlider="+u)}else if("exam"==t){var d=e.id,h=e.courseId,m=e.token,f=e.memberId,v=e.taskId,g=e.courseResourseId,C=e.title,b=e.exerciseVersionId,_=e.exerciseId;if(!(v=v||g)||"no"==v)return void message.info("暂不支持跳转到该试卷或试题");var x=(new Date).getTime()+18e5,y=new Date(x),w=window.location.hostname;/\.zbgedu\.com/.test(w)&&(w="zbgedu.com"),document.cookie="zbgeduId="+m+";path=/;domain="+w+";expires="+y.toGMTString()+";source=source;";var k=this.setUrlPath("tiku"),I=k+"/page/questionTest?";d&&"no"!=d&&"bit_note_lesson"!=d?p.a.ajax("queryExamenInfo",{examenId:d,token:m}).then((a=l()(o.a.mark(function t(a){var i,n,r,l,c,u,x,y,w,S,T,D,P,E,A,L,N,R,z,O,j,F,M,$;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:"success"==a.state&&(i=a.data,n=i.versionId,i.testSeason,r=i.itemId,l=i.classId,c={},p.a.ajax("getTaskInfoById",{token:m,taskId:v||g}).then(function(t){"success"==t.state&&(c=t.data)}),x=(u=c).taskName,y=u.chapterId,w=u.chapterName,S=u.courseName,T=u.subjectId,D=u.subjectName,P=u.categoryId,E=u.categoryName,x=encodeURIComponent(x),w=encodeURIComponent(w),D=encodeURIComponent(D),E=encodeURIComponent(E),S=encodeURIComponent(S),C=encodeURIComponent(C),A="cma",L="practice",N=6,1==r&&(I=k+"/questionTest?",A="acca"),"appraisal"==e.taskLevel&&(L="mock",N=4),R=2,0==e.doQuestionType?R=2:2==e.doQuestionType&&(R=3),z="",1==e.isParsing&&(z=1,L="analysis"),O="",j="",1==e.doErrorQuestion&&(L="reform",O=1,j=e.studentTestPaperId),F="",1==e.checkErrorQuestion&&(L="analysis",z=1,F=1,j=e.studentTestPaperId),"source"==e.source&&(b||_)?(M=I+"testPaperId="+d+"&itemId="+r+"&isParsing=1&question=questionVersionInfo&questionVersionId="+(b||_),console.log(M),window.open(M,"_blank")):($=I+"testPaperId="+d+"&categoryId="+P+"&subjectId="+T+"&chapterId="+y+"&courseName="+S+"&categoryName="+E+"&testPaperName="+C+"&subjectName="+D+"&chapterName="+w+"&taskName="+x+"&isParsing="+z+"&itemId="+r+"&isParsingOfError="+F+"&classId="+l+"&studentTestPaperId="+j+"&redoError="+O+"&taskId="+(v||g)+"&question="+L+"&examType="+R+"&type="+A+"&testPaperType="+N+"&token="+m+"&courseId="+h+"&memberId="+f+"&courseVersionId="+n+"&linkSource=1&answerSource=1&redirect="+encodeURIComponent(window.location.href),console.log($),window.open($,"_blank")));case 1:case"end":return t.stop()}},t,s)})),function(t){return a.apply(this,arguments)})):(message.config({top:"40%"}),message.info("试卷已下架"))}else if("pdf"==t||"pdfread"==t||"document"==t){var S=e.pdfUrl,T=e.classId,D=e.courseId,P=e.courseName,E=e.taskId,A=e.title,L=e.isSlider,N=void 0===L||L,R=encodeURI(window.location.protocol+"//exstatic.zbgedu.com"+S);router.push("/documentRead?url="+R+"&classId="+(T||"")+"&courseId="+D+"&courseName="+P+"&taskId="+E+"&taskName="+A+"&courseType=onlinecourse&isSlider="+N),window.location.reload()}else if("live"==t||"openCourse"==t)if(console.log(e),1==e.liveType){var z={liveName:e.title,liveManagePassword:e.openCourseLiveRoomPassword,liveRoomId:e.openCourseLiveRoomId,liveManageId:e.openCourseLiveManageId,taskId:e.taskId};router.push("/live/room/?data="+i()(z))}else{var O=e.courseId,j=e.taskId,F=e.classId,M=e.chapterId,$=e.courseType,q=e.chapterName||e.chapterTitle;router.push("/video?courseId="+O+"&taskId="+j+"&classId="+F+"&chapterName="+q+"&chapterId="+M+"&courseType="+$||"")}else"course"!=t&&"chapter"!=t||(window.location.href="/#/courseStudy/"+e.courseId+"/courseIntroduction")}}},zaQ3:function(t,e){},zlkP:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ec0e0653064ba2bec9fd.js.map
